<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/shuwen.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/shuwen.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="做有意思的事，有意思地做事">
<meta property="og:type" content="website">
<meta property="og:title" content="Shuwen&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Shuwen&#39;s blog">
<meta property="og:description" content="做有意思的事，有意思地做事">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Shuwen">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Shuwen's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Shuwen's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">生活 & 学习</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/09/21-35/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/09/21-35/" class="post-title-link" itemprop="url">Forecast Verification methods Across Time and Space Scales</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-09 21:35:28" itemprop="dateCreated datePublished" datetime="2022-03-09T21:35:28+08:00">2022-03-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/09/21-02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/09/21-02/" class="post-title-link" itemprop="url">Forecast Verification methods Across Time and Space Scales</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-09 21:02:00 / 修改时间：21:34:05" itemprop="dateCreated datePublished" datetime="2022-03-09T21:02:00+08:00">2022-03-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>跨时空尺度的预测验证方法</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="为什么要验证？"><a href="#为什么要验证？" class="headerlink" title="为什么要验证？"></a>为什么要验证？</h3><h3 id="预测和验证的种类"><a href="#预测和验证的种类" class="headerlink" title="预测和验证的种类"></a>预测和验证的种类</h3><h3 id="怎样使预测变好？"><a href="#怎样使预测变好？" class="headerlink" title="怎样使预测变好？"></a>怎样使预测变好？</h3><h3 id="预测质量-vs-预测值"><a href="#预测质量-vs-预测值" class="headerlink" title="预测质量 vs 预测值"></a>预测质量 vs 预测值</h3><h3 id="什么是“事实”"><a href="#什么是“事实”" class="headerlink" title="什么是“事实”"></a>什么是“事实”</h3><h3 id="验证结果的有效性"><a href="#验证结果的有效性" class="headerlink" title="验证结果的有效性"></a>验证结果的有效性</h3><h3 id="汇集-vs-分层-结果"><a href="#汇集-vs-分层-结果" class="headerlink" title="汇集 vs 分层 结果"></a>汇集 vs 分层 结果</h3><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="标准验证方法"><a href="#标准验证方法" class="headerlink" title="标准验证方法"></a>标准验证方法</h3><h4 id="二分（是-否）预测法"><a href="#二分（是-否）预测法" class="headerlink" title="二分（是/否）预测法"></a>二分（是/否）预测法</h4><h4 id="多类别预测法"><a href="#多类别预测法" class="headerlink" title="多类别预测法"></a>多类别预测法</h4><h4 id="连续变量预测法"><a href="#连续变量预测法" class="headerlink" title="连续变量预测法"></a>连续变量预测法</h4><h4 id="概率预测法"><a href="#概率预测法" class="headerlink" title="概率预测法"></a>概率预测法</h4><h3 id="科学或诊断验证方法"><a href="#科学或诊断验证方法" class="headerlink" title="科学或诊断验证方法"></a>科学或诊断验证方法</h3><h4 id="空间预测法"><a href="#空间预测法" class="headerlink" title="空间预测法"></a>空间预测法</h4><h4 id="概率预测法，包括集合预测系统"><a href="#概率预测法，包括集合预测系统" class="headerlink" title="概率预测法，包括集合预测系统"></a>概率预测法，包括集合预测系统</h4><h4 id="针对罕见事件的方法"><a href="#针对罕见事件的方法" class="headerlink" title="针对罕见事件的方法"></a>针对罕见事件的方法</h4><h4 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h4><h2 id="样本预测数据集"><a href="#样本预测数据集" class="headerlink" title="样本预测数据集"></a>样本预测数据集</h2><h3 id="芬利龙卷风预报"><a href="#芬利龙卷风预报" class="headerlink" title="芬利龙卷风预报"></a>芬利龙卷风预报</h3><h3 id="降水预报概率"><a href="#降水预报概率" class="headerlink" title="降水预报概率"></a>降水预报概率</h3><p>链接：<a href="https://cawcr.gov.au/projects/verification/#Contributors_to_this_site" target="_blank" rel="noopener">https://cawcr.gov.au/projects/verification/#Contributors_to_this_site</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/08/21-43/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/08/21-43/" class="post-title-link" itemprop="url">7th International Verification Methods Workshop_Tutorial Talks</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-08 21:43:00" itemprop="dateCreated datePublished" datetime="2022-03-08T21:43:00+08:00">2022-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-09 20:59:21" itemprop="dateModified" datetime="2022-03-09T20:59:21+08:00">2022-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="验证基础"><a href="#验证基础" class="headerlink" title="验证基础"></a>验证基础</h1><h2 id="基础验证概念"><a href="#基础验证概念" class="headerlink" title="基础验证概念"></a>基础验证概念</h2><h3 id="什么是验证？"><a href="#什么是验证？" class="headerlink" title="什么是验证？"></a>什么是验证？</h3><ol>
<li>验证是将<strong>预测</strong>与相关<strong>观测结果</strong>进行<strong>比较</strong>的过程</li>
<li>验证是衡量预测的<strong>质量</strong>（相对其价值）</li>
<li>（验证）对于许多方面，一个更合适的术语是“<strong>评价</strong>”</li>
</ol>
<h3 id="为什么要验证？"><a href="#为什么要验证？" class="headerlink" title="为什么要验证？"></a>为什么要验证？</h3><ol>
<li><strong>监控</strong>模型<strong>性能</strong></li>
<li><strong>识别</strong>模型<strong>缺陷</strong> -&gt; 帮助操作<strong>预测员</strong>了解模型的偏差</li>
<li>改进<strong>决策</strong>、改善<strong>预测</strong> -&gt; 在不同条件下使用对应合适的模型</li>
<li><strong>选择</strong>模型或模型配置（模型是否有所改进？）</li>
<li><strong>纠正</strong>模型<strong>缺陷</strong></li>
<li>确定预测的<strong>劣势、优势、差异</strong> -&gt; 帮助<strong>用户</strong>理解（解释）预测</li>
</ol>
<h3 id="确定验证目标"><a href="#确定验证目标" class="headerlink" title="确定验证目标"></a>确定验证目标</h3><p>思考如下问题：</p>
<ol>
<li>该模型在哪些位置的<strong>性能最好</strong>？</li>
<li>是否可以<strong>调节</strong>使得预测变得<strong>更好/更坏</strong>？</li>
<li><strong>概率</strong>预测是否得到了良好的校准（即是否<strong>可靠</strong>）？</li>
<li>天气预报是否正确地捕捉到了<strong>天气的自然变化</strong>？</li>
</ol>
<p>应该衡量哪些预测性能属性？</p>
<h3 id="预测”好”"><a href="#预测”好”" class="headerlink" title="预测”好”"></a>预测”好”</h3><p>取决于两个方面：</p>
<ol>
<li><p>预测的<strong>质量</strong></p>
</li>
<li><p>用户及其对预测<strong>信息的应用</strong></p>
<p>例子：</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/F_O.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/F_O.png"></p>
<p>许多验证方法结论表示，这种预测没有任何技能，而且非常不准确。</p>
<p>如果我是这个<strong>流域的水务经理</strong>，这是一个相当糟糕的预测。</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/F_O_%E6%B0%B4%E5%9F%9F.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/F_O_%E6%B0%B4%E5%9F%9F.png"></p>
<p>但如果我是一名<strong>航空交通战略规划者</strong>。。这可能是一个很好的预测</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/F_O_%E8%88%AA%E7%A9%BA.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/F_O_%E8%88%AA%E7%A9%BA.png"></p>
<ol>
<li><p>不同的<strong>用户</strong>对预测的好坏有不同的看法</p>
</li>
<li><p>不同的<strong>验证方法</strong>可以衡量<strong>不同类型的“好”</strong></p>
</li>
</ol>
</li>
<li><p>预测质量只是预测<strong>“好坏”的一个方面</strong></p>
</li>
<li><p>预测值与预测质量相关（但预测质量提高，某些方面的预测值可能下降）</p>
</li>
</ol>
<h3 id="开展验证研究的基本指南"><a href="#开展验证研究的基本指南" class="headerlink" title="开展验证研究的基本指南"></a>开展验证研究的基本指南</h3><ol>
<li>考虑<strong>用户</strong>（谁对验证结果感兴趣）</li>
<li>用户最关心的是预测质量的哪些<strong>方面</strong>？</li>
<li>确定代表正在被预测的事件的<strong>观测结果</strong></li>
<li>确定可以提供感兴趣的问题的答案的<strong>多个验证属性</strong></li>
<li>选择适当度量和表示感兴趣的属性的<strong>度量</strong>和<strong>图形</strong></li>
<li>确定一个提供技能参考水平的<strong>比较标准</strong>（例如：持久性、气候学、旧模型）</li>
</ol>
<h2 id="预测和观测"><a href="#预测和观测" class="headerlink" title="预测和观测"></a>预测和观测</h2><h3 id="预测、观测的类型"><a href="#预测、观测的类型" class="headerlink" title="预测、观测的类型"></a>预测、观测的类型</h3><p>连续的</p>
<ol>
<li>温度</li>
<li>雨量</li>
<li>500mb高度</li>
</ol>
<p>分类</p>
<ol>
<li>二分类<ol>
<li>雨与无雨<ol>
<li>强风与无强风</li>
<li>夜间霜冻与无霜冻</li>
</ol>
</li>
</ol>
</li>
<li>多分类<ol>
<li>云量类别</li>
<li>降水类型（小雨、中雨、暴雨等）</li>
</ol>
</li>
</ol>
<h3 id="匹配预测和观测结果"><a href="#匹配预测和观测结果" class="headerlink" title="匹配预测和观测结果"></a>匹配预测和观测结果</h3><ol>
<li><p>点对点网格</p>
<ol>
<li><p>匹配obs到最近的网格点</p>
</li>
<li><p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%82%B9%E5%AF%B9%E7%82%B9.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%82%B9%E5%AF%B9%E7%82%B9.png"></p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BE%8B%E5%AD%90.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BE%8B%E5%AD%90.png"></p>
<p>匹配雨量为最近的网格点的值，最近的点（右上角）值为0，所以fcst = 0</p>
</li>
</ol>
</li>
<li><p>网格点对点</p>
<ol>
<li><p>插值？</p>
</li>
<li><p>取最大的价值吗？</p>
</li>
<li><p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%BD%91%E6%A0%BC%E5%AF%B9%E7%82%B9.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%BD%91%E6%A0%BC%E5%AF%B9%E7%82%B9.png"></p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%BD%91%E6%A0%BC%E5%AF%B9%E7%82%B9%E4%BE%8B%E5%AD%90.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%BD%91%E6%A0%BC%E5%AF%B9%E7%82%B9%E4%BE%8B%E5%AD%90.png"></p>
<p>将网格值插值到雨量的位置（粗略假设：每个网格点的权重相等）</p>
<p><code>20 * 0.25 *3 = 15</code></p>
</li>
</ol>
</li>
</ol>
<blockquote>
<p>不建议使用模型分析作为验证的“观测”</p>
<p>因为：不独立！！</p>
<p>非独立会影响什么？“更好的”的分数……（不具有代表性）</p>
</blockquote>
<h2 id="观测特征及其影响"><a href="#观测特征及其影响" class="headerlink" title="观测特征及其影响"></a>观测特征及其影响</h2><h3 id="观测并不完美！"><a href="#观测并不完美！" class="headerlink" title="观测并不完美！"></a>观测并不完美！</h3><p>观测误差 vs 可预测性和预测误差/不确定性</p>
<p>相同参数的不同观测类型（手动或自动）可能会影响结果</p>
<p>典型的仪表错误有：</p>
<ul>
<li>温度：+/- 0.1℃</li>
<li>风速：速度相关误差，+/- 0.5m/s</li>
<li>降水（仪表）：+/- 0.1mm（half tip），但高达50%</li>
</ul>
<p>其他问题：定位问题（例如，屏蔽/暴露）</p>
<p>在某些情况下，“预测”误差与<strong>仪器的限制</strong>非常相似</p>
<h3 id="观察误差的影响"><a href="#观察误差的影响" class="headerlink" title="观察误差的影响"></a>观察误差的影响</h3><p>观测误差增加了验证结果的不确定性</p>
<p>对验证结果的影响</p>
<ol>
<li>RMSE - 高估</li>
<li>传播 - 更多 obs 异常值使整体看起来分散不足</li>
<li>可靠性 - 较差</li>
<li>分辨率 - BS 分解更大，但 ROC 区域更差</li>
<li>CRPS - 较差的平均值</li>
</ol>
<p>更多的样本可以有所帮助（结果的可靠性）</p>
<h2 id="供验证的统计依据"><a href="#供验证的统计依据" class="headerlink" title="供验证的统计依据"></a>供验证的统计依据</h2><h3 id="验证的统计依据"><a href="#验证的统计依据" class="headerlink" title="验证的统计依据"></a>验证的统计依据</h3><p>任何验证活动都应从彻底检查预测和观测结果的<strong>统计特性</strong>开始。</p>
<ol>
<li>例如，许多工具都是基于<strong>正态性（高斯分布）的假设</strong>。这是否适用于有问题的数据集？</li>
<li>预测是否捕捉到了观测到的<strong>范围</strong>？</li>
<li>预测和观察到的<strong>分布</strong>是否匹配/一致？</li>
<li>他们有相同的<strong>平均值，变化特征</strong>等吗？</li>
</ol>
<hr>
<p>除了需要评估数据的特征之外</p>
<p><strong>联合分布</strong>、<strong>边际分布</strong>和<strong>条件分布</strong>有助于理解预测验证的<strong>统计基础</strong></p>
<ol>
<li>这些分布可以与验证中使用的<strong>具体总结</strong>和<strong>性能度量</strong>有关</li>
<li>对验证感兴趣的<strong>特定属性</strong>是由这些分布来衡量的</li>
</ol>
<h4 id="基本概率"><a href="#基本概率" class="headerlink" title="基本概率"></a>基本概率</h4><p>又称（边际概率）</p>
<p>$p_x = p(X=x)$</p>
<p>一个随机变量X将取值x的概率</p>
<h4 id="联合概率"><a href="#联合概率" class="headerlink" title="联合概率"></a>联合概率</h4><p>$p_{x,y} = p(X=x,Y=y)$</p>
<p>事件x和y<strong>同时发生</strong>的概率</p>
<h4 id="条件概率"><a href="#条件概率" class="headerlink" title="条件概率"></a>条件概率</h4><p>$p_{x,y} = p(X=x|Y=y)$</p>
<p>给定事件y为真（或发生）时，事件x为真（或发生）的概率</p>
<hr>
<p>验证可以表示为评价预测和观测的<strong>联合分布</strong>的过程</p>
<p>（验证就是预测和观测场一样，也就是两者同时发生的情况，也就是联合分布）</p>
<ol>
<li>所有关于预测、观测及其关系的信息都用这种分布来表示</li>
<li>联合分布可以被分解成两对条件分布和边际分布<ul>
<li>$p(f,x) = p(F=f|X=x)p(X=x)$</li>
<li>$p(f,x) = p(X=x|F=f)p(F=f)$</li>
</ul>
</li>
</ol>
<h3 id="分布的图形化表示"><a href="#分布的图形化表示" class="headerlink" title="分布的图形化表示"></a>分布的图形化表示</h3><p>联合分布</p>
<ol>
<li>散点图</li>
<li>密度图</li>
<li>三维直方图</li>
<li>等高线图</li>
</ol>
<p>边际分布</p>
<ol>
<li><p>茎叶图 <a href="http://blog.sina.com.cn/s/blog_4da7fafa0100y9i3.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_4da7fafa0100y9i3.html</a></p>
</li>
<li><p>直方图/柱状图</p>
</li>
<li><p>方框图</p>
</li>
<li><p>累积分布图</p>
</li>
<li><p>分位数-分位数图/Q-Q图</p>
</li>
<li><p>密度函数图（函数做y，取值做x）</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E5%AF%86%E5%BA%A6%E5%87%BD%E6%95%B0%E5%9B%BE.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E5%AF%86%E5%BA%A6%E5%87%BD%E6%95%B0%E5%9B%BE.png"></p>
</li>
<li><p>累积分布图（累计值做y，取值做x）</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%B4%AF%E7%A7%AF%E5%88%86%E5%B8%83%E5%9B%BE.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E7%B4%AF%E7%A7%AF%E5%88%86%E5%B8%83%E5%9B%BE.png"></p>
</li>
</ol>
<p>条件分布</p>
<ol>
<li><p>条件分位数图</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E6%9D%A1%E4%BB%B6%E5%88%86%E4%BD%8D%E6%95%B0%E5%9B%BE.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E6%9D%A1%E4%BB%B6%E5%88%86%E4%BD%8D%E6%95%B0%E5%9B%BE.png"></p>
</li>
<li><p>条件箱形图</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E6%9D%A1%E4%BB%B6%E7%AE%B1%E5%BD%A2%E5%9B%BE.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E6%9D%A1%E4%BB%B6%E7%AE%B1%E5%BD%A2%E5%9B%BE.png"></p>
</li>
<li><p>茎叶图</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E8%8C%8E%E5%8F%B6%E5%9B%BE.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/%E8%8C%8E%E5%8F%B6%E5%9B%BE.png"></p>
</li>
</ol>
<h2 id="比较和推理"><a href="#比较和推理" class="headerlink" title="比较和推理"></a>比较和推理</h2><p>技能分数（Skill scores）</p>
<ol>
<li>技能分数是对相对表现的一种衡量标准</li>
<li>测量超过标准的改进百分比</li>
<li>正向导向（越大越好）</li>
<li>标准的选择很重要</li>
</ol>
<p>通用技能分数定义：</p>
<p>$\frac {M - M_{ref}}{M_{perf} - M_{ref}}$</p>
<p>M是对预测的验证度量</p>
<p>$M_{ref}$是衡量参考预测的指标</p>
<p>$M_{perf}$是对完美预测的衡量标准</p>
<h3 id="参考类型"><a href="#参考类型" class="headerlink" title="参考类型"></a>参考类型</h3><div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>例子</th>
<th>特性</th>
</tr>
</thead>
<tbody>
<tr>
<td>Random<br>随机</td>
<td>Equitable Threat Score<br>（公平的威胁得分）</td>
<td>很好理解的统计基准<br>没有物理意义</td>
</tr>
<tr>
<td>Persistence<br>持续</td>
<td>Constructed skill score<br>构建的技能分数</td>
<td>可预测性的度量（当持久性是一个糟糕的预测时，可预测性很低）<br>显示运行 NWP 模型的附加值</td>
</tr>
<tr>
<td>Sample climate<br>样品气候</td>
<td>Constructed skill score<br>构建的技能分数</td>
<td>比持久性更进一步，即平滑<br>由于政权依赖性，保留了可预测性元素</td>
</tr>
<tr>
<td>Long-term climatology <br>长期气候学</td>
<td>Constructed skill score,extremes<br>构建的技能得分，极端值</td>
<td>最简单的节拍参考，最流畅<br>对代表性、汇集问题、气候变化趋势的关注</td>
</tr>
</tbody>
</table>
</div>
<p>应该尽可能地估计分数和测量方法的不确定性！</p>
<p>不确定性来自于</p>
<ul>
<li>抽样变化性</li>
<li>观察误差</li>
<li>代表性差异</li>
<li>其他？</li>
</ul>
<p>置信区间和假设检验的方法</p>
<ul>
<li><p>参数化（即，取决于一个统计模型）</p>
</li>
<li><p>非参数（例如，源自重采样过程，通常称为“引导”）</p>
</li>
</ul>
<h2 id="验证属性"><a href="#验证属性" class="headerlink" title="验证属性"></a>验证属性</h2><p>验证属性度量预测质量的不同方面</p>
<ul>
<li>表示应该考虑的一系列特性</li>
<li>许多可能与预测和观测的联合、条件和边际分布有关</li>
</ul>
<p>例子</p>
<ol>
<li>偏见<br>(边际分布)</li>
<li>相关性<br>整体关联（联合分布）</li>
<li>准确度<br>差异（联合分布）</li>
<li>校准<br>测量条件偏差（条件分布）</li>
<li>区别<br>预测区分不同观测值的程度（条件分布）</li>
</ol>
<h3 id="验证措施的理想特点"><a href="#验证措施的理想特点" class="headerlink" title="验证措施的理想特点"></a>验证措施的理想特点</h3><p>统计有效性</p>
<p>特性（概率预测）</p>
<ol>
<li>当预测与预测者的最佳判断相一致时，就会达到“最佳”得分</li>
<li>“对冲”是惩罚</li>
<li>示例：Brier分数</li>
</ol>
<p>公平性</p>
<ol>
<li>恒定和随机预测应获得相同的分数<br>示例：Gilbert 技能得分（2x2 案例）； Gerrity 评分</li>
<li>没有分数达到更严格意义上的这一点<br>例如：大多数分数对偏差、事件频率很敏感</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li><p>所有的预测都应该经过验证——如果有什么东西值得预测，那就值得验证</p>
</li>
<li><p>分层和聚合</p>
<ol>
<li>聚合可以帮助增加样本大小和统计健壮性，但也可以隐藏性能的重要方面<ol>
<li>最常见的制度可能主导结果，掩盖了性能的变化</li>
<li>因此，将结果分层为有意义的同质子组是非常重要的</li>
</ol>
</li>
</ol>
</li>
<li><p>观测场</p>
<ol>
<li><p>没有所谓的“真相”！！</p>
</li>
<li><p>观察结果通常比模型分析更“真实”（至少它们相对更独立）</p>
</li>
<li><p>无论以任何可能的方式，都应该考虑到观测结果的不确定性</p>
<p>例如，相邻的观测结果彼此匹配得如何？</p>
</li>
</ol>
</li>
<li><p>4w+h</p>
<ol>
<li>who：谁想知道</li>
<li>what<ol>
<li>用户关心吗</li>
<li>我们在评估什么参数吗？它的特征是什么（例如，连续的、概率性的）？</li>
<li>阈值很重要（如果有的话）？</li>
<li>预测分辨率是否相关（例如，特定地点、区域平均）？</li>
<li>obs的特征（例如质量、不确定性）？</li>
<li>是否有适当的方法？</li>
</ol>
</li>
<li>why：我们需要验证吗？</li>
<li>how：您是否需要/显示相关结果（例如，分层/聚合）？</li>
<li>which<ol>
<li>方法和度量标准是否合适吗？</li>
<li>需要采用方法（例如，偏差、事件频率、样本量）</li>
</ol>
</li>
</ol>
</li>
<li><p>茎状图和叶图：边缘分布和条件分布</p>
</li>
</ol>
<h1 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h1><h2 id="观测数据来源"><a href="#观测数据来源" class="headerlink" title="观测数据来源"></a>观测数据来源</h2><ol>
<li><p>如果我们对预报有效期内的<strong>每个地点和每个时间点</strong>进行<strong>观测</strong>，这不是很好吗？</p>
<p>这样我们就可以对任何预测进行完全的验证</p>
</li>
<li><p><strong>观测结果</strong>代表了大气在空间和时间上的<strong>真实</strong>状态的<strong>一个“样本”</strong>。</p>
</li>
<li><p>观测也可能在<strong>某个点</strong>或<strong>一个区域</strong>上有效</p>
<p>实地观测或遥感的</p>
</li>
<li><p><strong>实地观测</strong> - <strong>地面</strong>或<strong>高空大气</strong></p>
<ol>
<li>在现场，<strong>点有效</strong></li>
<li><strong>高分辨率</strong>，但在空间中<strong>采样严重不足</strong></li>
<li>较<strong>新</strong>的仪器几乎可以<strong>连续地取样</strong></li>
<li>唯一重要的误差是<strong>仪器误差</strong>，通常很<strong>小</strong></li>
</ol>
</li>
</ol>
<h3 id="遥感观察"><a href="#遥感观察" class="headerlink" title="遥感观察"></a>遥感观察</h3><p><strong>卫星</strong>和<strong>雷达</strong>是最常见的</p>
<ol>
<li>雷达<ol>
<li>测量地表上方体积内<strong>水凝物的反向散射</strong> </li>
<li>与感测体积中的降雨率的关系是一个复杂的函数，但已知 </li>
<li>感知到的平均雨率与雨率（或地表的总降雨量）之间的联系要脆弱得多</li>
<li>误差的几种来源：<strong>衰减</strong>、<strong>异常传播</strong>、<strong>接近冰点的明亮频带</strong>等。</li>
</ol>
</li>
<li>卫星<ol>
<li>根据仪器测量<strong>一个或多个频带内</strong>的后向散射辐射。</li>
<li>通常低垂直分辨率 - 可以测量总柱水分 </li>
<li><strong>传递函数</strong>需要将<strong>返回值</strong>转换为感兴趣的<strong>变量的估计数</strong>。</li>
<li>对<strong>云</strong>最有用，特别是与表面观测相结合</li>
</ol>
</li>
</ol>
<h3 id="遥感数据"><a href="#遥感数据" class="headerlink" title="遥感数据"></a>遥感数据</h3><ol>
<li><strong>大数据</strong>量 </li>
<li>检测到的变量通常<strong>不是要验证</strong>的变量 – 需要<strong>传递函数</strong> – <strong>误差源</strong>之一 </li>
<li><strong>分辨率</strong>取决于<strong>仪器</strong>，雷达为几米，卫星数据为1公里左右。</li>
<li>高覆盖率，在时间上可能是零星的</li>
<li>注意由于<strong>外部影响信号</strong>而造成的错误</li>
</ol>
<h3 id="数据特征总结"><a href="#数据特征总结" class="headerlink" title="数据特征总结"></a>数据特征总结</h3><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>实地考察</th>
<th>雷达</th>
<th>卫星</th>
</tr>
</thead>
<tbody>
<tr>
<td>分辨率 - 空间</td>
<td>高 - 点</td>
<td>相当高 - 雷达量平均数</td>
<td>取决于足迹在1公里左右</td>
</tr>
<tr>
<td>分辨率 - 时间</td>
<td>高</td>
<td>高</td>
<td>高</td>
</tr>
<tr>
<td>空间采样频率</td>
<td>这是很低的，除了特殊的网络</td>
<td>高 - 基本上是连续的</td>
<td>其域内的地理位置高 极地轨道变量</td>
</tr>
<tr>
<td>时间采样频率</td>
<td>可以是高</td>
<td>高，通常为10min左右</td>
<td>中等用于地球轨道。<br>低，适用于极地轨道飞行</td>
</tr>
</tbody>
</table>
</div>
<p><strong>分辨率</strong>：定义观测值的<strong>时间或空间距离</strong></p>
<p><strong>采样频率</strong>（粒度）：在时间或空间上的<strong>观测频率</strong></p>
<h3 id="误差和不确定性的来源"><a href="#误差和不确定性的来源" class="headerlink" title="误差和不确定性的来源"></a>误差和不确定性的来源</h3><ol>
<li><p>在频率或值上的偏差</p>
</li>
<li><p>仪器偏差</p>
</li>
<li><p>随机误差或噪声</p>
</li>
<li><p>报告错误</p>
</li>
<li><p>主观观察 </p>
<p>例如云覆盖</p>
</li>
<li><p>精度误差</p>
</li>
<li><p>传输函数错误</p>
</li>
<li><p>分析误差</p>
<p>当使用分析时</p>
</li>
</ol>
<h3 id="观测的质量控制"><a href="#观测的质量控制" class="headerlink" title="观测的质量控制"></a>观测的质量控制</h3><p>做这件事是绝对必要的，即使是“好的” 观测站点</p>
<p>基本方法</p>
<pre><code> 1. **伙伴检查**（空间和时间）
 2. 简单的**范围检查**
 3. **趋势检查**（与附近的独立时空检查）
 4. 绝对值检查。
 5. 在不消除太多“好”数据的情况下删除“坏”数据
 6. 但不做预测 - 观测的差异检查
</code></pre><p>使用模型作为观察的比较标准不是一个好主意，作为一个过滤器来消除模型无法解决的极端情况</p>
<p>​    1. 使观测数据依赖于模型</p>
<pre><code> 2. 在qc中使用的模型得到了更好的验证结果
</code></pre><p>了解有关仪器及其错误的细节也很重要。</p>
<h2 id="预测有效性类型"><a href="#预测有效性类型" class="headerlink" title="预测有效性类型"></a>预测有效性类型</h2><p>用于客观验证</p>
<p>“预测<strong>必须被陈述</strong>，以便它们可核实”</p>
<p>一个<strong>预测的意义</strong>是什么？精确度吗？</p>
<ol>
<li>需要进行<strong>客观验证</strong></li>
<li>如果验证是<strong>面向用户</strong>的，那么<strong>用户的理解</strong>是很重要的</li>
<li>所有预测对<strong>空间点或区域</strong>都<strong>有效</strong></li>
<li>在这个地区的所有点上吗？</li>
</ol>
<p>同样对于时间：一个预测可能是</p>
<ol>
<li>时间的一瞬间 </li>
<li>一个瞬间在时间上，但“某个时间”在一个范围内</li>
<li>一段时间，例如24小时折旧</li>
<li>在一段时间内的极端情况吗？</li>
</ol>
<h3 id="预测数据来源，以供验证"><a href="#预测数据来源，以供验证" class="headerlink" title="预测数据来源，以供验证"></a>预测数据来源，以供验证</h3><p>所有类型的NWP模型</p>
<ol>
<li>主要变量(P或Z、T、U、V、RH或Td)的确定性预测，通常是在模型的三维域上的网格点</li>
<li>其他衍生变量：由模型计算出的折旧率、折旧总额、云量和高度等，可能无法观测到</li>
<li>空间和时间表示被认为是连续的，但有限的尺度集可以被解决。</li>
</ol>
<p>后处理模型输出</p>
<ol>
<li>统计方法，如MOS</li>
<li>动态的或经验性的方法，例如折旧类型</li>
<li>相互依赖的模型，如海浪</li>
</ol>
<p>操作预测 </p>
<ol>
<li>格式取决于用户的需要</li>
<li>可以是点，可以是一个区域或一段时间内的最大平均值或次要平均值</li>
</ol>
<p>“一切都应该得到核实”</p>
<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><ol>
<li><p><strong>连续的</strong></p>
<ol>
<li>可以在其范围内承担任何值（接近）</li>
<li>例如温度、风</li>
<li>预测是针对特定的值进行的</li>
</ol>
</li>
<li><p><strong>分类的</strong></p>
<ol>
<li>只能接受一小部分特定的值</li>
<li>可以这样观察到，如降水、降水类型、视觉障碍</li>
<li>可以从一个连续的变量中“分类”，例如降水量、上限、vis、云量</li>
<li>如果有，验证为<strong>分类</strong>或<strong>发生概率</strong></li>
</ol>
</li>
<li><p>概率分布</p>
<ol>
<li>验证为<strong>概率分布函数</strong>或<strong>累积分布函数</strong></li>
</ol>
</li>
<li><p>转换变量</p>
<ol>
<li><p>数值已从原始观测值中有所改变</p>
</li>
<li><p>示例：</p>
<ol>
<li><p>准连续变量的分类，例如云量</p>
</li>
<li><p>要根据用户需求进行评估：</p>
<ol>
<li>“升级”到模型网格盒</li>
<li>插补</li>
</ol>
</li>
<li><p>转换观测值的分布：</p>
<p>例如，通过子设置来选择极端情况</p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="数据匹配问题"><a href="#数据匹配问题" class="headerlink" title="数据匹配问题"></a>数据匹配问题</h2><p>例如，预测可以在空间上定义为“威胁区域”，或在网格（模型）上表示</p>
<ol>
<li>有限尺度集</li>
<li>在空间和时间上相关</li>
</ol>
<p>观测结果是分散的点值</p>
<ol>
<li>代表所有刻度，但仅在车站有效</li>
<li>采样不足作为场</li>
</ol>
<p>预测至观测技术：</p>
<ol>
<li>问：在验证地点的预测是什么？</li>
<li>推荐的验证方法-不要考虑观测值。</li>
<li>插值到观测位置的插值-为平滑变量</li>
<li>最近的网格点-用于“情景性”或空间分类变量</li>
<li>除QC外，观察结果保持不变</li>
<li>有时，通过将模型预测转换为“如果预测正确，卫星将看到什么”，可以对遥感数据进行验证</li>
</ol>
<p>观测预测技术（适用针对建模人员）：</p>
<ol>
<li>放大——在网格上求平均值——仅当这是预测（模型）的真正定义时，例如Cherubini等人2002<ol>
<li>本地验证</li>
</ol>
</li>
<li>只验证那些有数据的地方！</li>
</ol>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><h3 id="降水验证项目：方法论-欧洲"><a href="#降水验证项目：方法论-欧洲" class="headerlink" title="降水验证项目：方法论 - 欧洲"></a>降水验证项目：方法论 - 欧洲</h3><p>升尺度：</p>
<p>1x1个网格框，模型分辨率的限制</p>
<p>网格箱上的平均磅，每个网格箱至少9吨（欧洲数据）</p>
<p>网格盒上的平均 obs，每个网格盒至少 9 个 stns（欧洲数据） </p>
<p>仅在有足够的数据处进行验证</p>
<p>回答在模型的能力范围内关于预测的质量的问题</p>
<p>最有可能的用户是建模者</p>
<p>模型技术观察：</p>
<ol>
<li>在模型网格上的观测数据分析<ol>
<li>经常做，但除了一些模型研究外，不是一个验证的好主意</li>
<li>使用模型独立的方法进行分析，如巴恩斯</li>
<li>使用依赖模型的方法进行分析-数据同化（验证错误！）例如，Park等人，2008年</li>
</ol>
</li>
</ol>
<p>不同的“真理”的影响</p>
<h2 id="将匹配点obs与区域延迟的预测相匹配：事件是什么？"><a href="#将匹配点obs与区域延迟的预测相匹配：事件是什么？" class="headerlink" title="将匹配点obs与区域延迟的预测相匹配：事件是什么？"></a>将匹配点obs与区域延迟的预测相匹配：事件是什么？</h2><p>对于分类预测，我们必须清楚正在预测的“事件”</p>
<ol>
<li>预测有效的位置或区域</li>
<li>对它有效的时间范围</li>
<li>类别定义</li>
</ol>
<p>现在，什么被定义为正确的预测呢？</p>
<ol>
<li>该事件被预测出来，并在该地区的任何地方被观察到吗？超过一定比例的面积？</li>
<li>规模考虑因素</li>
</ol>
<h2 id="收集数据进行验证"><a href="#收集数据进行验证" class="headerlink" title="收集数据进行验证"></a>收集数据进行验证</h2><p>存档预测和观测</p>
<ol>
<li>你自己的：观测站观测和相应的预报</li>
<li>大多数NWP中心将他们的预测和观察结果存档；如果你使用他们的模型，你可能会让他们给你相关的数据进行验证</li>
</ol>
<p>目标：生成一套相匹配的预测和观测结果</p>
<hr>
<p>emm, ppt看的有点迷呀，，，唉</p>
<h1 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h1><p>链接：<a href="https://www.7thverificationworkshop.de/Tutorial/Tutorial-Talks/index.html" target="_blank" rel="noopener">https://www.7thverificationworkshop.de/Tutorial/Tutorial-Talks/index.html</a></p>
<ol>
<li><a href="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/tutorial_verification_basics.pdf" target="_blank" rel="noopener">验证基础</a></li>
<li><a href="http://r7wiw08xi.hn-bkt.clouddn.com/7th%20International%20Verification%20Methods%20Workshop/tutorial_data_preparation.pdf" target="_blank" rel="noopener">数据准备</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/04/16-29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/04/16-29/" class="post-title-link" itemprop="url">FSS_FractionScoreSkill</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-04 16:29:06" itemprop="dateCreated datePublished" datetime="2022-03-04T16:29:06+08:00">2022-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-08 21:44:42" itemprop="dateModified" datetime="2022-03-08T21:44:42+08:00">2022-03-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%99%8D%E6%B0%B4%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87/" itemprop="url" rel="index"><span itemprop="name">降水评估指标</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h2><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/fss/%E5%BC%95%E5%85%A5%E9%97%AE%E9%A2%98.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/fss/%E5%BC%95%E5%85%A5%E9%97%AE%E9%A2%98.png"></p>
<p>对于如上预测场和观测场，虽然降水都分布在7个降水格点上，但位置均未能一一对应，所以其TS评分等评分为0（没有降水预报技巧），但从<strong>概率</strong>角度看，观测与预报的降水发生概率是一样的，7/49，具有<strong>相同的降水预报面积</strong>。</p>
<h3 id="FSS"><a href="#FSS" class="headerlink" title="FSS"></a>FSS</h3><p>作者：Robert、Lean（2008）</p>
<p>作用：考察不同尺度内降水发生概率</p>
<h2 id="具体公式"><a href="#具体公式" class="headerlink" title="具体公式"></a>具体公式</h2><h3 id="按步骤"><a href="#按步骤" class="headerlink" title="按步骤"></a>按步骤</h3><ol>
<li><p>Brier评分的变形：比较预报与观测的降水频率 FBS (Fraction Brier Score)</p>
<p>公式：$FBS = \frac{1}{N} \displaystyle \sum_{N}(P_{fcst} - P_{obs})^2$</p>
<p>$P_{fcst}$、$P_{obs}$：每个领域尺度内 预报与预测降水发生概率（0 - 1）</p>
<p>N：网格数量</p>
</li>
<li><p>方差技巧评分：获取正定的（特征值均为正）评分</p>
<p>公式：$FSS = 1 - \frac{FBS} {\frac{1}{N}(\displaystyle \sum_N P_{fcst}^2 + \displaystyle \sum_N P_{obs}^2)}$</p>
<p>FSS</p>
<ol>
<li><p>范围（0 - 1）</p>
<p>0 ：完全不匹配</p>
<p>1：完美匹配</p>
</li>
<li><p>特点：<br>领域尺度增加 -&gt; FSS评分增大</p>
<p>当$P_{fcst} = bP_{obs}$，FSS评分向 $2b/(b^2+1)$ 渐近</p>
</li>
</ol>
</li>
</ol>
<h3 id="简写"><a href="#简写" class="headerlink" title="简写"></a>简写</h3><p>$FSS = 1 - \frac{\frac{1}{N} \displaystyle \sum_{N}(P_{fcst} - P_{obs})^2} {\frac{1}{N}(\displaystyle \sum_N P_{fcst}^2 + \displaystyle \sum_N P_{obs}^2)}$</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="R语言"><a href="#R语言" class="headerlink" title="R语言"></a>R语言</h3><h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><p>链接：<a href="https://rdrr.io/cran/verification/src/R/fss.R#heading-0" target="_blank" rel="noopener">https://rdrr.io/cran/verification/src/R/fss.R#heading-0</a></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">fss &lt;- <span class="keyword">function</span>(obs, pred, w = <span class="number">0</span>, FUN = mean, <span class="keyword">...</span>)&#123;</span><br><span class="line"><span class="comment">### compare matrixes of forecast of observed values and forecast.</span></span><br><span class="line"><span class="comment">### values can be calcuated using different windows.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### with a window size of 0, obs is returned.</span></span><br><span class="line">obs.matrix &lt;- matrix.func(DAT = obs, w = w, FUN = FUN) </span><br><span class="line">  </span><br><span class="line"><span class="comment">### with a window size of 0, obs is returned.</span></span><br><span class="line">frcs.matrix &lt;- matrix.func(DAT = pred, w = w, FUN = FUN)   </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(nrow(obs)!= nrow(pred) &amp;  ncol(obs)!=  nrow(obs) ) <span class="keyword">stop</span>(<span class="string">"Observation matrix and forecast matrix different sizes"</span>)</span><br><span class="line">  </span><br><span class="line">n   &lt;- prod(dim(obs.matrix))  <span class="comment">### number of gridpoints</span></span><br><span class="line"></span><br><span class="line">N   &lt;- sum((obs.matrix-frcs.matrix)^<span class="number">2</span>, na.rm = <span class="literal">TRUE</span>)/n <span class="comment">### numerator</span></span><br><span class="line">D   &lt;- (sum(obs.matrix^<span class="number">2</span>, na.rm = <span class="literal">TRUE</span>) +sum(frcs.matrix^<span class="number">2</span>, na.rm = <span class="literal">TRUE</span>))/n <span class="comment">### denominator</span></span><br><span class="line"></span><br><span class="line">FSS &lt;- <span class="number">1</span> - N/D  </span><br><span class="line"><span class="keyword">return</span>(FSS)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">matrix.func &lt;- <span class="keyword">function</span>(DAT, w = <span class="number">0</span>, FUN = mean, <span class="keyword">...</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">### w is the '' radius'' of window.  eg. w = 2, defines a 5 by 5 square</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">### define function</span></span><br><span class="line">FUN &lt;- match.fun(FUN)</span><br><span class="line"></span><br><span class="line"><span class="comment">### define output dimension</span></span><br><span class="line">II &lt;- nrow(DAT) - <span class="number">2</span>*w   <span class="comment">## output row dimension</span></span><br><span class="line">JJ &lt;- ncol(DAT) - <span class="number">2</span>*w  </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(JJ&lt;=<span class="number">0</span>|II &lt;= <span class="number">0</span>) &#123;<span class="keyword">stop</span>(<span class="string">"The window exceeds the size of the observation"</span> ) &#125; </span><br><span class="line">OUT &lt;- matrix(<span class="literal">NA</span>, nrow= II, ncol = JJ)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:II)&#123;</span><br><span class="line"><span class="keyword">for</span>(j <span class="keyword">in</span> <span class="number">1</span>:JJ)&#123;</span><br><span class="line">sub &lt;- DAT[ i :(i + <span class="number">2</span>*w ),</span><br><span class="line">             j :(j + <span class="number">2</span>*w ) ] <span class="comment"># subset data</span></span><br><span class="line"></span><br><span class="line">OUT[i,j] &lt;- FUN(sub,<span class="keyword">...</span>)</span><br><span class="line">&#125;  <span class="comment">## close J</span></span><br><span class="line">&#125;  <span class="comment">## close I</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span>(OUT)</span><br><span class="line">&#125;  <span class="comment">## close functionr</span></span><br></pre></td></tr></table></figure>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>链接：<a href="https://rdrr.io/cran/verification/man/fss.html" target="_blank" rel="noopener">https://rdrr.io/cran/verification/man/fss.html</a></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(verification)</span><br><span class="line"></span><br><span class="line">grid&lt;- list( x= seq( <span class="number">0</span>,<span class="number">5</span>,,<span class="number">100</span>), y= seq(<span class="number">0</span>,<span class="number">5</span>,,<span class="number">100</span>)) </span><br><span class="line">obj&lt;-Exp.image.cov( grid=grid, theta=<span class="number">.5</span>, setup=<span class="literal">TRUE</span>)</span><br><span class="line">look&lt;- sim.rf( obj)</span><br><span class="line">look[look &lt; <span class="number">0</span>] &lt;- <span class="number">0</span></span><br><span class="line"></span><br><span class="line">look2 &lt;- sim.rf( obj)</span><br><span class="line">look2[look2&lt;<span class="number">0</span>] &lt;- <span class="number">0</span></span><br><span class="line"></span><br><span class="line">fss(look, look2, w=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Not run: </span></span><br><span class="line"><span class="comment">#  The following example replicates Figure 4 in Roberts and Lean (2008).</span></span><br><span class="line"><span class="comment">####      examples</span></span><br><span class="line"></span><br><span class="line">LAG &lt;- c(<span class="number">1</span>,<span class="number">3</span>,<span class="number">11</span>,<span class="number">21</span>)</span><br><span class="line">box.radius &lt;- seq(<span class="number">0</span>,<span class="number">24</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">OUT &lt;- matrix(<span class="literal">NA</span>, nrow = length(box.radius), ncol = length(LAG) )</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(w <span class="keyword">in</span> <span class="number">1</span>:<span class="number">4</span>)&#123;</span><br><span class="line"></span><br><span class="line">FRCS &lt;- OBS &lt;- matrix(<span class="number">0</span>, nrow = <span class="number">100</span>, ncol = <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">obs.id        &lt;- <span class="number">50</span></span><br><span class="line">OBS[,obs.id]  &lt;- <span class="number">1</span></span><br><span class="line"></span><br><span class="line">FRCS[, obs.id + LAG[w]] &lt;- <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:length(box.radius))&#123;</span><br><span class="line"></span><br><span class="line">OUT[i, w] &lt;- fss(obs = OBS, pred = FRCS, w = box.radius[i] )</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">### close i</span></span><br><span class="line">&#125; <span class="comment">### close w</span></span><br><span class="line"></span><br><span class="line">b &lt;- mean(OBS) <span class="comment">## base rate</span></span><br><span class="line"></span><br><span class="line">fss.uniform  &lt;- <span class="number">0.5</span> + b/<span class="number">2</span></span><br><span class="line">fss.random   &lt;- b</span><br><span class="line"></span><br><span class="line">matplot(OUT, ylim = c(<span class="number">0</span>,<span class="number">1</span>), ylab = <span class="string">"FSS"</span>, xlab = <span class="string">"grid squares"</span>, </span><br><span class="line">type = <span class="string">"b"</span>, lty = <span class="number">1</span>, axes = <span class="literal">FALSE</span> , lwd = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">abline(h = c(fss.uniform, fss.random), lty = <span class="number">2</span>)  </span><br><span class="line">axis(<span class="number">2</span>)</span><br><span class="line">box()</span><br><span class="line">axis(<span class="number">1</span>, at = <span class="number">1</span>:length(box.radius), lab = <span class="number">2</span>*box.radius + <span class="number">1</span>)</span><br><span class="line">grid()</span><br><span class="line"></span><br><span class="line">legend(<span class="string">"bottomright"</span>, legend = LAG, col = <span class="number">1</span>:<span class="number">4</span>, pch = as.character(<span class="number">1</span>:<span class="number">4</span>), </span><br><span class="line"> title = <span class="string">"Spatial Lag"</span>, inset = <span class="number">0.02</span>, lwd = <span class="number">2</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">## End(Not run)</span></span><br></pre></td></tr></table></figure>
<h4 id="结果截图"><a href="#结果截图" class="headerlink" title="结果截图"></a>结果截图</h4><p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/fss/r%E8%AF%AD%E8%A8%80%E7%BB%93%E6%9E%9C%E5%9B%BE.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/fss/r%E8%AF%AD%E8%A8%80%E7%BB%93%E6%9E%9C%E5%9B%BE.png"></p>
<h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><h4 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(data, w = <span class="number">0</span>)</span>:</span></span><br><span class="line">    row = data.shape[<span class="number">0</span>]</span><br><span class="line">    col = data.shape[<span class="number">1</span>]</span><br><span class="line">    </span><br><span class="line">    ii = row - <span class="number">2</span> * w</span><br><span class="line">    jj = col - <span class="number">2</span> * w</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(ii &lt;= <span class="number">0</span> <span class="keyword">or</span> jj &lt;=<span class="number">0</span>):</span><br><span class="line">        print(<span class="string">"error!"</span>)</span><br><span class="line">        </span><br><span class="line">    out = np.zeros((ii, jj))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, ii):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, jj):</span><br><span class="line">            </span><br><span class="line">            sub = data[i : (i + <span class="number">2</span> * w + <span class="number">1</span>), j : (j + <span class="number">2</span> * w + <span class="number">1</span>)]</span><br><span class="line">            </span><br><span class="line">            out[i, j] = np.mean(sub)</span><br><span class="line">    <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fss</span><span class="params">(obs, fc, w = <span class="number">0</span>)</span>:</span></span><br><span class="line">    obs_m = func(obs, w)</span><br><span class="line"><span class="comment">#     print(obs_m[0][16])</span></span><br><span class="line"><span class="comment">#     print(obs_m[0][17])</span></span><br><span class="line"><span class="comment">#     print(obs_m[0][18])</span></span><br><span class="line">    fc_m = func(fc, w)</span><br><span class="line"><span class="comment">#     print(obs_m)</span></span><br><span class="line"><span class="comment">#     print(fc_m)</span></span><br><span class="line">    n = obs_m.shape[<span class="number">0</span>] * obs_m.shape[<span class="number">1</span>]</span><br><span class="line">    N = ((obs_m - fc_m) ** <span class="number">2</span>).sum() / n</span><br><span class="line"><span class="comment">#     print(N.shape)</span></span><br><span class="line">    D = ((obs_m ** <span class="number">2</span>).sum() + (fc_m ** <span class="number">2</span>).sum()) / n</span><br><span class="line"><span class="comment">#     print(n)</span></span><br><span class="line"><span class="comment">#     print(N)</span></span><br><span class="line"><span class="comment">#     print(D)</span></span><br><span class="line">    <span class="keyword">return</span>  <span class="number">1</span> - N / D</span><br></pre></td></tr></table></figure>
<h4 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">lag = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">11</span>, <span class="number">21</span>]</span><br><span class="line">radius = np.arange(<span class="number">0</span>, <span class="number">24</span> + <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">out = np.zeros((len(radius), len(lag)))</span><br><span class="line"></span><br><span class="line">frcs = np.zeros((<span class="number">100</span>, <span class="number">100</span>))</span><br><span class="line">obs = np.zeros((<span class="number">100</span>, <span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">id = <span class="number">50</span> - <span class="number">1</span></span><br><span class="line">obs[ : , id] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> range(<span class="number">0</span>, len(lag)):</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> range(<span class="number">0</span>, len(radius)):   </span><br><span class="line">        frcs[ : , id + lag[l - <span class="number">1</span>]] = <span class="number">0</span></span><br><span class="line">        frcs[ : , id + lag[l]] = <span class="number">1</span></span><br><span class="line">        out[r][l] = fss(obs, frcs, radius[r])</span><br><span class="line">b = np.mean(obs)</span><br><span class="line">uniform = <span class="number">0.5</span> + b / <span class="number">2</span></span><br><span class="line">random = b</span><br><span class="line"></span><br><span class="line">plt.plot(out)</span><br><span class="line">plt.ylabel(<span class="string">"FSS"</span>)</span><br><span class="line">plt.xlabel(<span class="string">"grid squares"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="结果截图-1"><a href="#结果截图-1" class="headerlink" title="结果截图"></a>结果截图</h4><p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/fss/python%E7%BB%93%E6%9E%9C%E5%9B%BE.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/fss/python%E7%BB%93%E6%9E%9C%E5%9B%BE.png"></p>
<p>坐标可以自定义修改，值是一样的</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/fss/%E7%BB%93%E6%9E%9C%E7%9F%A9%E9%98%B5.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/fss/%E7%BB%93%E6%9E%9C%E7%9F%A9%E9%98%B5.png"></p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><a href="http://r7wiw08xi.hn-bkt.clouddn.com/fss/Roberts2008a.pdf" target="_blank" rel="noopener">Roberts2008原文</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/02/14-50/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/02/14-50/" class="post-title-link" itemprop="url">SAL_StructureAmplitudeLocation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-02 14:50:25" itemprop="dateCreated datePublished" datetime="2022-03-02T14:50:25+08:00">2022-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-07 17:48:59" itemprop="dateModified" datetime="2022-03-07T17:48:59+08:00">2022-03-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%99%8D%E6%B0%B4%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87/" itemprop="url" rel="index"><span itemprop="name">降水评估指标</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h3><p>SAL方法 通过三个分量，分别从 <strong>场结构、降水强度和场位置偏差</strong> 对预测结果进行评价</p>
<h4 id="threshold"><a href="#threshold" class="headerlink" title="threshold"></a>threshold</h4><p>确定方法是经验法</p>
<p>阈值的设定，效果是大于阈值的格点才会被定为<strong>降水主体成员</strong>（<strong>降水体</strong>：降水主体内（各不连续的小降水区域）每个连续的小区域），只有<strong>降水主体成员</strong>才参与上述S、L2的运算</p>
<h4 id="three-component"><a href="#three-component" class="headerlink" title="three component"></a>three component</h4><ol>
<li><p>计算<strong>总雨带</strong>特征：A、L1 （与阈值无关）</p>
</li>
<li><p>计算<strong>内部结构</strong>特征：S、L2</p>
</li>
</ol>
<h5 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h5><p>S表示Structure 结构，提供 预测场和观测场 有关其<strong>大小</strong>和<strong>形状</strong>的信息。</p>
<ol>
<li>正值 -&gt; 表示模拟的降水对象<strong>太大或太平</strong></li>
<li>负值 -&gt; 表示对象<strong>太尖锐或太小</strong></li>
</ol>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/S%E8%AF%84%E5%88%86%E7%AE%80%E4%BB%8B.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/S%E8%AF%84%E5%88%86%E7%AE%80%E4%BB%8B.png"></p>
<h5 id="Amplitude"><a href="#Amplitude" class="headerlink" title="Amplitude"></a>Amplitude</h5><p>A表示Amplitude （振幅）<strong>降水强度</strong></p>
<ol>
<li><p>正值 -&gt; 表示对总降水量的估计过高</p>
</li>
<li><p>负值 -&gt; 表示对总降水量的估计过低</p>
</li>
</ol>
<h5 id="Location"><a href="#Location" class="headerlink" title="Location"></a>Location</h5><p>L表示Location位置，提供预测场和观测场 <strong>位置偏差</strong>信息</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/L%E8%AF%84%E5%88%86%E7%AE%80%E4%BB%8B.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/L%E8%AF%84%E5%88%86%E7%AE%80%E4%BB%8B.png"></p>
<p>分为L1、L2两部分</p>
<ol>
<li><p>L1表示预报场与观测场质心之间的归一化距离。（两个场质心之间的距离）</p>
</li>
<li><p>L2是总降水场的质心与观测和预报的个别降水对象的归一化距离之差。（每个降水对象到质心的距离）</p>
<p>L2是为了预防下图情况，由于观测场分为两块，质心在中间，与预测场重合</p>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/L2%E8%AF%84%E5%88%86%E7%AE%80%E4%BB%8B.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/L2%E8%AF%84%E5%88%86%E7%AE%80%E4%BB%8B.png"> </p>
<h4 id="some-example"><a href="#some-example" class="headerlink" title="some example"></a>some example</h4></li>
</ol>
<p><img src="http://r7wiw08xi.hn-bkt.clouddn.com/SAL%E4%BE%8B%E5%AD%90.png" alt="http://r7wiw08xi.hn-bkt.clouddn.com/SAL%E4%BE%8B%E5%AD%90.png"></p>
<p> （ S = 0、A=0、L=0表示完美匹配）</p>
<h3 id="具体公式"><a href="#具体公式" class="headerlink" title="具体公式"></a>具体公式</h3><h4 id="S-结构"><a href="#S-结构" class="headerlink" title="S - 结构"></a>S - 结构</h4><p>公式：$S = \frac{V(R_{mod})-V(R_{obs})}{0.5[V(R_{mod})+V(R_{obs})]}$</p>
<ol>
<li><p>$V(R_{mod})$：预测场中所有降水体以体内<strong>总降水量为权重</strong>的$V_n$的加权平均</p>
<ol>
<li>公式：$V(R) = \frac{\sum^{m}_{n=1}R_nV_n}{\sum^m_{n=1}R_n}$<ol>
<li>$R_n$：降水体的总降水量</li>
</ol>
</li>
</ol>
</li>
<li><p>$V_n$：第n个降水体内的<strong>总降水量</strong>与<strong>最大降水量</strong>之<strong>比</strong></p>
<p>😃降水量就是某一个降水体每个降水值的总和</p>
<ol>
<li><p>公式：$V_n = {\displaystyle \sum_{(i,j)\in R_n} {R_{i,j}/R^{max}_n} = R_n/R^{max}_n}$</p>
<ol>
<li><p>$R_{i,j}$：格点（i，j）处的降水</p>
</li>
<li><p>$R^{max}_{n}$：降水体n内的最大降水值</p>
<p>😃降水体相当于是面积，最大值表示这块面积里面的某一个点的最大值</p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h4 id="A-强度"><a href="#A-强度" class="headerlink" title="A - 强度"></a>A - 强度</h4><p>公式：$A = \frac {D(R_{mod}) - D(R_{obs})} {0.5[D(R_{mod}) + D(R_{obs})]}$</p>
<ol>
<li>$D(R) = \frac{1}{N} \displaystyle \sum_{(i,j)\in D}{R_{i,j}}$   →   $D(R)$为所取区域内非缺省格点降水的<strong>平均值</strong></li>
</ol>
<h4 id="L-位置"><a href="#L-位置" class="headerlink" title="L - 位置"></a>L - 位置</h4><p>公式</p>
<ol>
<li><p>$L = L_1 + L_2$</p>
<ol>
<li><p>$L_1 = \frac{|x(R_{mod})-x(R_{obs})|}{d}$  →   L1为区域D实况与预报降水主体中心之间的距离</p>
<ol>
<li>$x(R)$：表示所取区域D内降水主体的<strong>重心位置</strong></li>
<li>$d$：区域D内最大距离</li>
</ol>
</li>
<li><p>$L_2 = 2\cdot{\frac{r(R_{mod})-r(R_{obs})}{d}}$  →   L2为降水主体重心与降水场每个降水体重心之间的平均距离</p>
<ol>
<li><p>$r =  \frac{\sum ^{m}_{n=1}{R_n \cdot{|x-x_n|}}}{\sum^{m}_{n=1}R_n}$   </p>
<ol>
<li>$m$ 表示降水体个数</li>
<li>$r(R)$   表示各降水体重心与降水主体中心之间距离<strong>加权平均</strong>（权重是雨量）的权重</li>
<li>降水体雨量越大 → 离降水主体重心越远 → r值越大 → 最大值为(1/2)d</li>
</ol>
</li>
<li><p>$R_n = \displaystyle \sum_{(i,j)\in R_n}{R_{i,j}}$  →   区域内第n个降水体的降水量</p>
<p>😃降水体是一个小连续区域，就是它的总降水量</p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> ndimage</span><br><span class="line"><span class="comment">#numpy.linalg模块包含线性代数的函数。使用这个模块，可以计算逆矩阵、求特征值、解线性方程组以及求解行列式等。</span></span><br><span class="line"><span class="comment">#norm则表示范数</span></span><br><span class="line"><span class="keyword">from</span> numpy.linalg <span class="keyword">import</span> norm</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">np.set_printoptions(threshold=np.inf)</span><br><span class="line"></span><br><span class="line"><span class="comment">#obs：观测场；fc：预测场</span></span><br><span class="line"><span class="comment">#返回值前三个是S、A、L，还有其他信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute_SAL</span><span class="params">(field_obs, field_fc, user_threshold=None)</span>:</span></span><br><span class="line">    <span class="string">"""SAL-score (Structure, Amplitude, Location)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Parameters</span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    field_obs : numpy.ndarray</span></span><br><span class="line"><span class="string">        2D observation (or reference) field</span></span><br><span class="line"><span class="string">    field_fc : numpy.ndarray</span></span><br><span class="line"><span class="string">        2D forecast field (same shape as `field_obs`)</span></span><br><span class="line"><span class="string">    user_threshold : float, optional</span></span><br><span class="line"><span class="string">        If set, use this threshold for object separation. 如果已设置，请使用此阈值进行对象分离。</span></span><br><span class="line"><span class="string">        If not set, use the default method of Wernli is used: ``threshold = field_obs.max() * 1/15``</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns</span></span><br><span class="line"><span class="string">    -------</span></span><br><span class="line"><span class="string">    S : float</span></span><br><span class="line"><span class="string">        Structure score</span></span><br><span class="line"><span class="string">    A : float</span></span><br><span class="line"><span class="string">        Amplitude score</span></span><br><span class="line"><span class="string">    L : float</span></span><br><span class="line"><span class="string">        Location score</span></span><br><span class="line"><span class="string">    L1, L2 : float</span></span><br><span class="line"><span class="string">        Location score components `L1` and `L2`</span></span><br><span class="line"><span class="string">    NObjects_obs : float</span></span><br><span class="line"><span class="string">        Number of thresholded objects in observation 观察中的阈值对象数</span></span><br><span class="line"><span class="string">    NObjects_mod : float</span></span><br><span class="line"><span class="string">        Number of objects in model (forecast `fc`) 模型中的对象数（预测“fc”）</span></span><br><span class="line"><span class="string">    R_max : float</span></span><br><span class="line"><span class="string">        Maximum Rain-value of observations `field_obs` 观测值的最大降雨值`</span></span><br><span class="line"><span class="string">    user_treshold : float</span></span><br><span class="line"><span class="string">        Threshold that was actually used 实际使用的阈值</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> (field_obs.shape != field_fc.shape):</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">"field_obs and field_fc need to have the same shape"</span> +\</span><br><span class="line">        <span class="string">" (this function also assumes that they cover the same domain!)"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (user_threshold <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>) <span class="keyword">and</span> (type(user_threshold) != float):<span class="comment">#user_threshold是给定的阈值</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">"user_threshold must be a float"</span>)</span><br><span class="line"></span><br><span class="line">    R_mod = field_fc  <span class="comment"># "mod" is for "model"          预测场的数据</span></span><br><span class="line">    R_obs = field_obs <span class="comment"># "obs" is for "observation"    观测场的数据</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#不能出现有数据小于0的，出现即报错</span></span><br><span class="line">    <span class="keyword">if</span> np.any(R_mod &lt; <span class="number">0.</span>):</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">"negative values in forecast."</span> +\</span><br><span class="line">        <span class="string">"use different field or apply SAL.threshold_to_zero(field)"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> np.any(R_obs &lt; <span class="number">0.</span>):</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">"negative values in forecast."</span> +\</span><br><span class="line">        <span class="string">"use different field or apply SAL.threshold_to_zero(field)"</span>)</span><br><span class="line"></span><br><span class="line">    f_threshold = <span class="number">1</span>/<span class="number">15.</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">#nanpercentile：不算nan值找到第95个百分数</span></span><br><span class="line">    <span class="comment">#https://www.cjavapy.com/article/1088/</span></span><br><span class="line">    R_max_obs = np.nanpercentile(np.where(R_obs&gt;<span class="number">0.1</span>, R_obs, np.nan), <span class="number">95</span>)<span class="comment">#最大*0.95</span></span><br><span class="line">    threshold_obs = R_max_obs * f_threshold<span class="comment">#1/15</span></span><br><span class="line">    </span><br><span class="line">    R_max_mod = np.nanpercentile(np.where(R_mod&gt;<span class="number">0.1</span>, R_mod,np.nan), <span class="number">95</span>)</span><br><span class="line">    threshold_mod = R_max_mod * f_threshold</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (user_threshold <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>):</span><br><span class="line">        threshold_obs = user_threshold</span><br><span class="line">        threshold_mod = user_threshold</span><br><span class="line"></span><br><span class="line">    R_mod_thr = np.where(R_mod &gt; threshold_mod, R_mod, <span class="number">0.</span>) <span class="comment"># 所有的降水体</span></span><br><span class="line">    R_obs_thr = np.where(R_obs &gt; threshold_obs, R_obs, <span class="number">0.</span>) <span class="comment"># maskiert</span></span><br><span class="line"></span><br><span class="line">    D_R_mod = np.mean(R_mod)<span class="comment">#平均值</span></span><br><span class="line">    D_R_obs = np.mean(R_obs)</span><br><span class="line"></span><br><span class="line">    A = (D_R_mod - D_R_obs) / (<span class="number">0.5</span> * (D_R_mod + D_R_obs))<span class="comment">#与阈值无关</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># x_R_mod: center of mass of mod</span></span><br><span class="line">    x_R_mod = np.array(ndimage.measurements.center_of_mass(R_mod))<span class="comment">#nb，直接调用函数找出质点</span></span><br><span class="line">    <span class="comment"># x_R_obs: center of mass of obs</span></span><br><span class="line">    x_R_obs = np.array(ndimage.measurements.center_of_mass(R_obs))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#norm默认是2范式，每个元素先平方，再根号，也就是对角线距离</span></span><br><span class="line">    d_diagonal = norm(<span class="comment">#field_obs.shape)</span></span><br><span class="line">   </span><br><span class="line">    L1 = norm(x_R_mod - x_R_obs) / d_diagonal<span class="comment">#与阈值无关</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">##label标记连接成分</span></span><br><span class="line">    <span class="comment">#https://blog.csdn.net/Monkey_dada/article/details/119353323?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link</span></span><br><span class="line">    labels_mod, NObjects_mod = ndimage.measurements.label(R_mod_thr)<span class="comment">#label标记连接成分,在找降水体</span></span><br><span class="line">    labels_obs, NObjects_obs = ndimage.measurements.label(R_obs_thr)</span><br><span class="line"></span><br><span class="line">    labels_list = [labels_mod, labels_obs]</span><br><span class="line">    NObjects_list = [NObjects_mod, NObjects_obs]</span><br><span class="line"></span><br><span class="line">    R_list = [R_mod, R_obs]</span><br><span class="line">    x_R_list = [x_R_mod, x_R_obs]</span><br><span class="line"></span><br><span class="line">    r_list = [<span class="number">0</span>,<span class="number">0</span>] <span class="comment"># fuer L2</span></span><br><span class="line">    V_list = [<span class="number">0</span>,<span class="number">0</span>] <span class="comment"># fuer S</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> iList, NObjects <span class="keyword">in</span> enumerate(NObjects_list):</span><br><span class="line">        R_n_list = np.zeros(NObjects)</span><br><span class="line">        V_n_list = np.zeros(NObjects)</span><br><span class="line">        distance_n_list = np.zeros(NObjects)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> range(NObjects):</span><br><span class="line"></span><br><span class="line">            label = n + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            object_n = np.where(labels_list[iList] == label, R_list[iList], <span class="number">0</span>)</span><br><span class="line">            R_n_list[n] = object_n.sum()</span><br><span class="line">            V_n_list[n] = R_n_list[n] / object_n.max()</span><br><span class="line">            x_n = np.array(ndimage.measurements.center_of_mass(object_n))</span><br><span class="line">            distance_n_list[n] = norm(x_R_list[iList] - x_n)</span><br><span class="line"></span><br><span class="line">        R_n_list = np.array(R_n_list)</span><br><span class="line">        distance_n_list = np.array(distance_n_list)</span><br><span class="line">        r_list[iList] = (R_n_list*distance_n_list).sum() / R_n_list.sum()</span><br><span class="line">        V_list[iList] = (R_n_list*V_n_list).sum() / R_n_list.sum()</span><br><span class="line"></span><br><span class="line">    L2 = <span class="number">2.</span>*norm(r_list[<span class="number">0</span>] - r_list[<span class="number">1</span>]) / d_diagonal</span><br><span class="line">    L = L1 + L2</span><br><span class="line">    S = (V_list[<span class="number">0</span>] - V_list[<span class="number">1</span>]) / (<span class="number">0.5</span> * (V_list[<span class="number">0</span>] + V_list[<span class="number">1</span>])) <span class="comment"># 0: mod, 1:obs</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> S, A, L, L1, L2, NObjects_obs, NObjects_mod, R_max_obs, R_max_mod, threshold_obs, threshold_mod</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印结果	</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">PrintResultSAL</span><span class="params">(field_obs, field_fc, user_threshold=None)</span>:</span></span><br><span class="line">    S, A, L, L1, L2, NObjects_obs, NObjects_mod, R_max_obs, R_max_mod, threshold_obs, threshold_mod = compute_SAL(field_obs,field_fc)</span><br><span class="line">    print(<span class="string">"S = "</span>, S)</span><br><span class="line">    print(<span class="string">"A = "</span>, A)</span><br><span class="line">    print(<span class="string">"L = "</span>, L)</span><br><span class="line"><span class="comment">#     print("L1 = ", L1)</span></span><br><span class="line"><span class="comment">#     print("L2 = ", L2)</span></span><br><span class="line"><span class="comment">#     print("NObjects_obs = ", NObjects_obs)</span></span><br><span class="line"><span class="comment">#     print("NObjects_mod = ", NObjects_mod)</span></span><br><span class="line"><span class="comment">#     print("R_max_obs = ", R_max_obs)</span></span><br><span class="line"><span class="comment">#     print("R_max_mod = ", R_max_mod)</span></span><br><span class="line"><span class="comment">#     print("threshold_obs = ", threshold_obs)</span></span><br><span class="line"><span class="comment">#     print("threshold_mod = ", threshold_mod)</span></span><br><span class="line"><span class="comment">#     print()</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">matrix_SAL</span><span class="params">(filename1, filename2)</span>:</span></span><br><span class="line">    <span class="comment">#预测</span></span><br><span class="line">    EC_fst = np.load(filename1)</span><br><span class="line">    file_fst = EC_fst[<span class="string">'f'</span>]</span><br><span class="line">    result_fst = file_fst[<span class="number">0</span>].reshape(<span class="number">210</span>,<span class="number">211</span>)</span><br><span class="line">    <span class="comment">#真值</span></span><br><span class="line"></span><br><span class="line">    EC_obs = np.load(filename2)</span><br><span class="line">    file_obs = EC_obs[<span class="string">'l'</span>]</span><br><span class="line">    result_obs = file_obs[<span class="number">0</span>].reshape(<span class="number">210</span>,<span class="number">211</span>)</span><br><span class="line">    PrintResultSAL(result_fst,result_obs)</span><br><span class="line"></span><br><span class="line"><span class="comment">#之前强降水数据集使用例子</span></span><br><span class="line"><span class="comment">#matrix_SAL('testset_ECrainPredi_03h_202008.npz','../CMPA/08/testset_CMPA_03h_202008.npz')</span></span><br></pre></td></tr></table></figure>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><ol>
<li><a href="http://r7wiw08xi.hn-bkt.clouddn.com/Wernli2008.pdf" target="_blank" rel="noopener">wernli2008原文</a></li>
<li><a href="http://r7wiw08xi.hn-bkt.clouddn.com/%E4%B8%80%E7%AF%87%E5%85%B6%E4%BB%96%E4%BA%BA%E7%9A%84%E6%80%BB%E7%BB%93%E2%80%94%E2%80%94SAL%20Method%20for%20precipitation%20Verification.pdf" target="_blank" rel="noopener">一篇较好的总结资料</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/10/30/19-40/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/30/19-40/" class="post-title-link" itemprop="url">用随机梯度下降来优化人</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-30 19:40:23" itemprop="dateCreated datePublished" datetime="2021-10-30T19:40:23+08:00">2021-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-26 21:01:43" itemprop="dateModified" datetime="2022-02-26T21:01:43+08:00">2022-02-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%88%86%E4%BA%AB/" itemprop="url" rel="index"><span itemprop="name">分享</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>由于文章不让转载和分享，但是真的非常喜欢，就贴上文章链接和截图。</p>
</blockquote>
<p>链接：<a href="https://www.bilibili.com/read/cv13335461?spm_id_from=333.999.0.0" target="_blank" rel="noopener">https://www.bilibili.com/read/cv13335461?spm_id_from=333.999.0.0</a></p>
<p><img src="/2021/10/30/19-40-Shuwen/用随机梯度下降来优化人生.png" alt="用随机梯度下降来优化人生"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/10/14/22-17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/14/22-17/" class="post-title-link" itemprop="url">2021推免总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-14 22:17:26 / 修改时间：22:52:25" itemprop="dateCreated datePublished" datetime="2021-10-14T22:17:26+08:00">2021-10-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2021年推免结束了，最终去了国防科技大学 气象海洋学院，忙里偷闲，记录一下自己的一些感受。</p>
<p><img src="/2021/10/14/22-17-Shuwen/image-20211014221958513.png" alt="image-20211014221958513"></p>
<h3 id="个人情况"><a href="#个人情况" class="headerlink" title="个人情况"></a>个人情况</h3><p>本科双非，坐标长春理工大学</p>
<p>成绩：2/254，前1%</p>
<p>英语：四六级通过（六级飘过）</p>
<p>比赛：网安选手，一两个国赛、n个省赛、n个校赛</p>
<p>项目：一个导师的在研项目</p>
<h3 id="夏令营"><a href="#夏令营" class="headerlink" title="夏令营"></a>夏令营</h3><blockquote>
<p>特别后悔开始投了很多学硕，双非孩子不要想了，全投专硕！！</p>
<p>一定要从夏令营开始重视，不要想着开始先玩一玩，你永远不知道每年的保研形势是什么样子！！</p>
<p>双非本来就非常不占优势了，一定要做好每一步，你才有机会！！</p>
</blockquote>
<p>投递了很多学校，但是效果甚微，一方面文书没有准备好，一方面投递学硕策略不正确。</p>
<hr>
<p>入营：山东大学、西北工业大学、吉林大学、东南网安（无锡）、浙大软院（报名就给）、国防科大 气象海洋</p>
<p>offer：吉林大学、国防科大 气象海洋</p>
<hr>
<p>emmm、山大和西工大因为地理不喜欢，也没有好好准备，没有拿到offer</p>
<p>吉林大学可能因为地理原因，基本都给了offer</p>
<p>东南今年初审直接分配了无锡，直接无了</p>
<p>浙大软院因为在宁波，和三本学校共用校区也无了</p>
<p>国防科大其实偶然机会报名了，但是比较幸运进去了，也是最终去向。</p>
<blockquote>
<p>这里还打了信安国赛，参加了哈工大的暑期学校，挺好的，哈哈哈</p>
</blockquote>
<h3 id="预推免"><a href="#预推免" class="headerlink" title="预推免"></a>预推免</h3><p>预推免并没有比夏令营简单，哭哭，</p>
<p>这时候简历什么的文书已经相对完善了，但是机会不多了</p>
<hr>
<p>入营：西工大（我又来啦）、电科-深圳、华南理工大学</p>
<p>offer：西工大、电科深、华工</p>
<hr>
<p>差不多入营了都拿到offer了，感觉夏令营和预推免难度差不多，，，电科和华工投的都是专硕</p>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="/2021/10/14/22-17-Shuwen/image-20211014224904410.png" alt="image-20211014224904410"></p>
<ol>
<li>电科</li>
</ol>
<p>其实电科深的研究发现我很喜欢，导师是二进制的，太难得了，但是导师没回过我，而且电科深据说都放羊，就放弃了</p>
<p>电科发消息很快，感受很好，我和朋友都很快收到了录取通知</p>
<ol>
<li>华工</li>
</ol>
<p>简历都是网安，问的我全是计算机，网安哭哭，但是还是过了，</p>
<p>感觉被养🐟，和同学差了一分多，他很早收到通知了，我一直没收到，，，</p>
<ol>
<li>西工大</li>
</ol>
<p>方向不感兴趣，地理也不好，当然不会去了</p>
<ol>
<li>国防科大</li>
</ol>
<p>其实电科和华工没出来之前，难受了很久，难道自己就只能去西工大或者吉大了么（因为非常想回南方）。</p>
<p>然后电科深和华工出来后很开心，不过因为和国防科大老师说好了后，就决定去那里了。</p>
<blockquote>
<p>国防科大，我是没有想到的，军校，曾经自己也有一段军旅梦呀，未来好好加油！</p>
</blockquote>
<p>我的推免，满意也算满意，不满意也有些不满意，但总的来说，还是不错的。</p>
<p>如果从来一次，自己肯定能做的更好，冲个华5 网安呀，梦校</p>
<p>但是国防科大一方面学校title挺好的，导师也很好，push型是我爱的，学校补贴，小组氛围也很好，唯一遗憾的是专业变成大气科学了，有机会读个博士变回来哈哈哈哈~</p>
<h3 id="勉励"><a href="#勉励" class="headerlink" title="勉励"></a>勉励</h3><p>唉，双非学校不太看重科研论文，竞赛权重更重要。</p>
<p>如果认准了保研，首先绩点必须稳、最好rank1；其次，英语四六级550+，保研的时候，你会发现大家都500+的，，，；然后，最好参加ACM竞赛，拿几个国家级、省级的竞赛；最后，大二左右跟随学校某实验室老师准备科研/有钱可以考虑花钱跟机构做（产出保证）。高质量论文多多益善（1-2篇）、其他的项目（最好是国家级大创），再来几个就行了。</p>
<p>感觉，能做到这几点，出来无敌了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/10/08/18-44/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/08/18-44/" class="post-title-link" itemprop="url">rsa算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-08 18:44:43 / 修改时间：18:53:07" itemprop="dateCreated datePublished" datetime="2021-10-08T18:44:43+08:00">2021-10-08</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>久闻大名，ctf的密码学题目，easyRSA</p>
<p>因为实验里面需要加密解密，就看了下这个使用最为广泛的非对称加密算法。</p>
</blockquote>
<ul>
<li><a href="https://www.bilibili.com/video/BV14y4y1272w?from=search&amp;seid=10798640508792660489&amp;spm_id_from=333.337.0.0" target="_blank" rel="noopener">视频1</a></li>
<li><a href="https://www.bilibili.com/video/BV1kE411h7ui?from=search&amp;seid=10798640508792660489&amp;spm_id_from=333.337.0.0" target="_blank" rel="noopener">视频2</a></li>
<li><a href="https://www.bilibili.com/video/BV1sZ4y1H7WC?from=search&amp;seid=10798640508792660489&amp;spm_id_from=333.337.0.0" target="_blank" rel="noopener">视频3</a></li>
</ul>
<p>加密的宏观上：为了能让Bob安全的给Alice发送消息。</p>
<p>首先Alice生成公钥和私钥（对应锁和钥匙），然后Alice将锁给Bob，那么Bob用锁给信息加密后，将加密后的东西还给Alice，Alice用钥匙解密即可拿到Bob的信息。但是其他人虽然能看到锁，但是无法解密，因为没有钥匙。</p>
<p><img src="/2021/10/08/18-44-Shuwen/image-20210910190119327.png" alt="image-20210910190119327"></p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>模运算是单向运算</p>
<p>有e容易求c，但是有c难求e</p>
<p><img src="/2021/10/08/18-44-Shuwen/image-20210910190422813.png" alt="image-20210910190422813"></p>
<p>加密解密过程：e和N是给大家都能看到，但是d是Alice持有的钥匙，只有Alice能计算的</p>
<p><img src="/2021/10/08/18-44-Shuwen/image-20210910190457576.png" alt="image-20210910190457576"></p>
<p>mod的模数e和余数c是互质的，所以上面吧m^e带入下面的c得到下面公式</p>
<p><img src="/2021/10/08/18-44-Shuwen/image-20210910191513110.png" alt="image-20210910191513110"></p>
<h3 id="欧拉函数"><a href="#欧拉函数" class="headerlink" title="欧拉函数"></a>欧拉函数</h3><p>定理</p>
<p><img src="/2021/10/08/18-44-Shuwen/image-20210910190649163.png" alt="image-20210910190649163"></p>
<p>所以建立式子</p>
<p><img src="/2021/10/08/18-44-Shuwen/image-20210910190538216.png" alt="image-20210910190538216"></p>
<p><img src="/2021/10/08/18-44-Shuwen/image-20210910191715034.png" alt="image-20210910191715034"></p>
<p><img src="/2021/10/08/18-44-Shuwen/image-20210910191737898.png" alt="image-20210910191737898"></p>
<p>所以，取两个质数，p*q=n</p>
<p>其他人来说：已知n，但φ(n)难以求解</p>
<p>拥有私钥p、q的人来说：p和q因为是质数很好求容易求得</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">φ(n)&#x3D;φ(p)*φ(q)&#x3D;(p-1)*(q-1)</span><br></pre></td></tr></table></figure>
<p>就可以求得d，成功解出答案</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/08/26/00-03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/26/00-03/" class="post-title-link" itemprop="url">leetcode之算法学习计划</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-26 00:03:18" itemprop="dateCreated datePublished" datetime="2021-08-26T00:03:18+08:00">2021-08-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-22 11:58:49" itemprop="dateModified" datetime="2021-10-22T11:58:49+08:00">2021-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>链接：<a href="https://leetcode-cn.com/study-plan/algorithms/?progress=x7xottv" target="_blank" rel="noopener">https://leetcode-cn.com/study-plan/algorithms/?progress=x7xottv</a></p>
<h1 id="算法入门"><a href="#算法入门" class="headerlink" title="算法入门"></a>算法入门</h1><blockquote>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210825235602576.png" alt="image-20210825235602576"></p>
<p>2021/08/25，已完成，（´v｀），为什么感觉我更喜欢算法（而不是ctf，😔，算法好好练练，以后再重新学学网安吧。</p>
</blockquote>
<h1 id="第-1-天-二分查找"><a href="#第-1-天-二分查找" class="headerlink" title="第 1 天 二分查找"></a>第 1 天 二分查找</h1><h3 id="704-二分查找"><a href="#704-二分查找" class="headerlink" title="704. 二分查找"></a><a href="https://leetcode-cn.com/problems/binary-search/" target="_blank" rel="noopener">704. 二分查找</a></h3><p>easy</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pivot,left=<span class="number">0</span>,right=nums.<span class="built_in">size</span>();<span class="comment">//设置3个变量：当前指针、左边界、右边界</span></span><br><span class="line">        <span class="keyword">while</span>(left &lt;= right)&#123;<span class="comment">//结束</span></span><br><span class="line">            pivot = left + (right-left) / <span class="number">2</span>;<span class="comment">//指针在中间的位置</span></span><br><span class="line">            <span class="keyword">if</span>(nums[pivot] == target) <span class="keyword">return</span> pivot;<span class="comment">//相等返回</span></span><br><span class="line">            <span class="keyword">if</span>(target &lt; nums[pivot]) right = pivot<span class="number">-1</span>;<span class="comment">//小于情况</span></span><br><span class="line">            <span class="keyword">else</span> left = pivot + <span class="number">1</span>;<span class="comment">//大于情况</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;<span class="comment">//直接返回</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="278-第一个错误的版本"><a href="#278-第一个错误的版本" class="headerlink" title="278. 第一个错误的版本"></a><a href="https://leetcode-cn.com/problems/first-bad-version/" target="_blank" rel="noopener">278. 第一个错误的版本</a></h3><p>mine</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">firstBadVersion</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pivot,left=<span class="number">1</span>,right=n;</span><br><span class="line">        <span class="keyword">while</span>(left &lt;= right)&#123;</span><br><span class="line">            pivot = left + (right-left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(isBadVersion(pivot)==<span class="literal">true</span> &amp;&amp; isBadVersion(pivot<span class="number">-1</span>)==<span class="literal">false</span>) <span class="keyword">return</span> pivot;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(isBadVersion(pivot)==<span class="literal">true</span>) right = pivot<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(isBadVersion(pivot)==<span class="literal">false</span>) left = pivot + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The API isBadVersion is defined for you.</span></span><br><span class="line"><span class="comment">// bool isBadVersion(int version);</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">firstBadVersion</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">1</span>,right=n;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(isBadVersion(mid))&#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                left = mid+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="35-搜索插入位置"><a href="#35-搜索插入位置" class="headerlink" title="35. 搜索插入位置"></a><a href="https://leetcode-cn.com/problems/search-insert-position/" target="_blank" rel="noopener">35. 搜索插入位置</a></h3><p>mine</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">searchInsert</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pivot,left=<span class="number">0</span>,right=nums.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">            pivot = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(target == nums[pivot]) <span class="keyword">return</span> pivot;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(target &gt; nums[pivot]) left = pivot+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(target &lt;nums[pivot]) right = pivot<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(target &gt; nums[left])&#123;</span><br><span class="line">            <span class="keyword">return</span> left+<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> left;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer</p>
<ol>
<li>转换目标：「在一个有序数组中找第一个大于等于 target 的下标」。</li>
<li>ans初值设置为数组长度：存在一种情况是 target 大于数组中的所有数</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">searchInsert</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>,right = n<span class="number">-1</span>,ans = n;</span><br><span class="line">        <span class="keyword">while</span>(left &lt;= right)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = ((right-left) &gt;&gt; <span class="number">1</span>) + left;</span><br><span class="line">            <span class="keyword">if</span>(target &lt;= nums[mid])&#123;</span><br><span class="line">                ans = mid;</span><br><span class="line">                right = mid<span class="number">-1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                left = mid+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-2-天-双指针"><a href="#第-2-天-双指针" class="headerlink" title="第 2 天 双指针"></a>第 2 天 双指针</h1><h3 id="977-有序数组的平方"><a href="#977-有序数组的平方" class="headerlink" title="977. 有序数组的平方"></a><a href="https://leetcode-cn.com/problems/squares-of-a-sorted-array/" target="_blank" rel="noopener">977. 有序数组的平方</a></h3><p>mine</p>
<blockquote>
<p>直接排序</p>
<p>时间复杂度：O(nlog⁡n)</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">sortedSquares</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            nums[i] = nums[i] * nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        sort(nums.<span class="built_in">begin</span>(),nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>双指针</strong></p>
<blockquote>
<p>由于原数组已经有序，故可以使用两个指针从0开始一个向左，一个向右，分别比较大小</p>
<p>时间复杂度：O(n)</p>
</blockquote>
<ol>
<li><p>从0向左右</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">sortedSquares</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> negative = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                negative = i;<span class="comment">//negative是最右的负数</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">        <span class="keyword">int</span> i = negative,j=negative+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&gt;=<span class="number">0</span> || j&lt;n)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span>)&#123;<span class="comment">//左边的走完了，一直走右指针即可</span></span><br><span class="line">                ans.push_back(nums[j] * nums[j]);</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j == n)&#123;</span><br><span class="line">                ans.push_back(nums[i] * nums[i]);</span><br><span class="line">                --i;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i] * nums[i] &lt; nums[j] * nums[j])&#123;</span><br><span class="line">                ans.push_back(nums[i] * nums[i]);</span><br><span class="line">                --i;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                ans.push_back(nums[j] * nums[j]);</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>从左右向0走</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">sortedSquares</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">ans</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,j=n<span class="number">-1</span>,pos=n<span class="number">-1</span>;i&lt;=j;)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] * nums[i] &gt; nums[j] * nums[j])&#123;</span><br><span class="line">                ans[pos] = nums[i] * nums[i];</span><br><span class="line">                ++i;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                ans[pos] = nums[j] * nums[j];</span><br><span class="line">                --j;</span><br><span class="line">            &#125;</span><br><span class="line">            --pos;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="189-旋转数组"><a href="#189-旋转数组" class="headerlink" title="189. 旋转数组"></a><a href="https://leetcode-cn.com/problems/rotate-array/" target="_blank" rel="noopener">189. 旋转数组</a></h3><p>answer1</p>
<blockquote>
<p>由于直接放，会覆盖，所以增加一个额外数组</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">newArr</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            newArr[(i+k)%n] = nums[i];<span class="comment">//i表示第几个，+k表示右移，由于可能溢出，故取%</span></span><br><span class="line">        &#125;</span><br><span class="line">        nums.assign(newArr.<span class="built_in">begin</span>(),newArr.<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer2</p>
<blockquote>
<p>数组翻转</p>
<p>原始数组<br>翻转所有元素<br>翻转[0,k mod n−1] 区间的元素<br>翻转[k mod n,n−1] 区间的元素</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums,<span class="keyword">int</span> start,<span class="keyword">int</span> <span class="built_in">end</span>)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(start &lt; <span class="built_in">end</span>)&#123;</span><br><span class="line">            swap(nums[start],nums[<span class="built_in">end</span>]);</span><br><span class="line">            start++;</span><br><span class="line">            <span class="built_in">end</span>--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        k%=nums.<span class="built_in">size</span>();</span><br><span class="line">        reverse(nums,<span class="number">0</span>,nums.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">        reverse(nums,<span class="number">0</span>,k<span class="number">-1</span>);</span><br><span class="line">        reverse(nums,k,nums.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer3</p>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210730160407116.png" alt="image-20210730160407116"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        k = k%n;</span><br><span class="line">        <span class="keyword">int</span> count = gcd(k,n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> start =<span class="number">0</span>;start&lt;count;++start)&#123;<span class="comment">//往后走</span></span><br><span class="line">            <span class="keyword">int</span> current = start;</span><br><span class="line">            <span class="keyword">int</span> prev = nums[start];</span><br><span class="line">            <span class="keyword">do</span>&#123;<span class="comment">//里面是一轮</span></span><br><span class="line">                <span class="keyword">int</span> next = (current+k) %n;</span><br><span class="line">                swap(nums[next],prev);</span><br><span class="line">                current = next;</span><br><span class="line">            &#125;<span class="keyword">while</span>(start!=current);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-3-天-双指针"><a href="#第-3-天-双指针" class="headerlink" title="第 3 天 双指针"></a>第 3 天 双指针</h1><h3 id="283-移动零"><a href="#283-移动零" class="headerlink" title="283. 移动零"></a><a href="https://leetcode-cn.com/problems/move-zeroes/" target="_blank" rel="noopener">283. 移动零</a></h3><blockquote>
<p>right指向右边的非0，left指向左边的0。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">moveZeroes</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>(),left=<span class="number">0</span>,right=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(right &lt; n)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[right])&#123;</span><br><span class="line">                swap(nums[left],nums[right]);</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            right++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="167-两数之和-II-输入有序数组"><a href="#167-两数之和-II-输入有序数组" class="headerlink" title="167. 两数之和 II - 输入有序数组"></a><a href="https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/" target="_blank" rel="noopener">167. 两数之和 II - 输入有序数组</a></h3><blockquote>
<p>二分查找，其中i的下标是第一个元素，mid下标是第二个元素</p>
<p>i从0 ～ size-1</p>
<p>第二个元素从low～high，也就是1～size-1</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">twoSum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; numbers, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numbers.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> low = i+<span class="number">1</span>,high = numbers.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line">                <span class="keyword">int</span> mid = low + (high - low)/<span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span>(numbers[mid] == target - numbers[i])&#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;i+<span class="number">1</span>,mid+<span class="number">1</span>&#125;;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(numbers[mid] &gt; target - numbers[i])&#123;</span><br><span class="line">                    high = mid<span class="number">-1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    low = mid+<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>双指针</p>
<blockquote>
<p>从两边依次往里走</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">twoSum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; numbers, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> low = <span class="number">0</span>,high = numbers.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(low &lt; high)&#123;</span><br><span class="line">            <span class="keyword">int</span> sum = numbers[low] + numbers[high];</span><br><span class="line">            <span class="keyword">if</span>(sum == target)&#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;low+<span class="number">1</span>,high+<span class="number">1</span>&#125;;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(sum &lt; target)&#123;</span><br><span class="line">                ++low;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                --high;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-4-天-双指针"><a href="#第-4-天-双指针" class="headerlink" title="第 4 天 双指针"></a>第 4 天 双指针</h1><h3 id="344-反转字符串"><a href="#344-反转字符串" class="headerlink" title="344. 反转字符串"></a><a href="https://leetcode-cn.com/problems/reverse-string/" target="_blank" rel="noopener">344. 反转字符串</a></h3><p>mine</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">reverseString</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> times = n / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; times; i++)&#123;</span><br><span class="line">            swap(s[i], s[n-i<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer</p>
<blockquote>
<p>我写的和答案，本质是一样的，但是思考过程不一样。</p>
<p>我其实没有用到双指针这一思想，而是直接左边过去的思路。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">reverseString</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> left = <span class="number">0</span>,right = n<span class="number">-1</span>;left &lt; right;++left,--right)&#123;</span><br><span class="line">            swap(s[left],s[right]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="557-反转字符串中的单词-III"><a href="#557-反转字符串中的单词-III" class="headerlink" title="557. 反转字符串中的单词 III"></a><a href="https://leetcode-cn.com/problems/reverse-words-in-a-string-iii/" target="_blank" rel="noopener">557. 反转字符串中的单词 III</a></h3><h4 id="split"><a href="#split" class="headerlink" title="split"></a>split</h4><p>C++没有字符串分割函数split，自己实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">split</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; str, <span class="keyword">const</span> <span class="built_in">string</span>&amp; delim)</span> </span>&#123;  </span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; res;  </span><br><span class="line">    <span class="keyword">if</span>(<span class="string">""</span> == str) <span class="keyword">return</span> res;  </span><br><span class="line">    <span class="comment">//先将要切割的字符串从string类型转换为char*类型  </span></span><br><span class="line">    <span class="keyword">char</span> * strs = <span class="keyword">new</span> <span class="keyword">char</span>[str.length() + <span class="number">1</span>] ; <span class="comment">//不要忘了  </span></span><br><span class="line">    <span class="built_in">strcpy</span>(strs, str.c_str());   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> * d = <span class="keyword">new</span> <span class="keyword">char</span>[delim.length() + <span class="number">1</span>];  </span><br><span class="line">    <span class="built_in">strcpy</span>(d, delim.c_str());  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> *p = strtok(strs, d);  </span><br><span class="line">    <span class="keyword">while</span>(p) &#123;  </span><br><span class="line">        <span class="built_in">string</span> s = p; <span class="comment">//分割得到的字符串转换为string类型  </span></span><br><span class="line">        res.push_back(s); <span class="comment">//存入结果数组  </span></span><br><span class="line">        p = strtok(<span class="literal">NULL</span>, d);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> res;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">split(s,<span class="string">" "</span>);</span><br></pre></td></tr></table></figure>
<p>mine</p>
<blockquote>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210802213123802.png" alt="image-20210802213123802"></p>
<p>虽然效率好像不是很高，不过也算是自己实现的，，，hhh</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">reverseWords</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; v = split(s,<span class="string">" "</span>);</span><br><span class="line">        <span class="built_in">string</span> ans=<span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;v.<span class="built_in">size</span>()<span class="number">-1</span>;i++)&#123;</span><br><span class="line">            ans += reverse(v[i])+<span class="string">" "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ans += reverse(v[v.<span class="built_in">size</span>()<span class="number">-1</span>]);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">reverse</span><span class="params">(<span class="built_in">string</span> s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.<span class="built_in">size</span>()/<span class="number">2</span>;i++)&#123;</span><br><span class="line">            swap(s[i],s[s.<span class="built_in">size</span>()-i<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">split</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; str, <span class="keyword">const</span> <span class="built_in">string</span>&amp; delim)</span> </span>&#123;  </span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; res;  </span><br><span class="line">        <span class="keyword">if</span>(<span class="string">""</span> == str) <span class="keyword">return</span> res;  </span><br><span class="line">        <span class="comment">//先将要切割的字符串从string类型转换为char*类型  </span></span><br><span class="line">        <span class="keyword">char</span> * strs = <span class="keyword">new</span> <span class="keyword">char</span>[str.length() + <span class="number">1</span>] ; <span class="comment">//不要忘了  </span></span><br><span class="line">        <span class="built_in">strcpy</span>(strs, str.c_str());   </span><br><span class="line">    </span><br><span class="line">        <span class="keyword">char</span> * d = <span class="keyword">new</span> <span class="keyword">char</span>[delim.length() + <span class="number">1</span>];  </span><br><span class="line">        <span class="built_in">strcpy</span>(d, delim.c_str());  </span><br><span class="line">    </span><br><span class="line">        <span class="keyword">char</span> *p = strtok(strs, d);  </span><br><span class="line">        <span class="keyword">while</span>(p) &#123;  </span><br><span class="line">            <span class="built_in">string</span> s = p; <span class="comment">//分割得到的字符串转换为string类型  </span></span><br><span class="line">            res.push_back(s); <span class="comment">//存入结果数组  </span></span><br><span class="line">            p = strtok(<span class="literal">NULL</span>, d);  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">return</span> res;  </span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer1</p>
<blockquote>
<p>不使用split，巧妙使用while解决</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">reverseWords</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">string</span> ret;</span><br><span class="line">        <span class="keyword">int</span> length = s.length();</span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; length)&#123;</span><br><span class="line">            <span class="keyword">int</span> start = i;</span><br><span class="line">            <span class="keyword">while</span>(i &lt; length &amp;&amp; s[i] != <span class="string">' '</span>)&#123;<span class="comment">//start是一个单词的开始，i找到该单词的结尾</span></span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> p = start;p&lt;i;p++)&#123;</span><br><span class="line">                ret.push_back(s[start + i - <span class="number">1</span> -p]);<span class="comment">//从该单词结尾往前加到ret字符串上面</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(i &lt; length &amp;&amp; s[i] == <span class="string">' '</span>)&#123;</span><br><span class="line">                i++;<span class="comment">//下一个开始也要跳过空格</span></span><br><span class="line">                ret.push_back(<span class="string">' '</span>);<span class="comment">//加上空格</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer2</p>
<blockquote>
<p>相当于我的思路同answer1的结合</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">reverseWords</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> length = s.length();</span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; length)&#123;</span><br><span class="line">            <span class="keyword">int</span> start = i;</span><br><span class="line">            <span class="keyword">while</span>(i&lt;length &amp;&amp; s[i] != <span class="string">' '</span>)&#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> left = start,right = i<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">                swap(s[left],s[right]);</span><br><span class="line">                left++;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(i &lt; length &amp;&amp; s[i] == <span class="string">' '</span>)&#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-5-天-双指针"><a href="#第-5-天-双指针" class="headerlink" title="第 5 天 双指针"></a>第 5 天 双指针</h1><h3 id="876-链表的中间结点"><a href="#876-链表的中间结点" class="headerlink" title="876. 链表的中间结点"></a><a href="https://leetcode-cn.com/problems/middle-of-the-linked-list/" target="_blank" rel="noopener">876. 链表的中间结点</a></h3><blockquote>
<p>wowo，太强了，hhh，第一次100%，自己写的</p>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210802222127027.png" alt="image-20210802222127027"></p>
</blockquote>
<p>mine</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">middleNode</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        ListNode* l = head;</span><br><span class="line">        <span class="keyword">int</span> length=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(head-&gt;next!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            length++;</span><br><span class="line">            head = head-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> times = length / <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;times;i++)&#123;</span><br><span class="line">            l = l-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer1</p>
<blockquote>
<p>将链表放入数组中，取下标中值</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">middleNode</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;ListNode*&gt; A=&#123;head&#125;;</span><br><span class="line">        <span class="keyword">while</span>(A.back()-&gt;next!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">            A.push_back(A.back()-&gt;next);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> A[A.<span class="built_in">size</span>()/<span class="number">2</span>];<span class="comment">//因为反着压，所以不用+1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer2</p>
<blockquote>
<p>跟我写的一样，称为单指针法</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">middleNode</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n=<span class="number">0</span>;</span><br><span class="line">        ListNode* cur = head;</span><br><span class="line">        <span class="keyword">while</span>(cur != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            ++n;</span><br><span class="line">            cur = cur-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">        cur = head;</span><br><span class="line">        <span class="keyword">while</span>(k&lt;n/<span class="number">2</span>)&#123;</span><br><span class="line">            ++k;</span><br><span class="line">            cur = cur-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer3</p>
<blockquote>
<p>快慢指针，太强了</p>
<p>快指针走到最后，慢指针刚好在中间。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">middleNode</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        ListNode* slow = head;</span><br><span class="line">        ListNode* fast = head;</span><br><span class="line">        <span class="keyword">while</span>(fast!= <span class="literal">NULL</span> &amp;&amp; fast-&gt;next!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">            slow = slow-&gt;next;</span><br><span class="line">            fast = fast-&gt;next-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> slow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="19-删除链表的倒数第-N-个结点"><a href="#19-删除链表的倒数第-N-个结点" class="headerlink" title="19. 删除链表的倒数第 N 个结点"></a><a href="https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/" target="_blank" rel="noopener">19. 删除链表的倒数第 N 个结点</a></h3><p>answer1</p>
<blockquote>
<p>按着题目思路一步步解的</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getLength</span><span class="params">(ListNode* head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(head)&#123;</span><br><span class="line">            ++length;</span><br><span class="line">            head = head-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">ListNode* <span class="title">removeNthFromEnd</span><span class="params">(ListNode* head, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        ListNode* dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>,head);</span><br><span class="line">        <span class="keyword">int</span> length = getLength(head);<span class="comment">//head已经走到尾巴了</span></span><br><span class="line">        ListNode*cur = dummy;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;length-n+<span class="number">1</span>;i++)&#123;<span class="comment">//第一个是多加的0</span></span><br><span class="line">            cur = cur-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        cur-&gt;next = cur-&gt;next-&gt;next;</span><br><span class="line">        ListNode* ans = dummy-&gt;next;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer2</p>
<blockquote>
<p>这种给右边的长度，可以用栈解决</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">removeNthFromEnd</span><span class="params">(ListNode* head, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        ListNode* dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>,head);<span class="comment">//head副本，前面多了一个节点0</span></span><br><span class="line">        <span class="built_in">stack</span>&lt;ListNode*&gt; stk;</span><br><span class="line">        ListNode*cur = dummy;</span><br><span class="line">        <span class="keyword">while</span>(cur)&#123;</span><br><span class="line">            stk.push(cur);</span><br><span class="line">            cur = cur-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            stk.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode* prev = stk.top();<span class="comment">//取出要删除的前一节点，</span></span><br><span class="line">        prev-&gt;next = prev-&gt;next-&gt;next;<span class="comment">//删除</span></span><br><span class="line">        ListNode* ans = dummy-&gt;next;<span class="comment">//返回删除后的链表（所有操作都是对同一个链表）;</span></span><br><span class="line">        <span class="keyword">delete</span> dummy;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer3</p>
<blockquote>
<p>快慢指针，i了i了。</p>
<p>通过两个指针，一个先走，另一个再走，成功把后面的长度转换到了前面。</p>
<p>让second直接找到目标，太强了。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">removeNthFromEnd</span><span class="params">(ListNode* head, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        ListNode* dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>,head);</span><br><span class="line">        ListNode* first = head;</span><br><span class="line">        ListNode* second = dummy;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            first = first-&gt;next;<span class="comment">//first先走那几步</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(first)&#123;<span class="comment">//first走到尾，second刚好到达目标地点</span></span><br><span class="line">            first=first-&gt;next;</span><br><span class="line">            second=second-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        second-&gt;next = second-&gt;next-&gt;next;</span><br><span class="line">        ListNode* ans = dummy-&gt;next;</span><br><span class="line">        <span class="keyword">delete</span> dummy;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-6-天-滑动窗口"><a href="#第-6-天-滑动窗口" class="headerlink" title="第 6 天 滑动窗口"></a>第 6 天 滑动窗口</h1><h3 id="3-无重复字符的最长子串"><a href="#3-无重复字符的最长子串" class="headerlink" title="3. 无重复字符的最长子串"></a><a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/" target="_blank" rel="noopener">3. 无重复字符的最长子串</a></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">unordered_set</span>&lt;<span class="keyword">char</span>&gt; occ;</span><br><span class="line">        <span class="keyword">int</span> rk=<span class="number">-1</span>,ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i!=<span class="number">0</span>)&#123;</span><br><span class="line">                occ.erase(s[i<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(rk+<span class="number">1</span>&lt;n &amp;&amp; !occ.count(s[rk+<span class="number">1</span>]))&#123;</span><br><span class="line">                occ.insert(s[rk+<span class="number">1</span>]);</span><br><span class="line">                rk++;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = <span class="built_in">max</span>(ans,rk-i+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="567-字符串的排列"><a href="#567-字符串的排列" class="headerlink" title="567. 字符串的排列"></a><a href="https://leetcode-cn.com/problems/permutation-in-string/" target="_blank" rel="noopener">567. 字符串的排列</a></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">checkInclusion</span><span class="params">(<span class="built_in">string</span> s1, <span class="built_in">string</span> s2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s1.length(),m=s2.length();</span><br><span class="line">        <span class="keyword">if</span>(n &gt; m)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        vector&lt;int&gt; cnt1(26),cnt2(26);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            ++cnt1[s1[i]-<span class="string">'a'</span>];</span><br><span class="line">            ++cnt2[s2[i]-<span class="string">'a'</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(cnt1 == cnt2)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&lt;m;i++)&#123;</span><br><span class="line">            ++cnt2[s2[i]-<span class="string">'a'</span>];<span class="comment">//滑动窗口，长度为子串长度n</span></span><br><span class="line">            --cnt2[s2[i - n]-<span class="string">'a'</span>];<span class="comment">//右边+1，左边-1</span></span><br><span class="line">            <span class="keyword">if</span>(cnt1==cnt2)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-7-天-广度优先搜索-深度优先搜索"><a href="#第-7-天-广度优先搜索-深度优先搜索" class="headerlink" title="第 7 天 广度优先搜索 / 深度优先搜索"></a>第 7 天 广度优先搜索 / 深度优先搜索</h1><h3 id="733-图像渲染"><a href="#733-图像渲染" class="headerlink" title="733. 图像渲染"></a><a href="https://leetcode-cn.com/problems/flood-fill/" target="_blank" rel="noopener">733. 图像渲染</a></h3><blockquote>
<p>深度优先。</p>
<p>题目的意思类似于画图里面的油漆，hhh。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dx[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dy[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; <span class="built_in">image</span>,<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> color,<span class="keyword">int</span> newColor)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">image</span>[x][y] == color)&#123;</span><br><span class="line">            <span class="built_in">image</span>[x][y] = newColor;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> mx = x+dx[i],my=y+dy[i];</span><br><span class="line">                <span class="keyword">if</span>(mx&gt;=<span class="number">0</span>&amp;&amp;mx&lt;<span class="built_in">image</span>.<span class="built_in">size</span>() &amp;&amp; my&gt;=<span class="number">0</span>&amp;&amp;my&lt;<span class="built_in">image</span>[<span class="number">0</span>].<span class="built_in">size</span>())&#123;</span><br><span class="line">                    dfs(<span class="built_in">image</span>,mx,my,color,newColor);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">floodFill</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; <span class="built_in">image</span>, <span class="keyword">int</span> sr, <span class="keyword">int</span> sc, <span class="keyword">int</span> newColor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> currColor = <span class="built_in">image</span>[sr][sc];</span><br><span class="line">        <span class="keyword">if</span>(currColor != newColor)&#123;</span><br><span class="line">            dfs(<span class="built_in">image</span>,sr,sc,currColor,newColor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">image</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>广度优先，加入队列实现</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dx[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dy[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">floodFill</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; <span class="built_in">image</span>, <span class="keyword">int</span> sr, <span class="keyword">int</span> sc, <span class="keyword">int</span> newColor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> currColor = <span class="built_in">image</span>[sr][sc];</span><br><span class="line">        <span class="keyword">if</span>(currColor == newColor) <span class="keyword">return</span> <span class="built_in">image</span>;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="built_in">image</span>.<span class="built_in">size</span>(),m=<span class="built_in">image</span>[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">queue</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt; que;</span><br><span class="line">        que.emplace(sr,sc);</span><br><span class="line">        <span class="built_in">image</span>[sr][sc]=newColor;</span><br><span class="line">        <span class="keyword">while</span>(!que.empty())&#123;</span><br><span class="line">            <span class="keyword">int</span> x = que.front().first,y=que.front().second;</span><br><span class="line">            que.pop();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> mx = x+dx[i],my=y+dy[i];</span><br><span class="line">                <span class="keyword">if</span>(mx&gt;=<span class="number">0</span>&amp;&amp;mx&lt;n &amp;&amp; my&gt;=<span class="number">0</span>&amp;&amp;my&lt;m&amp;&amp;<span class="built_in">image</span>[mx][my]==currColor)&#123;</span><br><span class="line">                    que.emplace(mx,my);</span><br><span class="line">                    <span class="built_in">image</span>[mx][my]=newColor;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">image</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="695-岛屿的最大面积"><a href="#695-岛屿的最大面积" class="headerlink" title="695. 岛屿的最大面积"></a><a href="https://leetcode-cn.com/problems/max-area-of-island/" target="_blank" rel="noopener">695. 岛屿的最大面积</a></h3><blockquote>
<p>深度优先，多了一个刚开始要循环所有（起点遍历）</p>
<p>是图的遍历</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dx[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dy[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid,<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x&lt;<span class="number">0</span> || y&lt;<span class="number">0</span> || x == grid.<span class="built_in">size</span>() || y==grid[<span class="number">0</span>].<span class="built_in">size</span>()||grid[x][y]!=<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        grid[x][y]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> mx = x+dx[i],my = y+dy[i];</span><br><span class="line">            ans += dfs(grid,mx,my);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans =<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;grid.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;grid[<span class="number">0</span>].<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                ans = <span class="built_in">max</span>(ans,dfs(grid,i,j));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用栈，非递归</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans =<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;grid.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;grid[<span class="number">0</span>].<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; stacki;</span><br><span class="line">                <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; stackj;</span><br><span class="line">                stacki.push(i);</span><br><span class="line">                stackj.push(j);</span><br><span class="line">                <span class="keyword">while</span>(!stacki.empty())&#123;</span><br><span class="line">                    <span class="keyword">int</span> x = stacki.top(),y=stackj.top();</span><br><span class="line">                    stacki.pop();</span><br><span class="line">                    stackj.pop();</span><br><span class="line">                    <span class="keyword">if</span>(x&lt;<span class="number">0</span>||y&lt;<span class="number">0</span>||x==grid.<span class="built_in">size</span>()||y==grid[<span class="number">0</span>].<span class="built_in">size</span>()||grid[x][y]!=<span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ++cur;</span><br><span class="line">                    grid[x][y]=<span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">int</span> dx[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">                    <span class="keyword">int</span> dy[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                        <span class="keyword">int</span> mx = x+dx[i],my=y+dy[i];</span><br><span class="line">                        stacki.push(mx);</span><br><span class="line">                        stackj.push(my);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ans=<span class="built_in">max</span>(ans,cur);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>广度优先</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dx[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dy[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.<span class="built_in">size</span>() ; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].<span class="built_in">size</span>(); j++)&#123;</span><br><span class="line">                <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">queue</span>&lt;pair&lt;<span class="keyword">int</span> ,<span class="keyword">int</span>&gt;&gt; que;</span><br><span class="line">                    que.emplace(i,j);</span><br><span class="line">                    <span class="keyword">while</span>(!que.empty())&#123;</span><br><span class="line">                        <span class="keyword">int</span> x = que.front().first,y = que.front().second;</span><br><span class="line">                        que.pop();</span><br><span class="line">                        <span class="keyword">if</span>(x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x == grid.<span class="built_in">size</span>() || y==grid[<span class="number">0</span>].<span class="built_in">size</span>() || grid[x][y] != <span class="number">1</span>)&#123;</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        ++cur;</span><br><span class="line">                        grid[x][y] = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++)&#123;</span><br><span class="line">                            <span class="keyword">int</span> mx = x + dx[k], my = y+dy[k];</span><br><span class="line">                                que.emplace(mx,my);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans,cur);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote>
<p>广度优先和深度优先，类似于模板题，多做些题，应该可以掌握。</p>
</blockquote>
<h1 id="第-8-天-广度优先搜索-深度优先搜索"><a href="#第-8-天-广度优先搜索-深度优先搜索" class="headerlink" title="第 8 天 广度优先搜索 / 深度优先搜索"></a>第 8 天 广度优先搜索 / 深度优先搜索</h1><h3 id="617-合并二叉树"><a href="#617-合并二叉树" class="headerlink" title="617. 合并二叉树"></a><a href="https://leetcode-cn.com/problems/merge-two-binary-trees/" target="_blank" rel="noopener">617. 合并二叉树</a></h3><blockquote>
<p>深度优先</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">mergeTrees</span><span class="params">(TreeNode* t1, TreeNode* t2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(t1==<span class="literal">nullptr</span>) <span class="keyword">return</span> t2;</span><br><span class="line">        <span class="keyword">if</span>(t2==<span class="literal">nullptr</span>) <span class="keyword">return</span> t1;</span><br><span class="line"></span><br><span class="line">        TreeNode* merged = <span class="keyword">new</span> TreeNode(t1-&gt;val + t2-&gt;val);</span><br><span class="line">        merged-&gt;left = mergeTrees(t1-&gt;left,t2-&gt;left);</span><br><span class="line">        merged-&gt;right = mergeTrees(t1-&gt;right,t2-&gt;right);</span><br><span class="line">        <span class="keyword">return</span> merged;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>广度优先</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">mergeTrees</span><span class="params">(TreeNode* t1, TreeNode* t2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(t1 == <span class="literal">nullptr</span>) <span class="keyword">return</span> t2;</span><br><span class="line">        <span class="keyword">if</span>(t2 == <span class="literal">nullptr</span>) <span class="keyword">return</span> t1;</span><br><span class="line">        TreeNode* merged = <span class="keyword">new</span> TreeNode(t1-&gt;val + t2-&gt;val);</span><br><span class="line">        <span class="built_in">queue</span>&lt;TreeNode*&gt; q,q1,q2;</span><br><span class="line">        q.push(merged);</span><br><span class="line">        q1.push(t1);</span><br><span class="line">        q2.push(t2);</span><br><span class="line">        <span class="keyword">while</span>(!q1.empty() &amp;&amp; !q2.empty())&#123;</span><br><span class="line">            TreeNode* node = q.front();<span class="comment">//三句话合在一起要用auto，不然报错</span></span><br><span class="line">            TreeNode* node1 = q1.front();</span><br><span class="line">            TreeNode* node2=q2.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            q1.pop();</span><br><span class="line">            q2.pop();</span><br><span class="line">            TreeNode* left1 = node1-&gt;left;</span><br><span class="line">            TreeNode* left2 = node2-&gt;left;</span><br><span class="line">            TreeNode* right1 = node1-&gt;right;</span><br><span class="line">            TreeNode* right2 = node2-&gt;right;</span><br><span class="line">            <span class="keyword">if</span>(left1 != <span class="literal">nullptr</span> || left2!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(left1!=<span class="literal">nullptr</span> &amp;&amp; left2!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                    <span class="keyword">auto</span> left = <span class="keyword">new</span> TreeNode(left1-&gt;val + left2-&gt;val);</span><br><span class="line">                    node-&gt;left = left;</span><br><span class="line">                    q.push(left);</span><br><span class="line">                    q1.push(left1);</span><br><span class="line">                    q2.push(left2);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(left1 !=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                    node-&gt;left = left1;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    node-&gt;left = left2;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(right1 != <span class="literal">nullptr</span> || right2!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(right1!=<span class="literal">nullptr</span> &amp;&amp; right2!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                    <span class="keyword">auto</span> right = <span class="keyword">new</span> TreeNode(right1-&gt;val + right2-&gt;val);</span><br><span class="line">                    node-&gt;right = right;</span><br><span class="line">                    q.push(right);</span><br><span class="line">                    q1.push(right1);</span><br><span class="line">                    q2.push(right2);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(right1 !=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                    node-&gt;right = right1;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    node-&gt;right = right2;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> merged;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="116-填充每个节点的下一个右侧节点指针"><a href="#116-填充每个节点的下一个右侧节点指针" class="headerlink" title="116. 填充每个节点的下一个右侧节点指针"></a><a href="https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node/" target="_blank" rel="noopener">116. 填充每个节点的下一个右侧节点指针</a></h3><blockquote>
<p>层次遍历</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">// Definition for a Node.</span></span><br><span class="line"><span class="comment">class Node &#123;</span></span><br><span class="line"><span class="comment">public:</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    Node* left;</span></span><br><span class="line"><span class="comment">    Node* right;</span></span><br><span class="line"><span class="comment">    Node* next;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node() : val(0), left(NULL), right(NULL), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node(int _val) : val(_val), left(NULL), right(NULL), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node(int _val, Node* _left, Node* _right, Node* _next)</span></span><br><span class="line"><span class="comment">        : val(_val), left(_left), right(_right), next(_next) &#123;&#125;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Node* <span class="title">connect</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">nullptr</span>) <span class="keyword">return</span> root;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">queue</span>&lt;Node*&gt; Q;</span><br><span class="line">        Q.push(root);</span><br><span class="line">        <span class="keyword">while</span>(!Q.empty())&#123;</span><br><span class="line">            <span class="keyword">int</span> <span class="built_in">size</span> = Q.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="built_in">size</span>;i++)&#123;</span><br><span class="line">                Node* node = Q.front();</span><br><span class="line">                Q.pop();</span><br><span class="line">                <span class="keyword">if</span>(i&lt;<span class="built_in">size</span><span class="number">-1</span>)&#123;<span class="comment">//一层的左边size-1个</span></span><br><span class="line">                    node-&gt;next = Q.front();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(node-&gt;left!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                    Q.push(node-&gt;left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(node-&gt;right!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                    Q.push(node-&gt;right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用已建立的 next 指针，高级，根据具体题目分析可得</p>
</blockquote>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210808100955721.png" alt="image-20210808100955721"></p>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210808101008138.png" alt="image-20210808101008138"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">// Definition for a Node.</span></span><br><span class="line"><span class="comment">class Node &#123;</span></span><br><span class="line"><span class="comment">public:</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    Node* left;</span></span><br><span class="line"><span class="comment">    Node* right;</span></span><br><span class="line"><span class="comment">    Node* next;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node() : val(0), left(NULL), right(NULL), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node(int _val) : val(_val), left(NULL), right(NULL), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node(int _val, Node* _left, Node* _right, Node* _next)</span></span><br><span class="line"><span class="comment">        : val(_val), left(_left), right(_right), next(_next) &#123;&#125;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Node* <span class="title">connect</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">nullptr</span>) <span class="keyword">return</span> root;</span><br><span class="line"></span><br><span class="line">        Node* leftmost = root;</span><br><span class="line">        <span class="keyword">while</span>(leftmost -&gt; left !=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            Node* head = leftmost;</span><br><span class="line">            <span class="keyword">while</span>(head != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">                head-&gt;left-&gt;next = head-&gt;right;<span class="comment">//第一种</span></span><br><span class="line">                <span class="keyword">if</span>(head-&gt;next != <span class="literal">nullptr</span>)&#123;<span class="comment">//第二种</span></span><br><span class="line">                    head-&gt;right-&gt;next = head-&gt;next-&gt;left;</span><br><span class="line">                &#125;</span><br><span class="line">                head = head-&gt;next;<span class="comment">//指针右移</span></span><br><span class="line">            &#125;</span><br><span class="line">            leftmost = leftmost-&gt;left;<span class="comment">//下一层</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-9-天-广度优先搜索-深度优先搜索"><a href="#第-9-天-广度优先搜索-深度优先搜索" class="headerlink" title="第 9 天 广度优先搜索 / 深度优先搜索"></a>第 9 天 广度优先搜索 / 深度优先搜索</h1><h3 id="542-01-矩阵"><a href="#542-01-矩阵" class="headerlink" title="542. 01 矩阵"></a><a href="https://leetcode-cn.com/problems/01-matrix/" target="_blank" rel="noopener">542. 01 矩阵</a></h3><blockquote>
<p>广度优先</p>
<p>多源最短路-&gt;找到所有的0，距离为0，广播一次，找到所有的元素距离为1，再次广播，距离为2-&gt;依此类推</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dirs[<span class="number">4</span>][<span class="number">2</span>]=&#123;&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">updateMatrix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; mat)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = mat.<span class="built_in">size</span>(),n = mat[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">dist</span><span class="params">(m,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n))</span></span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">seen</span><span class="params">(m,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n))</span></span>;</span><br><span class="line">        <span class="built_in">queue</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt; q;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将所有的0添加进初始队列中</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(mat[i][j]==<span class="number">0</span>)&#123;</span><br><span class="line">                    q.emplace(i,j);</span><br><span class="line">                    seen[i][j]=<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//广度优先</span></span><br><span class="line">        <span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">            <span class="keyword">auto</span> [x,y] = q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> dx = x+dirs[i][<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">int</span> dy = y+dirs[i][<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span>(dx&gt;=<span class="number">0</span> &amp;&amp; dx&lt;m &amp;&amp; dy&gt;=<span class="number">0</span> &amp;&amp; dy&lt;n &amp;&amp; !seen[dx][dy])&#123;</span><br><span class="line">                    dist[dx][dy] = dist[x][y]+<span class="number">1</span>;</span><br><span class="line">                    q.emplace(dx,dy);</span><br><span class="line">                    seen[dx][dy] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dist;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>动态规划</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">updateMatrix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; mat)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = mat.<span class="built_in">size</span>(),n = mat[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">dist</span><span class="params">(m,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n,INT_MAX/<span class="number">2</span>))</span></span>;<span class="comment">//初始化距离为很大的数</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(mat[i][j] == <span class="number">0</span>)&#123;</span><br><span class="line">                    dist[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//左下到右下</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i<span class="number">-1</span>&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">                    dist[i][j] = <span class="built_in">min</span>(dist[i][j],dist[i<span class="number">-1</span>][j]+<span class="number">1</span>);<span class="comment">//当前节点是左边和当前节点最小值</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(j<span class="number">-1</span>&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">                    dist[i][j] = <span class="built_in">min</span>(dist[i][j],dist[i][j<span class="number">-1</span>]+<span class="number">1</span>);<span class="comment">//当前节点是上边和当前节点的最小值</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//右上到左下</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=m<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=n<span class="number">-1</span>;j&gt;=<span class="number">0</span>;j--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i+<span class="number">1</span> &lt; m)&#123;</span><br><span class="line">                    dist[i][j] = <span class="built_in">min</span>(dist[i][j],dist[i+<span class="number">1</span>][j]+<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(j+<span class="number">1</span>&lt;n)&#123;</span><br><span class="line">                    dist[i][j] = <span class="built_in">min</span>(dist[i][j],dist[i][j+<span class="number">1</span>]+<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dist;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="994-腐烂的橘子"><a href="#994-腐烂的橘子" class="headerlink" title="994. 腐烂的橘子"></a><a href="https://leetcode-cn.com/problems/rotting-oranges/" target="_blank" rel="noopener">994. 腐烂的橘子</a></h3><blockquote>
<p>本质上就是多源广度优先的搜索过程</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> cnt;</span><br><span class="line">    <span class="keyword">int</span> dis[<span class="number">10</span>][<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> dx[<span class="number">4</span>] = &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> dy[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">orangesRotting</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt; Q;</span><br><span class="line">        <span class="built_in">memset</span>(dis,<span class="number">-1</span>,<span class="keyword">sizeof</span>((dis)));</span><br><span class="line">        cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = grid.<span class="built_in">size</span>(),m = grid[<span class="number">0</span>].<span class="built_in">size</span>(),ans=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//初始化</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] == <span class="number">2</span>)&#123;<span class="comment">//2是腐烂,距离为0</span></span><br><span class="line">                    Q.push(make_pair(i,j));<span class="comment">//所有的腐烂橘子入队                                                                                          </span></span><br><span class="line">                    dis[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(grid[i][j] == <span class="number">1</span>) cnt += <span class="number">1</span>;<span class="comment">//cnt统计一共多少个好的橘子</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//广度优先搜索</span></span><br><span class="line">        <span class="keyword">while</span>(!Q.empty())&#123;</span><br><span class="line">            pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; x = Q.front();<span class="comment">//x是从队列中取出来的腐烂橘子</span></span><br><span class="line">            Q.pop();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> tx = x.first + dx[i];<span class="comment">//寻找腐烂橘子的上下左右</span></span><br><span class="line">                <span class="keyword">int</span> ty = x.second + dy[i];</span><br><span class="line">                <span class="keyword">if</span>(tx&lt;<span class="number">0</span> || ty&lt;<span class="number">0</span> || tx &gt;=n || ty &gt;=m || !grid[tx][ty] || ~dis[tx][ty]) <span class="keyword">continue</span>;<span class="comment">//错误的上下左右</span></span><br><span class="line">                dis[tx][ty] = dis[x.first][x.second] + <span class="number">1</span>;<span class="comment">//发散+1</span></span><br><span class="line">                Q.push(make_pair(tx,ty));<span class="comment">//发散后的入列</span></span><br><span class="line">                <span class="keyword">if</span>(grid[tx][ty] == <span class="number">1</span>)&#123;<span class="comment">//感染一个正常橘子</span></span><br><span class="line">                    cnt -= <span class="number">1</span>;<span class="comment">//正常橘子数目-1</span></span><br><span class="line">                    ans = dis[tx][ty];<span class="comment">//ans是当前的值</span></span><br><span class="line">                    <span class="keyword">if</span>(!cnt) <span class="keyword">break</span>;<span class="comment">//如果正常橘子被感染完全了,结束</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt ? <span class="number">-1</span>:ans;<span class="comment">//cnt=0返回ans;cnt=1返回-1,则是不可能感染所有的橘子</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-10-天-递归-回溯"><a href="#第-10-天-递归-回溯" class="headerlink" title="第 10 天 递归 / 回溯"></a>第 10 天 递归 / 回溯</h1><h3 id="21-合并两个有序链表"><a href="#21-合并两个有序链表" class="headerlink" title="21. 合并两个有序链表"></a><a href="https://leetcode-cn.com/problems/merge-two-sorted-lists/" target="_blank" rel="noopener">21. 合并两个有序链表</a></h3><blockquote>
<p>最简洁明了的递归</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeTwoLists</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l1 == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> l2;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(l2 == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> l1;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(l1-&gt;val &lt; l2-&gt;val)&#123;</span><br><span class="line">            l1-&gt;next = mergeTwoLists(l1-&gt;next,l2);</span><br><span class="line">            <span class="keyword">return</span> l1;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            l2-&gt;next = mergeTwoLists(l1,l2-&gt;next);</span><br><span class="line">            <span class="keyword">return</span> l2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>迭代</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeTwoLists</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        ListNode* prehead = <span class="keyword">new</span> ListNode(<span class="number">-1</span>);</span><br><span class="line">        ListNode* pre = prehead;</span><br><span class="line">        <span class="keyword">while</span>(l1 != <span class="literal">nullptr</span> &amp;&amp; l2 != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(l1-&gt;val &lt; l2-&gt;val)&#123;</span><br><span class="line">                pre-&gt;next = l1;</span><br><span class="line">                l1 = l1-&gt;next;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                pre-&gt;next = l2;</span><br><span class="line">                l2 = l2-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            pre = pre-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        pre-&gt;next = l1 == <span class="literal">nullptr</span> ? l2:l1;</span><br><span class="line">        <span class="keyword">return</span> prehead-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="206-反转链表"><a href="#206-反转链表" class="headerlink" title="206. 反转链表"></a><a href="https://leetcode-cn.com/problems/reverse-linked-list/" target="_blank" rel="noopener">206. 反转链表</a></h3><p>mine</p>
<blockquote>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210809102021413.png" alt="image-20210809102021413"></p>
<p>注释了，100%，不注释，58%，不晓得为啥</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//if(head == nullptr) return head;</span></span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(head!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            v.push_back(head-&gt;val);</span><br><span class="line">            head = head-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ListNode* prehead = <span class="keyword">new</span> ListNode(<span class="number">-1</span>);</span><br><span class="line">        ListNode* pre = prehead;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=v.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            prehead -&gt; next = <span class="keyword">new</span> ListNode(v[i]);</span><br><span class="line">            prehead = prehead -&gt; next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pre-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer1</p>
<blockquote>
<p>迭代，有点绕</p>
<p>改指针，转过来</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        ListNode* prev = <span class="literal">nullptr</span>;</span><br><span class="line">        ListNode* curr = head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(curr)&#123;</span><br><span class="line">            ListNode* next = curr-&gt;next;</span><br><span class="line">            curr-&gt;next = prev;</span><br><span class="line">            prev = curr;</span><br><span class="line">            curr = next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer2</p>
<blockquote>
<p>递归，高级</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!head || !head-&gt;next) <span class="keyword">return</span> head;</span><br><span class="line">        ListNode* newhead = reverseList(head-&gt;next);</span><br><span class="line">        head-&gt;next-&gt;next = head;</span><br><span class="line">        head-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">return</span> newhead;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-11-天-递归-回溯"><a href="#第-11-天-递归-回溯" class="headerlink" title="第 11 天 递归 / 回溯"></a>第 11 天 递归 / 回溯</h1><h3 id="77-组合"><a href="#77-组合" class="headerlink" title="77. 组合"></a><a href="https://leetcode-cn.com/problems/combinations/" target="_blank" rel="noopener">77. 组合</a></h3><blockquote>
<p>dfs的向量写法</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//cur是当前是数字几</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cur,<span class="keyword">int</span> n,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(temp.<span class="built_in">size</span>() + (n-cur+<span class="number">1</span>)&lt;k)&#123;<span class="comment">//无法拼凑到k个数</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(temp.<span class="built_in">size</span>() == k)&#123;<span class="comment">//一种组合</span></span><br><span class="line">            ans.push_back(temp);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//选择cur加入</span></span><br><span class="line">        temp.push_back(cur);</span><br><span class="line">        dfs(cur+<span class="number">1</span>,n,k);</span><br><span class="line">        temp.pop_back();</span><br><span class="line">        <span class="comment">//不选择cur加入</span></span><br><span class="line">        dfs(cur+<span class="number">1</span>,n,k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">combine</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        dfs(<span class="number">1</span>,n,k);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>高级，，，就很神奇</p>
<p>通过j&lt;k，通知个数</p>
<p>通过temp[j]+1 == temp[j+1]，让最大就增加到两个相邻；否则用++temp[j];找每个</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">combine</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">            temp.push_back(i);        </span><br><span class="line">        &#125;</span><br><span class="line">        temp.push_back(n+<span class="number">1</span>);<span class="comment">//哨兵</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(j&lt;k)&#123;</span><br><span class="line">            ans.emplace_back(temp.<span class="built_in">begin</span>(),temp.<span class="built_in">begin</span>()+k);</span><br><span class="line">            j=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(j&lt;k &amp;&amp; temp[j]+<span class="number">1</span> == temp[j+<span class="number">1</span>])&#123;</span><br><span class="line">                temp[j] = j+<span class="number">1</span>;</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;</span><br><span class="line">            ++temp[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="46-全排列"><a href="#46-全排列" class="headerlink" title="46. 全排列"></a><a href="https://leetcode-cn.com/problems/permutations/" target="_blank" rel="noopener">46. 全排列</a></h3><blockquote>
<p>就c++的全排列</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">backtrack</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; res,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp;output,<span class="keyword">int</span> first,<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(first == len)&#123;</span><br><span class="line">            res.emplace_back(output);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=first;i&lt;len;i++)&#123;</span><br><span class="line">            swap(output[i],output[first]);</span><br><span class="line">            backtrack(res,output,first+<span class="number">1</span>,len);</span><br><span class="line">            swap(output[i],output[first]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="784-字母大小写全排列"><a href="#784-字母大小写全排列" class="headerlink" title="784. 字母大小写全排列"></a>784. 字母大小写全排列</h3><blockquote>
<p>深度搜索，全排列</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ans;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isSmall</span><span class="params">(<span class="keyword">char</span> c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> c&gt;=<span class="string">'a'</span> &amp;&amp; c&lt;=<span class="string">'z'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isBig</span><span class="params">(<span class="keyword">char</span> c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> c&gt;=<span class="string">'A'</span> &amp;&amp; c&lt;=<span class="string">'Z'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">string</span>&amp; now,<span class="built_in">string</span>&amp; s,<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i==s.length())</span><br><span class="line">            ans.push_back(now);</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(isSmall(s[i]))&#123;</span><br><span class="line">                now.push_back(s[i]-(<span class="string">'a'</span>-<span class="string">'A'</span>));</span><br><span class="line">                dfs(now,s,i+<span class="number">1</span>);</span><br><span class="line">                now.pop_back();</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(isBig(s[i]))&#123;</span><br><span class="line">                now.push_back(s[i]+(<span class="string">'a'</span>-<span class="string">'A'</span>));</span><br><span class="line">                dfs(now,s,i+<span class="number">1</span>);</span><br><span class="line">                now.pop_back();</span><br><span class="line">            &#125;now.push_back(s[i]);</span><br><span class="line">            dfs(now,s,i+<span class="number">1</span>);</span><br><span class="line">            now.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">letterCasePermutation</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">string</span> now;<span class="comment">//now是当前完成的字符串，s是原始串</span></span><br><span class="line">        dfs(now,s,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>递归的位运算</p>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210822153225929.png" alt="image-20210822153225929"></p>
<p>大小A差距32，所以异或32即可</p>
<p>A的32位为0，不同为1，就加上32了</p>
<p>a的32位位1，相同为0，就减去32了</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">string</span> s,<span class="keyword">int</span> n,<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; res)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.<span class="built_in">size</span>() == n) <span class="keyword">return</span> res.push_back(s);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isdigit</span>(s[n])) <span class="keyword">return</span> dfs(s,n+<span class="number">1</span>,res);</span><br><span class="line">        dfs(s,n+<span class="number">1</span>,res);</span><br><span class="line">        s[n] ^= (<span class="number">1</span>&lt;&lt;<span class="number">5</span>);</span><br><span class="line">        dfs(s,n+<span class="number">1</span>,res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">letterCasePermutation</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; res;</span><br><span class="line">        dfs(s,<span class="number">0</span>,res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>非递归</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">letterCasePermutation</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; result&#123;s&#125;;</span><br><span class="line">        <span class="keyword">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;<span class="comment">//循环每个字符</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">isupper</span>(s[i]))&#123;<span class="comment">//当前字符为大写</span></span><br><span class="line">                <span class="keyword">int</span> <span class="built_in">size</span> = result.<span class="built_in">size</span>();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="built_in">size</span>;j++)&#123;<span class="comment">//当原来所有的字符串，改位置改为小写</span></span><br><span class="line">                    <span class="built_in">string</span> temp = result[j];</span><br><span class="line">                    temp[i] = <span class="built_in">tolower</span>(temp[i]);</span><br><span class="line">                    result.emplace_back(temp);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">islower</span>(s[i]))&#123;</span><br><span class="line">                <span class="keyword">int</span> <span class="built_in">size</span> = result.<span class="built_in">size</span>();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="built_in">size</span>;j++)&#123;</span><br><span class="line">                    <span class="built_in">string</span> temp = result[j];</span><br><span class="line">                    temp[i] = <span class="built_in">toupper</span>(temp[i]);</span><br><span class="line">                    result.emplace_back(temp);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-12-天-动态规划"><a href="#第-12-天-动态规划" class="headerlink" title="第 12 天 动态规划"></a>第 12 天 动态规划</h1><h3 id="70-爬楼梯"><a href="#70-爬楼梯" class="headerlink" title="70. 爬楼梯"></a><a href="https://leetcode-cn.com/problems/climbing-stairs/" target="_blank" rel="noopener">70. 爬楼梯</a></h3><blockquote>
<p>动态规划</p>
</blockquote>
<p>f(x)=f(x−1)+f(x−2)</p>
<p>「滚动数组思想」把空间复杂度优化成 O(1)</p>
<p><img src="/2021/08/26/00-03-Shuwen/70_fig1.gif" alt="fig1"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> p=<span class="number">0</span>,q=<span class="number">0</span>,r=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            p=q;</span><br><span class="line">            q=r;</span><br><span class="line">            r=p+q;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>矩阵快速幂</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt; <span class="title">multiply</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt;&amp;a,<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt; &amp;b)</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt; <span class="title">c</span><span class="params">(<span class="number">2</span>,<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;(<span class="number">2</span>))</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">2</span>;j++)&#123;</span><br><span class="line">                c[i][j] = a[i][<span class="number">0</span>]*b[<span class="number">0</span>][j] + a[i][<span class="number">1</span>]*b[<span class="number">1</span>][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt; <span class="title">matrixPow</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt; a,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt; ret = &#123;&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;&#125;;<span class="comment">//初始为单位矩阵</span></span><br><span class="line">        <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(n&amp;<span class="number">1</span> == <span class="number">1</span>)&#123;</span><br><span class="line">                ret = multiply(ret,a);<span class="comment">//每次积累</span></span><br><span class="line">            &#125;</span><br><span class="line">            n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">            a=multiply(a,a);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt; ret = &#123;&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;&gt; res = matrixPow(ret,n);</span><br><span class="line">        <span class="keyword">return</span> res[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通向公式，数学yyds</p>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210826002323668.png" alt="image-20210826002323668"></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> sqrt5 = <span class="built_in">sqrt</span>(<span class="number">5</span>);</span><br><span class="line">        <span class="keyword">double</span> fibn = <span class="built_in">pow</span>((<span class="number">1</span>+sqrt5)/<span class="number">2</span>,n+<span class="number">1</span>) - <span class="built_in">pow</span>((<span class="number">1</span>-sqrt5)/<span class="number">2</span>,n+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> round(fibn/sqrt5);<span class="comment">//round:四舍五入</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="198-打家劫舍"><a href="#198-打家劫舍" class="headerlink" title="198. 打家劫舍"></a><a href="https://leetcode-cn.com/problems/house-robber/" target="_blank" rel="noopener">198. 打家劫舍</a></h3><blockquote>
<p>最简单的动态规划</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.empty())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> <span class="built_in">size</span> = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">size</span>==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="built_in">size</span>,<span class="number">0</span>);</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="built_in">max</span>(nums[<span class="number">0</span>],nums[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;<span class="built_in">size</span>;i++)&#123;</span><br><span class="line">            dp[i] = <span class="built_in">max</span>(dp[i<span class="number">-2</span>]+nums[i],dp[i<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="built_in">size</span><span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>类似于滚动数组</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.empty())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> <span class="built_in">size</span> = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">size</span>==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> first = nums[<span class="number">0</span>],second = <span class="built_in">max</span>(nums[<span class="number">0</span>],nums[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;<span class="built_in">size</span>;i++)&#123;<span class="comment">//三个分别是：first、second、max</span></span><br><span class="line">            <span class="keyword">int</span> temp = second;</span><br><span class="line">            second = <span class="built_in">max</span>(first+nums[i],second);</span><br><span class="line">            first = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> second;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="120-三角形最小路径和"><a href="#120-三角形最小路径和" class="headerlink" title="120. 三角形最小路径和"></a><a href="https://leetcode-cn.com/problems/triangle/" target="_blank" rel="noopener">120. 三角形最小路径和</a></h3><blockquote>
<p>枚举所有情况</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumTotal</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; triangle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = triangle.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">f</span><span class="params">(n,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n))</span></span>;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = triangle[<span class="number">0</span>][<span class="number">0</span>];<span class="comment">//最左边的情况</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;<span class="comment">//中间</span></span><br><span class="line">            f[i][<span class="number">0</span>] = f[i<span class="number">-1</span>][<span class="number">0</span>]+triangle[i][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;i;j++)&#123;</span><br><span class="line">                f[i][j] = <span class="built_in">min</span>(f[i<span class="number">-1</span>][j<span class="number">-1</span>],f[i<span class="number">-1</span>][j])+triangle[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            f[i][i] = f[i<span class="number">-1</span>][i<span class="number">-1</span>]+triangle[i][i];<span class="comment">//最右边</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *min_element(f[n<span class="number">-1</span>].<span class="built_in">begin</span>(),f[n<span class="number">-1</span>].<span class="built_in">end</span>());<span class="comment">//min_element取容器中的最小值，*取的是二维数组中取出来的一维数组的值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>空间复杂度的优化</p>
<p>用两个长度为n的数组代替n*n的数组</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumTotal</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; triangle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = triangle.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">f</span><span class="params">(<span class="number">2</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n))</span></span>;<span class="comment">//2n的空间</span></span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = triangle[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> curr = i%<span class="number">2</span>;<span class="comment">//第一个n</span></span><br><span class="line">            <span class="keyword">int</span> prev = <span class="number">1</span>-curr;<span class="comment">//第二个n，实现交替0 1，1 0</span></span><br><span class="line">            f[curr][<span class="number">0</span>] = f[prev][<span class="number">0</span>] + triangle[i][<span class="number">0</span>];<span class="comment">//当前值还是用i，保存的地址是curr和prev</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;i;j++)&#123;</span><br><span class="line">                f[curr][j] = <span class="built_in">min</span>(f[prev][j<span class="number">-1</span>],f[prev][j])+triangle[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            f[curr][i] = f[prev][i<span class="number">-1</span>]+triangle[i][i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *min_element(f[(n<span class="number">-1</span>)%<span class="number">2</span>].<span class="built_in">begin</span>(),f[(n<span class="number">-1</span>)%<span class="number">2</span>].<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;<span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumTotal</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; triangle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = triangle.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">f</span><span class="params">(<span class="number">2</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n))</span></span>;<span class="comment">//2n的空间</span></span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = triangle[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> curr = i%<span class="number">2</span>;<span class="comment">//第一个n</span></span><br><span class="line">            <span class="keyword">int</span> prev = <span class="number">1</span>-curr;<span class="comment">//第二个n，实现交替0 1，1 0</span></span><br><span class="line">            f[curr][<span class="number">0</span>] = f[prev][<span class="number">0</span>] + triangle[i][<span class="number">0</span>];<span class="comment">//当前值还是用i，保存的地址是curr和prev</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;i;j++)&#123;</span><br><span class="line">                f[curr][j] = <span class="built_in">min</span>(f[prev][j<span class="number">-1</span>],f[prev][j])+triangle[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            f[curr][i] = f[prev][i<span class="number">-1</span>]+triangle[i][i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *min_element(f[(n<span class="number">-1</span>)%<span class="number">2</span>].<span class="built_in">begin</span>(),f[(n<span class="number">-1</span>)%<span class="number">2</span>].<span class="built_in">end</span>());<span class="comment">//f[(n-1)%2:最后一行的结果</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>空间复杂度n的优化，不过没太看懂，就一点点感觉那种</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumTotal</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; triangle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = triangle.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">f</span><span class="params">(n)</span></span>;</span><br><span class="line">        f[<span class="number">0</span>] = triangle[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            f[i] = f[i<span class="number">-1</span>] + triangle[i][i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i<span class="number">-1</span>;j&gt;<span class="number">0</span>;j--)&#123;</span><br><span class="line">                f[j] = <span class="built_in">min</span>(f[j<span class="number">-1</span>],f[j])+triangle[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            f[<span class="number">0</span>] += triangle[i][<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> *min_element(f.<span class="built_in">begin</span>(),f.<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-13-天-位运算"><a href="#第-13-天-位运算" class="headerlink" title="第 13 天 位运算"></a>第 13 天 位运算</h1><h3 id="231-2-的幂"><a href="#231-2-的幂" class="headerlink" title="231. 2 的幂"></a><a href="https://leetcode-cn.com/problems/power-of-two/" target="_blank" rel="noopener">231. 2 的幂</a></h3><blockquote>
<p>根据位运算的特点得到两个公式</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPowerOfTwo</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n&gt;<span class="number">0</span> &amp;&amp; (n&amp;(n<span class="number">-1</span>)) == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPowerOfTwo</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n&gt;<span class="number">0</span> &amp;&amp; (n&amp;(-n)) == n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果事最大的2幂次的约数，那么就是了。interesting</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">int</span> BIG = <span class="number">1</span>&lt;&lt;<span class="number">30</span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPowerOfTwo</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n&gt;<span class="number">0</span> &amp;&amp; BIG % n == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="191-位1的个数"><a href="#191-位1的个数" class="headerlink" title="191. 位1的个数"></a><a href="https://leetcode-cn.com/problems/number-of-1-bits/" target="_blank" rel="noopener">191. 位1的个数</a></h3><blockquote>
<p>正常的简答逻辑</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hammingWeight</span><span class="params">(<span class="keyword">uint32_t</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(n&amp;(<span class="number">1</span>&lt;&lt;i))&#123;</span><br><span class="line">                ret++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>效率比之前的好，每次把最后一个1位置零</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hammingWeight</span><span class="params">(<span class="keyword">uint32_t</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n)&#123;</span><br><span class="line">            n&amp;=n<span class="number">-1</span>;</span><br><span class="line">            ret++;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-14-天-位运算"><a href="#第-14-天-位运算" class="headerlink" title="第 14 天 位运算"></a>第 14 天 位运算</h1><h3 id="190-颠倒二进制位"><a href="#190-颠倒二进制位" class="headerlink" title="190. 颠倒二进制位"></a><a href="https://leetcode-cn.com/problems/reverse-bits/" target="_blank" rel="noopener">190. 颠倒二进制位</a></h3><blockquote>
<p>rev存的是结果，一开始是全0，将数n依次从前头的1与到rev里面。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">uint32_t</span> <span class="title">reverseBits</span><span class="params">(<span class="keyword">uint32_t</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">uint32_t</span> rev=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span> &amp;&amp; n&gt;<span class="number">0</span>;++i)&#123;</span><br><span class="line">            rev |= (n&amp;<span class="number">1</span>) &lt;&lt; (<span class="number">31</span>-i);</span><br><span class="line">            n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> rev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>高级，没太看懂，大概意思就是每次分治，先2位交换，逐步扩展到最后</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">uint32_t</span> M1 = <span class="number">0x55555555</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">uint32_t</span> M2 = <span class="number">0x33333333</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">uint32_t</span> M3 = <span class="number">0x0f0f0f0f</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">uint32_t</span> M4 = <span class="number">0x00ff00ff</span>; </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">uint32_t</span> <span class="title">reverseBits</span><span class="params">(<span class="keyword">uint32_t</span> n)</span> </span>&#123;</span><br><span class="line">        n = ((n &gt;&gt; <span class="number">1</span>)&amp; M1) | ((n&amp;M1) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">        n = ((n &gt;&gt; <span class="number">2</span>)&amp; M2) | ((n&amp;M2) &lt;&lt; <span class="number">2</span>);</span><br><span class="line">        n = ((n &gt;&gt; <span class="number">4</span>)&amp; M3) | ((n&amp;M3) &lt;&lt; <span class="number">4</span>);</span><br><span class="line">        n = ((n &gt;&gt; <span class="number">8</span>)&amp; M4) | ((n&amp;M4) &lt;&lt; <span class="number">8</span>);  </span><br><span class="line">        <span class="keyword">return</span> n&gt;&gt;<span class="number">16</span> | n&lt;&lt; <span class="number">16</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="136-只出现一次的数字"><a href="#136-只出现一次的数字" class="headerlink" title="136. 只出现一次的数字"></a><a href="https://leetcode-cn.com/problems/single-number/" target="_blank" rel="noopener">136. 只出现一次的数字</a></h3><blockquote>
<p>hhh，之前看过这个视频，做出来饿了</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> <span class="built_in">size</span> = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="built_in">size</span>;i++)&#123;</span><br><span class="line">            ans ^= nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>和答案基本一致，就是不太会用加强for循环，emm，其实主要用在能放一组元素的变量里面</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> e:nums) ret^=e;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="算法基础"><a href="#算法基础" class="headerlink" title="算法基础"></a>算法基础</h1><h1 id="第-1-天-二分查找-1"><a href="#第-1-天-二分查找-1" class="headerlink" title="第 1 天 二分查找"></a>第 1 天 二分查找</h1><h3 id="34-在排序数组中查找元素的第一个和最后一个位置"><a href="#34-在排序数组中查找元素的第一个和最后一个位置" class="headerlink" title="34. 在排序数组中查找元素的第一个和最后一个位置"></a><a href="https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noopener">34. 在排序数组中查找元素的第一个和最后一个位置</a></h3><blockquote>
<p>二分查找得改进</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target,<span class="keyword">bool</span> lower)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>,right = (<span class="keyword">int</span>)nums.<span class="built_in">size</span>()<span class="number">-1</span>,ans = (<span class="keyword">int</span>)nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &gt; target || (lower &amp;&amp; nums[mid] &gt;= target))&#123;</span><br><span class="line">                right = mid<span class="number">-1</span>;</span><br><span class="line">                ans = mid;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                left = mid+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">searchRange</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums,<span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> leftId = binarySearch(nums,target,<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">int</span> rightId = binarySearch(nums,target,<span class="literal">false</span>)<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span>(leftId&lt;=rightId &amp;&amp; rightId&lt;nums.<span class="built_in">size</span>() &amp;&amp; nums[leftId]==target&amp;&amp;nums[rightId]==target)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;leftId,rightId&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="33-搜索旋转排序数组"><a href="#33-搜索旋转排序数组" class="headerlink" title="33. 搜索旋转排序数组"></a><a href="https://leetcode-cn.com/problems/search-in-rotated-sorted-array/" target="_blank" rel="noopener">33. 搜索旋转排序数组</a></h3><blockquote>
<p>分两半</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = (<span class="keyword">int</span>)nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(!n)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>] == target ?<span class="number">0</span>:<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> l=<span class="number">0</span>,r=n<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l+r)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] == target) <span class="keyword">return</span> mid;</span><br><span class="line">            <span class="keyword">if</span>(nums[<span class="number">0</span>]&lt;=nums[mid])&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[<span class="number">0</span>]&lt;=target &amp;&amp; target&lt;nums[mid])&#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[mid] &lt; target &amp;&amp; target &lt;= nums[n<span class="number">-1</span>])&#123;</span><br><span class="line">                    l = mid+<span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="74-搜索二维矩阵"><a href="#74-搜索二维矩阵" class="headerlink" title="74. 搜索二维矩阵"></a><a href="https://leetcode-cn.com/problems/search-a-2d-matrix/" target="_blank" rel="noopener">74. 搜索二维矩阵</a></h3><h4 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h4><p><a href="https://blog.csdn.net/zhang14916/article/details/101058089" target="_blank" rel="noopener">参考链接</a></p>
<p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[capture](parameters)-&gt;return-type&#123;body&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>当parameters为空的时候，()可以被省去</li>
<li>当body只有“return”或者返回为void，那么”-&gt;return-type“可以被省去</li>
</ul>
<h4 id="upper-bound"><a href="#upper-bound" class="headerlink" title="upper_bound"></a>upper_bound</h4><p><a href="https://blog.csdn.net/qq_40160605/article/details/80150252" target="_blank" rel="noopener">参考链接</a></p>
<p>lower_bound( begin,end,num)：查找第一个大于等于num得数</p>
<p>upper_bound( begin,end,num)：查找第一个大于num得数</p>
<h4 id="binary-search"><a href="#binary-search" class="headerlink" title="binary_search"></a>binary_search</h4><p><a href="https://www.cnblogs.com/wkfvawl/p/9475939.html" target="_blank" rel="noopener">参考链接</a></p>
<p>是c++ stl里面得函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">binary_search(arr[],arr[]+<span class="built_in">size</span> , indx) b</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">searchMatrix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> row = upper_bound(matrix.<span class="built_in">begin</span>(),matrix.<span class="built_in">end</span>(),target,[](<span class="keyword">const</span> <span class="keyword">int</span> b,<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp;a)&#123;</span><br><span class="line">            <span class="keyword">return</span> b &lt; a[<span class="number">0</span>];</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(row == matrix.<span class="built_in">begin</span>())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        --row;</span><br><span class="line">        <span class="keyword">return</span> binary_search(row-&gt;<span class="built_in">begin</span>(),row-&gt;<span class="built_in">end</span>(),target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>矩阵式的二分查找</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">searchMatrix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = matrix.<span class="built_in">size</span>(),n = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> low = <span class="number">0</span>,high = m*n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (low + high) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> x = matrix[mid / n][mid % n];</span><br><span class="line">            <span class="keyword">if</span>(x &lt; target)&#123;</span><br><span class="line">                low = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(x&gt;target)&#123;</span><br><span class="line">                high = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-2-天-二分查找"><a href="#第-2-天-二分查找" class="headerlink" title="第 2 天 二分查找"></a>第 2 天 二分查找</h1><h3 id="153-寻找旋转排序数组中的最小值"><a href="#153-寻找旋转排序数组中的最小值" class="headerlink" title="153. 寻找旋转排序数组中的最小值"></a><a href="https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/" target="_blank" rel="noopener">153. 寻找旋转排序数组中的最小值</a></h3><p>mine</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findMin</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(!n)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> l =<span class="number">0</span>,r = n<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l+r) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &lt; nums[(mid+<span class="number">1</span>)%n] &amp;&amp; nums[(mid+n<span class="number">-1</span>)%n] &gt; nums[mid])&#123;</span><br><span class="line">                <span class="keyword">return</span> nums[mid];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[r] &gt; nums[mid])&#123;</span><br><span class="line">                r = mid<span class="number">-1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                l = mid+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findMin</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> low = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> high = nums.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(low &lt; high)&#123;</span><br><span class="line">            <span class="keyword">int</span> pivot = low + (high - low) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[pivot] &lt; nums[high])&#123;</span><br><span class="line">                high = pivot;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                low = pivot + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums[low];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="162-寻找峰值"><a href="#162-寻找峰值" class="headerlink" title="162. 寻找峰值"></a><a href="https://leetcode-cn.com/problems/find-peak-element/" target="_blank" rel="noopener">162. 寻找峰值</a></h3><p>mine</p>
<blockquote>
<p>没看出来要怎么用二分查找，这里的数组无序呀，，，然后就循环求，效率还好，，，</p>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210827115136407.png" alt="image-20210827115136407"></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findPeakElement</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> <span class="built_in">max</span>=nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> idx=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; <span class="built_in">max</span>)&#123;</span><br><span class="line">                <span class="built_in">max</span> =nums[i];</span><br><span class="line">                idx = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> idx;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>哦，是求峰值，不是最大值，打扰了</p>
<p>有意思，根据情况分类，只要满足一个条件就可以找到了</p>
<p><img src="/2021/08/26/00-03-Shuwen/image-20210827115552132.png" alt="image-20210827115552132"></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findPeakElement</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>()<span class="number">-1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; nums[i+<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>二分递归</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp;nums,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">            <span class="keyword">return</span> l;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mid = (l+r)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(nums[mid]&gt;nums[mid+<span class="number">1</span>])&#123;</span><br><span class="line">            <span class="keyword">return</span> search(nums,l,mid);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> search(nums,mid+<span class="number">1</span>,r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findPeakElement</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> search(nums,<span class="number">0</span>,nums.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-3-天-双指针-1"><a href="#第-3-天-双指针-1" class="headerlink" title="第 3 天 双指针"></a>第 3 天 双指针</h1><h3 id="82-删除排序链表中的重复元素-II"><a href="#82-删除排序链表中的重复元素-II" class="headerlink" title="82. 删除排序链表中的重复元素 II"></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list-ii/" target="_blank" rel="noopener">82. 删除排序链表中的重复元素 II</a></h3><blockquote>
<p>思路很简单，看怎么写了，代码给注释</p>
<p>有利地方：链表有序</p>
<p>难点：</p>
<ol>
<li>怎么判断重复了，easy</li>
<li>如何删除元素</li>
<li>如果继续往下走</li>
</ol>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">deleteDuplicates</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!head)&#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode* dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>,head);<span class="comment">//头节点指向最前面</span></span><br><span class="line">        ListNode* cur = dummy;</span><br><span class="line">        <span class="keyword">while</span>(cur-&gt;next &amp;&amp; cur-&gt;next-&gt;next)&#123;<span class="comment">//存在是前提</span></span><br><span class="line">            <span class="keyword">if</span>(cur-&gt;next-&gt;val == cur-&gt;next-&gt;next-&gt;val)&#123;<span class="comment">//出现连续</span></span><br><span class="line">                <span class="keyword">int</span> x = cur-&gt;next-&gt;val;<span class="comment">//取出值</span></span><br><span class="line">                <span class="keyword">while</span>(cur-&gt;next &amp;&amp; cur-&gt;next-&gt;val == x)&#123;<span class="comment">//循环是否等于x</span></span><br><span class="line">                    cur-&gt;next = cur-&gt;next-&gt;next;<span class="comment">//删除节点</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                cur=cur-&gt;next;<span class="comment">//不用删除，往后走即可</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="15-三数之和"><a href="#15-三数之和" class="headerlink" title="15. 三数之和"></a><a href="https://leetcode-cn.com/problems/3sum/" target="_blank" rel="noopener">15. 三数之和</a></h3><blockquote>
<p>两数之和的升级版，首先肯定是先确定一个值，剩下就简化为两数之和。</p>
<p>为了不重复怎么办：</p>
<ul>
<li>首先对数组排序</li>
<li>其次前两个数判断是否连续了</li>
</ul>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">threeSum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="comment">//为了不重复，首先进行一次排序</span></span><br><span class="line">        sort(nums.<span class="built_in">begin</span>(),nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> first = <span class="number">0</span>;first&lt;n;first++)&#123;</span><br><span class="line">            <span class="comment">//first是三元组的第一个数，两次枚举这两个应该不同</span></span><br><span class="line">            <span class="keyword">if</span>(first &gt; <span class="number">0</span>&amp;&amp; nums[first]==nums[first<span class="number">-1</span>])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> third = n<span class="number">-1</span>;<span class="comment">//双指针法：second从左走到右边，third从右边走到左边</span></span><br><span class="line">            <span class="keyword">int</span> target = -nums[first];<span class="comment">//因为需要和为0，简化为两数求和</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> second=first+<span class="number">1</span>;second&lt;n;second++)&#123;</span><br><span class="line">                <span class="comment">//两次枚举不同值</span></span><br><span class="line">                <span class="keyword">if</span>(second &gt; first+<span class="number">1</span> &amp;&amp; nums[second]==nums[second<span class="number">-1</span>])&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//双指针开始：大了，右指针左移</span></span><br><span class="line">                <span class="keyword">while</span>(second &lt; third &amp;&amp; nums[second]+nums[third] &gt; target)&#123;</span><br><span class="line">                    --third;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//指针重合,over</span></span><br><span class="line">                <span class="keyword">if</span>(second == third)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(nums[second]+nums[third]==target)&#123;</span><br><span class="line">                    ans.push_back(&#123;nums[first],nums[second],nums[third]&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-4-天-双指针-1"><a href="#第-4-天-双指针-1" class="headerlink" title="第 4 天 双指针"></a>第 4 天 双指针</h1><h3 id="844-比较含退格的字符串"><a href="#844-比较含退格的字符串" class="headerlink" title="844. 比较含退格的字符串"></a><a href="https://leetcode-cn.com/problems/backspace-string-compare/" target="_blank" rel="noopener">844. 比较含退格的字符串</a></h3><p>mine</p>
<blockquote>
<p>锻炼自己写代码的能力</p>
<p><img src="/2021/08/26/00-03-Shuwen/leetcode之算法学习计划\image-20210829132310691.png" alt="image-20210829132310691"></p>
<p>中间遇到几个问题</p>
<ol>
<li>判断！=0</li>
<li>两个stack放在一起，由于长度不一样，有问题</li>
<li>结果用s.size，做结束的判断，由于pop，导致这个值在变化</li>
</ol>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">backspaceCompare</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> s_size = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> t_size = t.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; s1;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; s2;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s_size;i++)&#123;</span><br><span class="line">            s1.push(s[i]);</span><br><span class="line">            <span class="keyword">if</span>(s[i]==<span class="string">'#'</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s1.<span class="built_in">size</span>()!=<span class="number">0</span>)&#123;</span><br><span class="line">                    s1.pop();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(s1.<span class="built_in">size</span>()!=<span class="number">0</span>)&#123;</span><br><span class="line">                    s1.pop();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;t_size;i++)&#123;</span><br><span class="line">            s2.push(t[i]);</span><br><span class="line">            <span class="keyword">if</span>(t[i]==<span class="string">'#'</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s2.<span class="built_in">size</span>()!=<span class="number">0</span>)&#123;</span><br><span class="line">                    s2.pop();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(s2.<span class="built_in">size</span>()!=<span class="number">0</span>)&#123;</span><br><span class="line">                    s2.pop();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(s1.<span class="built_in">size</span>()==<span class="number">0</span> &amp;&amp; s2.<span class="built_in">size</span>()==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s1.<span class="built_in">size</span>()!=s2.<span class="built_in">size</span>())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> len = s1.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s1.top() == s2.top())&#123;</span><br><span class="line">                s1.pop();</span><br><span class="line">                s2.pop();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"winter"</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer1：重构字符串</p>
<blockquote>
<p>其实和我的思路是一样的，但是代码简介，，hhh</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">backspaceCompare</span><span class="params">(<span class="built_in">string</span> S, <span class="built_in">string</span> T)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> build(S) == build(T);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">build</span><span class="params">(<span class="built_in">string</span> str)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">string</span> ret;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> ch : str) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ch != <span class="string">'#'</span>) &#123;</span><br><span class="line">                ret.push_back(ch);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!ret.empty()) &#123;</span><br><span class="line">                ret.pop_back();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>answer2</p>
<blockquote>
<p>双指针</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">backspaceCompare</span><span class="params">(<span class="built_in">string</span> S, <span class="built_in">string</span> T)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = S.length() - <span class="number">1</span>, j = T.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> skipS = <span class="number">0</span>, skipT = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">0</span> || j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//解决两个字符串的#</span></span><br><span class="line">            <span class="keyword">while</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (S[i] == <span class="string">'#'</span>) &#123;</span><br><span class="line">                    skipS++, i--;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (skipS &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    skipS--, i--;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (T[j] == <span class="string">'#'</span>) &#123;</span><br><span class="line">                    skipT++, j--;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (skipT &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    skipT--, j--;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//没有#了，判断字符串是否相等</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (S[i] != T[j]) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &gt;= <span class="number">0</span> || j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            i--, j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="986-区间列表的交集"><a href="#986-区间列表的交集" class="headerlink" title="986. 区间列表的交集"></a><a href="https://leetcode-cn.com/problems/interval-list-intersections/" target="_blank" rel="noopener">986. 区间列表的交集</a></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">intervalIntersection</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; firstList, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; secondList)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; res;</span><br><span class="line">        <span class="keyword">if</span>(firstList.<span class="built_in">size</span>() == <span class="number">0</span> || secondList.<span class="built_in">size</span>() == <span class="number">0</span>) <span class="keyword">return</span> res;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>, l, r;</span><br><span class="line">        <span class="keyword">int</span> len1 = firstList.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> len2 = secondList.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">while</span>(i &lt; len1 &amp;&amp; j &lt; len2)&#123;</span><br><span class="line">            l = <span class="built_in">max</span>(firstList[i][<span class="number">0</span>], secondList[j][<span class="number">0</span>]);</span><br><span class="line">            r = <span class="built_in">min</span>(firstList[i][<span class="number">1</span>], secondList[j][<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span>(l &lt;= r)&#123; <span class="comment">// 找到交集的情况</span></span><br><span class="line">                <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp;</span><br><span class="line">                tmp.push_back(l);</span><br><span class="line">                tmp.push_back(r);</span><br><span class="line">                res.push_back(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 无论是否交汇，j中较小只都应该向前移动</span></span><br><span class="line">            <span class="keyword">if</span>(firstList[i][<span class="number">1</span>] == r)&#123;</span><br><span class="line">                ++i;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="11-盛最多水的容器"><a href="#11-盛最多水的容器" class="headerlink" title="11. 盛最多水的容器"></a><a href="https://leetcode-cn.com/problems/container-with-most-water/" target="_blank" rel="noopener">11. 盛最多水的容器</a></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxArea</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; <span class="built_in">height</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="built_in">height</span>.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">int</span> area = <span class="built_in">min</span>(<span class="built_in">height</span>[l], <span class="built_in">height</span>[r]) * (r - l);</span><br><span class="line">            ans = <span class="built_in">max</span>(ans, area);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">height</span>[l] &lt;= <span class="built_in">height</span>[r]) &#123;</span><br><span class="line">                ++l;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                --r;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>今天用ipad做的，结果找不到代码了，，，，就直接拿的答案，，，</p>
</blockquote>
<h1 id="第-5-天-滑动窗口"><a href="#第-5-天-滑动窗口" class="headerlink" title="第 5 天 滑动窗口"></a>第 5 天 滑动窗口</h1><h3 id="438-找到字符串中所有字母异位词"><a href="#438-找到字符串中所有字母异位词" class="headerlink" title="438. 找到字符串中所有字母异位词"></a><a href="https://leetcode-cn.com/problems/find-all-anagrams-in-a-string/" target="_blank" rel="noopener">438. 找到字符串中所有字母异位词</a></h3><blockquote>
<p>暴力算法，是真的很慢，hhh</p>
<p><img src="/2021/08/26/00-03-Shuwen/Users\YCNN\AppData\Roaming\Typora\typora-user-images\image-20210830201604705.png" alt="image-20210830201604705"></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">findAnagrams</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;</span><br><span class="line">        <span class="keyword">if</span>(s.length() &lt; p.length()) <span class="keyword">return</span> res;</span><br><span class="line">        <span class="keyword">int</span> length = p.length();</span><br><span class="line">        <span class="comment">//暴力循环</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length()-p.length()+<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isyiwei(s.substr(i,length),p))&#123;</span><br><span class="line">                res.push_back(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断是否是异味，主要是看每个字符的长度是不是一样</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isyiwei</span><span class="params">(<span class="built_in">string</span> str_a,<span class="built_in">string</span> str_b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num[<span class="number">26</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> <span class="built_in">size</span> = str_a.length();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="built_in">size</span>;i++)&#123;</span><br><span class="line">            <span class="comment">//一个+，一个-，除非str_a和str_b一样，返回true</span></span><br><span class="line">            num[str_a[i]-<span class="string">'a'</span>]+=<span class="number">1</span>;</span><br><span class="line">            num[str_b[i]-<span class="string">'a'</span>]-=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(num[i]!=<span class="number">0</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>保存，每次加上1位，减去一位</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">findAnagrams</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> length_p = p.length();</span><br><span class="line">        <span class="keyword">int</span> length_s = s.length();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;res;</span><br><span class="line">        <span class="keyword">if</span>(length_p &gt; length_s) <span class="keyword">return</span> res;<span class="comment">//从长度</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//最开始</span></span><br><span class="line">        vector&lt;int&gt; temp_s(26,0),temp_p(26,0);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length_p;i++)&#123;</span><br><span class="line">            temp_p[p[i]-<span class="string">'a'</span>]++;</span><br><span class="line">            temp_s[s[i]-<span class="string">'a'</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(temp_p == temp_s) res.push_back(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//循环加上一位</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i+length_p&lt;length_s;i++)&#123;</span><br><span class="line">            <span class="comment">//去掉s[i]，换上s[i+length]，相当于滑动窗口的移动</span></span><br><span class="line">            temp_s[s[i]-<span class="string">'a'</span>]--;</span><br><span class="line">            temp_s[s[i+length_p]-<span class="string">'a'</span>]++;</span><br><span class="line">            <span class="keyword">if</span>(temp_p==temp_s)&#123;</span><br><span class="line">                res.push_back(i+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="713-乘积小于K的子数组"><a href="#713-乘积小于K的子数组" class="headerlink" title="713. 乘积小于K的子数组"></a><a href="https://leetcode-cn.com/problems/subarray-product-less-than-k/" target="_blank" rel="noopener">713. 乘积小于K的子数组</a></h3><p>由于题目要求是连续的子数组，所以很明显要用滑动窗口进行求解</p>
<p><img src="/2021/08/26/00-03-Shuwen/Users\YCNN\AppData\Roaming\Typora\typora-user-images\image-20210830203223375.png" alt="image-20210830203223375"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(k&lt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> res=<span class="number">0</span>,l=<span class="number">0</span>,r=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> windows_mul = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(r&lt;n)&#123;</span><br><span class="line">            windows_mul*=nums[r];</span><br><span class="line">            <span class="comment">//不满足条件，剔除左边的元素</span></span><br><span class="line">            <span class="keyword">while</span>(windows_mul&gt;=k)&#123;</span><br><span class="line">                windows_mul/=nums[l];</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//满足条件，加入右边的元素</span></span><br><span class="line">            res += (r-l+<span class="number">1</span>);</span><br><span class="line">            r++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="209-长度最小的子数组"><a href="#209-长度最小的子数组" class="headerlink" title="209. 长度最小的子数组"></a><a href="https://leetcode-cn.com/problems/minimum-size-subarray-sum/" target="_blank" rel="noopener">209. 长度最小的子数组</a></h3><blockquote>
<p>暴力法</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> target, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;n;j++)&#123;</span><br><span class="line">                sum+=nums[j];</span><br><span class="line">                <span class="keyword">if</span>(sum &gt;= target)&#123;</span><br><span class="line">                    ans = <span class="built_in">min</span>(ans,j-i+<span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span>:ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>滑动窗口</p>
<blockquote>
<p>我照着第二个进行了修改，差一点点，好吧，题目没好好看，找的是&gt;=的最小长度，wuwu</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> target, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> res=INT_MAX,l=<span class="number">0</span>,r=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> cur_len;</span><br><span class="line">        <span class="keyword">int</span> windows_plus = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(r&lt;n)&#123;</span><br><span class="line">            windows_plus+=nums[r];</span><br><span class="line">            <span class="keyword">while</span>(windows_plus &gt;= target)&#123;</span><br><span class="line">                res = <span class="built_in">min</span>(res,r-l+<span class="number">1</span>);</span><br><span class="line">                windows_plus -= nums[l];</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line">            r++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res == INT_MAX? <span class="number">0</span>: res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-6-天-广度优先搜索-深度优先搜索"><a href="#第-6-天-广度优先搜索-深度优先搜索" class="headerlink" title="第 6 天 广度优先搜索 / 深度优先搜索"></a>第 6 天 广度优先搜索 / 深度优先搜索</h1><h3 id="200-岛屿数量"><a href="#200-岛屿数量" class="headerlink" title="200. 岛屿数量"></a><a href="https://leetcode-cn.com/problems/number-of-islands/" target="_blank" rel="noopener">200. 岛屿数量</a></h3><blockquote>
<p>通过dfs，一次可以把一个岛屿置0，然后循环，找到1，则记作1个岛屿，把改岛屿置零</p>
<p>好像做过类似的题，，，，</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; grid,<span class="keyword">int</span> r,<span class="keyword">int</span> c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> nr = grid.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">int</span> nc = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    grid[r][c]=<span class="string">'0'</span>;<span class="comment">//遍历过，置0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(r<span class="number">-1</span> &gt;= <span class="number">0</span> &amp;&amp; grid[r<span class="number">-1</span>][c]==<span class="string">'1'</span>) dfs(grid,r<span class="number">-1</span>,c);</span><br><span class="line">    <span class="keyword">if</span>(r+<span class="number">1</span> &lt; nr &amp;&amp; grid[r+<span class="number">1</span>][c]==<span class="string">'1'</span>) dfs(grid,r+<span class="number">1</span>,c);</span><br><span class="line">    <span class="keyword">if</span>(c<span class="number">-1</span> &gt;= <span class="number">0</span> &amp;&amp; grid[r][c<span class="number">-1</span>]==<span class="string">'1'</span>) dfs(grid,r,c<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">if</span>(c+<span class="number">1</span> &lt; nc &amp;&amp; grid[r][c+<span class="number">1</span>]==<span class="string">'1'</span>) dfs(grid,r,c+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> nr = grid.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(!nr) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> nc = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> num_island = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>;r&lt;nr;r++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> c=<span class="number">0</span>;c&lt;nc;c++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[r][c]==<span class="string">'1'</span>)&#123;</span><br><span class="line">                    ++num_island;</span><br><span class="line">                    dfs(grid,r,c);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num_island;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>广度优先</p>
<p>其实和深度优先一样，找到一个1的时候，搜索所有相邻的置零</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> nr = grid.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(!nr) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> nc = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> num_island = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>;r&lt;nr;r++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> c=<span class="number">0</span>;c&lt;nc;c++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[r][c]==<span class="string">'1'</span>)&#123;</span><br><span class="line">                    ++num_island;</span><br><span class="line">                    grid[r][c]=<span class="string">'0'</span>;</span><br><span class="line">                    <span class="built_in">queue</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt; neighbors;</span><br><span class="line">                    neighbors.push(&#123;r,c&#125;);</span><br><span class="line">                    <span class="keyword">while</span>(!neighbors.empty())&#123;</span><br><span class="line">                        <span class="keyword">auto</span> rc = neighbors.front();</span><br><span class="line">                        neighbors.pop();</span><br><span class="line">                        <span class="keyword">int</span> row = rc.first,col = rc.second;</span><br><span class="line">                        <span class="keyword">if</span>(row<span class="number">-1</span>&gt;=<span class="number">0</span> &amp;&amp; grid[row<span class="number">-1</span>][col]==<span class="string">'1'</span>)&#123;</span><br><span class="line">                            neighbors.push(&#123;row<span class="number">-1</span>,col&#125;);</span><br><span class="line">                            grid[row<span class="number">-1</span>][col]=<span class="string">'0'</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(row+<span class="number">1</span>&lt;nr &amp;&amp; grid[row+<span class="number">1</span>][col]==<span class="string">'1'</span>)&#123;</span><br><span class="line">                            neighbors.push(&#123;row+<span class="number">1</span>,col&#125;);</span><br><span class="line">                            grid[row+<span class="number">1</span>][col]=<span class="string">'0'</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(col<span class="number">-1</span>&gt;=<span class="number">0</span> &amp;&amp; grid[row][col<span class="number">-1</span>]==<span class="string">'1'</span>)&#123;</span><br><span class="line">                            neighbors.push(&#123;row,col<span class="number">-1</span>&#125;);</span><br><span class="line">                            grid[row][col<span class="number">-1</span>]=<span class="string">'0'</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(col+<span class="number">1</span>&lt;nc &amp;&amp; grid[row][col+<span class="number">1</span>]==<span class="string">'1'</span>)&#123;</span><br><span class="line">                            neighbors.push(&#123;row,col+<span class="number">1</span>&#125;);</span><br><span class="line">                            grid[row][col+<span class="number">1</span>]=<span class="string">'0'</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num_island;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h4><blockquote>
<p>发现是一种new算法，没做过的</p>
<p>通过看了视频学习了一下，讲的真好（鼓掌）</p>
<p><a href="https://www.bilibili.com/video/BV13t411v7Fs?from=search&amp;seid=7042952233023491726" target="_blank" rel="noopener">视频链接</a></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//固定</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnionFind</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    UnionFind(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; grid)&#123;</span><br><span class="line">        count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m = grid.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> n = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j]==<span class="string">'1'</span>)&#123;</span><br><span class="line">                    parent.push_back(i*n+j);</span><br><span class="line">                    ++count;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    parent.push_back(<span class="number">-1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                rank.push_back(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(parent[i]!=i)&#123;</span><br><span class="line">            parent[i]=<span class="built_in">find</span>(parent[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> parent[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">unit</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> rootx = <span class="built_in">find</span>(x);</span><br><span class="line">        <span class="keyword">int</span> rooty = <span class="built_in">find</span>(y);</span><br><span class="line">        <span class="keyword">if</span>(rootx != rooty)&#123;</span><br><span class="line">            <span class="keyword">if</span>(rank[rootx] &lt; rank[rooty])&#123;</span><br><span class="line">                swap(rootx,rooty);</span><br><span class="line">            &#125;</span><br><span class="line">            parent[rooty]=rootx;</span><br><span class="line">            <span class="keyword">if</span>(rank[rootx]==rank[rooty]) rank[rootx]+=<span class="number">1</span>;</span><br><span class="line">            --count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> <span class="keyword">const</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; parent;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; rank;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> nr = grid.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(!nr) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> nc = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">UnionFind <span class="title">uf</span><span class="params">(grid)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>;r&lt;nr;r++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> c=<span class="number">0</span>;c&lt;nc;c++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[r][c]==<span class="string">'1'</span>)&#123;</span><br><span class="line">                    grid[r][c]==<span class="string">'0'</span>;</span><br><span class="line">                    <span class="keyword">if</span>(r<span class="number">-1</span>&gt;=<span class="number">0</span> &amp;&amp; grid[r<span class="number">-1</span>][c]==<span class="string">'1'</span>) uf.unit(r*nc+c,(r<span class="number">-1</span>)*nc+c);</span><br><span class="line">                    <span class="keyword">if</span>(r+<span class="number">1</span>&lt;nr &amp;&amp; grid[r+<span class="number">1</span>][c]==<span class="string">'1'</span>) uf.unit(r*nc+c,(r+<span class="number">1</span>)*nc+c);</span><br><span class="line">                    <span class="keyword">if</span>(c<span class="number">-1</span>&gt;=<span class="number">0</span> &amp;&amp; grid[r][c<span class="number">-1</span>]==<span class="string">'1'</span>) uf.unit(r*nc+c,r*nc+c<span class="number">-1</span>);</span><br><span class="line">                    <span class="keyword">if</span>(c+<span class="number">1</span>&lt;nc &amp;&amp; grid[r][c+<span class="number">1</span>]==<span class="string">'1'</span>) uf.unit(r*nc+c,r*nc+c+<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> uf.getCount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="547-省份数量"><a href="#547-省份数量" class="headerlink" title="547. 省份数量"></a><a href="https://leetcode-cn.com/problems/number-of-provinces/" target="_blank" rel="noopener">547. 省份数量</a></h3><p>深度优先</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; isConnected,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; visited,<span class="keyword">int</span> provinces,<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;provinces;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isConnected[i][j]==<span class="number">1</span> &amp;&amp; !visited[j])&#123;</span><br><span class="line">                visited[j]=<span class="number">1</span>;</span><br><span class="line">                dfs(isConnected,visited,provinces,j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; isConnected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> provinces = isConnected.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">visited</span><span class="params">(provinces)</span></span>;</span><br><span class="line">        <span class="keyword">int</span> circles=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;provinces;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!visited[i])&#123;</span><br><span class="line">                dfs(isConnected,visited,provinces,i);</span><br><span class="line">                circles++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> circles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>广度优先</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; isConnected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> provinces = isConnected.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">visited</span><span class="params">(provinces)</span></span>;</span><br><span class="line">        <span class="keyword">int</span> circles=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;provinces;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!visited[i])&#123;</span><br><span class="line">                Q.push(i);</span><br><span class="line">                <span class="keyword">while</span>(!Q.empty())&#123;</span><br><span class="line">                    <span class="keyword">int</span> j = Q.front();Q.pop();</span><br><span class="line">                    visited[j]=<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;provinces;k++)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(isConnected[j][k]==<span class="number">1</span> &amp;&amp; !visited[k])&#123;</span><br><span class="line">                            Q.push(k);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                circles++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> circles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>并查集</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; parent,<span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(parent[index]!=index)&#123;</span><br><span class="line">            parent[index]=Find(parent,parent[index]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> parent[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; parent,<span class="keyword">int</span> index1,<span class="keyword">int</span> index2)</span></span>&#123;</span><br><span class="line">        parent[Find(parent,index1)] = Find(parent,index2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; isConnected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> provinces = isConnected.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">parent</span><span class="params">(provinces)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;provinces;i++)&#123;</span><br><span class="line">            parent[i]=i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;provinces;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;provinces;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(isConnected[i][j]==<span class="number">1</span>)&#123;</span><br><span class="line">                    Union(parent,i,j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> circles=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;provinces;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(parent[i]==i)&#123;</span><br><span class="line">                circles++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> circles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="第-7-天-广度优先搜索-深度优先搜索-1"><a href="#第-7-天-广度优先搜索-深度优先搜索-1" class="headerlink" title="第 7 天 广度优先搜索 / 深度优先搜索"></a>第 7 天 广度优先搜索 / 深度优先搜索</h1><h3 id="117-填充每个节点的下一个右侧节点指针-II"><a href="#117-填充每个节点的下一个右侧节点指针-II" class="headerlink" title="117. 填充每个节点的下一个右侧节点指针 II"></a><a href="https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node-ii/" target="_blank" rel="noopener">117. 填充每个节点的下一个右侧节点指针 II</a></h3><blockquote>
<p>广度优先</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Node* <span class="title">connect</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">queue</span>&lt;Node*&gt; q;</span><br><span class="line">        q.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> n = q.<span class="built_in">size</span>();</span><br><span class="line">            Node *last = <span class="literal">nullptr</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">                Node *f = q.front();</span><br><span class="line">                q.pop();</span><br><span class="line">                <span class="keyword">if</span> (f-&gt;left) &#123;</span><br><span class="line">                    q.push(f-&gt;left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (f-&gt;right) &#123;</span><br><span class="line">                    q.push(f-&gt;right);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (i != <span class="number">1</span>) &#123;</span><br><span class="line">                    last-&gt;next = f;</span><br><span class="line">                &#125;</span><br><span class="line">                last = f;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用已经建立的next指针</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">// Definition for a Node.</span></span><br><span class="line"><span class="comment">class Node &#123;</span></span><br><span class="line"><span class="comment">public:</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    Node* left;</span></span><br><span class="line"><span class="comment">    Node* right;</span></span><br><span class="line"><span class="comment">    Node* next;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node() : val(0), left(NULL), right(NULL), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node(int _val) : val(_val), left(NULL), right(NULL), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Node(int _val, Node* _left, Node* _right, Node* _next)</span></span><br><span class="line"><span class="comment">        : val(_val), left(_left), right(_right), next(_next) &#123;&#125;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">handle</span><span class="params">(Node* &amp;last,Node* &amp;p,Node* &amp;nextStart)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(last)&#123;</span><br><span class="line">            last-&gt;next=p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!nextStart)&#123;</span><br><span class="line">            nextStart=p;</span><br><span class="line">        &#125;</span><br><span class="line">        last=p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Node* <span class="title">connect</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!root)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node* start = root;</span><br><span class="line">        <span class="keyword">while</span>(start)&#123;</span><br><span class="line">            Node* last = <span class="literal">nullptr</span>,*nextStart = <span class="literal">nullptr</span>;</span><br><span class="line">            <span class="keyword">for</span>(Node* p = start;p!=<span class="literal">nullptr</span>;p = p-&gt;next)&#123;</span><br><span class="line">                <span class="keyword">if</span>(p-&gt;left)&#123;</span><br><span class="line">                    handle(last,p-&gt;left,nextStart);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(p-&gt;right)&#123;</span><br><span class="line">                    handle(last,p-&gt;right,nextStart);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            start = nextStart;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="572-另一棵树的子树"><a href="#572-另一棵树的子树" class="headerlink" title="572. 另一棵树的子树"></a><a href="https://leetcode-cn.com/problems/subtree-of-another-tree/" target="_blank" rel="noopener">572. 另一棵树的子树</a></h3><blockquote>
<p>深度优先+暴力</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(TreeNode* root,TreeNode* subRoot)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!root &amp;&amp; !subRoot) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>((root &amp;&amp; !subRoot) || (!root &amp;&amp; subRoot) || (root-&gt;val != subRoot-&gt;val))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> check(root-&gt;left,subRoot-&gt;left) &amp;&amp; check(root-&gt;right,subRoot-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(TreeNode* root,TreeNode* subRoot)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> check(root,subRoot) || dfs(root-&gt;left,subRoot) || dfs(root-&gt;right,subRoot);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isSubtree</span><span class="params">(TreeNode* root, TreeNode* subRoot)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dfs(root,subRoot);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/08/07/23-59/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shuwen.jpg">
      <meta itemprop="name" content="Shuwen">
      <meta itemprop="description" content="做有意思的事，有意思地做事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuwen's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/07/23-59/" class="post-title-link" itemprop="url">Learn Blockchain by Building One_book study</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-07 23:59:31" itemprop="dateCreated datePublished" datetime="2021-08-07T23:59:31+08:00">2021-08-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-08 00:54:44" itemprop="dateModified" datetime="2021-08-08T00:54:44+08:00">2021-08-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blockchain/" itemprop="url" rel="index"><span itemprop="name">blockchain</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>来自Learn Blockchain by Building One的笔记</p>
</blockquote>
<h1 id="书本笔记"><a href="#书本笔记" class="headerlink" title="书本笔记"></a>书本笔记</h1><p><img src="/2021/08/07/23-59-Shuwen/image-20210801195944516.png" alt="image-20210801195944516"></p>
<h2 id="chapter-1"><a href="#chapter-1" class="headerlink" title="chapter 1"></a>chapter 1</h2><blockquote>
<p>主要就是讲工具安装（环境搭建）和一个小例子。</p>
</blockquote>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p>安装python、poetry</p>
<h4 id="poetry"><a href="#poetry" class="headerlink" title="poetry"></a>poetry</h4><p>poetry：管理python项目依赖关系</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">poetry new my-project	#用Poetry创建一个Python项目</span><br><span class="line">poetry add requests		#用Poetry添加python的依赖</span><br><span class="line">poetry shell			#Python解释器是不是在Poetry的virtualenv中</span><br></pre></td></tr></table></figure>
<h3 id="example"><a href="#example" class="headerlink" title="example"></a>example</h3><h4 id="获得比特币价格"><a href="#获得比特币价格" class="headerlink" title="获得比特币价格"></a>获得比特币价格</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">response = requests.get(<span class="string">"https://api.coinbase.com/v2/prices/spot?currency=USD"</span>)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731164527928.png" alt="image-20210731164527928"></p>
<h2 id="chapter-2"><a href="#chapter-2" class="headerlink" title="chapter 2"></a>chapter 2</h2><blockquote>
<p>主要讲hash，题目是“A Way to Identify<br>Everything”，也就是用hash可以验证发送的数据是否被修改</p>
</blockquote>
<h3 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h3><h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><h5 id="1-Hashing-in-Python"><a href="#1-Hashing-in-Python" class="headerlink" title="1 Hashing in Python"></a>1 Hashing in Python</h5><blockquote>
<p>文字的hash</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="comment"># Hash functions expect bytes as input: the encode() method turns strings to bytes</span></span><br><span class="line">input_bytes = <span class="string">b"backpack"</span></span><br><span class="line">output = hashlib.sha256(input_bytes)</span><br><span class="line"><span class="comment"># We use hexdigest() to convert bytes to hex because it's easier to read</span></span><br><span class="line">print(output.hexdigest())</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731164818639.png" alt="image-20210731164818639"></p>
<h5 id="2-Hashing-images"><a href="#2-Hashing-images" class="headerlink" title="2 Hashing images"></a>2 Hashing images</h5><blockquote>
<p>图片的hash</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha256</span><br><span class="line">file = open(<span class="string">"my_image.jpg"</span>, <span class="string">"rb"</span>)</span><br><span class="line">hash = sha256(file.read()).hexdigest()</span><br><span class="line">file.close()</span><br><span class="line">print(<span class="string">f"The hash of my file is: <span class="subst">&#123;hash&#125;</span>"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731165008111.png" alt="image-20210731165008111"></p>
<h5 id="3-Sending-untamperable-emails"><a href="#3-Sending-untamperable-emails" class="headerlink" title="3 Sending untamperable emails"></a>3 Sending untamperable emails</h5><blockquote>
<p>加了一部分密文，hash</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha256</span><br><span class="line">secret_phrase = <span class="string">"bolognese"</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_hash_with_secret_phrase</span><span class="params">(input_data, secret_phrase)</span>:</span></span><br><span class="line">    combined = input_data + secret_phrase</span><br><span class="line">    <span class="keyword">return</span> sha256(combined.encode()).hexdigest()</span><br><span class="line">email_body = <span class="string">"Hey Bob,I think you should learn about Blockchains! I've been investing in Bitcoin and currently have exactly 12.03 BTC in my account."</span></span><br><span class="line">print(get_hash_with_secret_phrase(email_body,  secret_phrase))</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731165316295.png" alt="image-20210731165316295"></p>
<h2 id="chapter-3"><a href="#chapter-3" class="headerlink" title="chapter 3"></a>chapter 3</h2><blockquote>
<p>实现区块链的链（修改后的，所以proof_of_work是chapter 4的</p>
<ul>
<li><code>__init__</code>：一开始创建初始块</li>
<li>new_block：创建块</li>
<li>hash：对块进行hash</li>
<li>last_block：取最后一个块</li>
<li>valid_block：判断是否是有效块（前4个是0</li>
<li>proof_of_work：一直生成块，知道有效块</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#blockchain.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha256</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Blockchain</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.chain=[]</span><br><span class="line">		self.pending_transactions=[]</span><br><span class="line"></span><br><span class="line">		<span class="comment">#Create the genesis block</span></span><br><span class="line">		print(<span class="string">"Creating genesis block"</span>)</span><br><span class="line">		self.chain.append(self.new_block())</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">new_block</span><span class="params">(self)</span>:</span></span><br><span class="line">		block=&#123;</span><br><span class="line">			<span class="string">'index'</span>:len(self.chain),</span><br><span class="line">			<span class="string">'timestamp'</span>:datetime.utcnow().isoformat(),</span><br><span class="line">			<span class="string">'transactions'</span>:self.pending_transactions,</span><br><span class="line">			<span class="string">'previous_hash'</span>:self.last_block[<span class="string">"hash"</span>] <span class="keyword">if</span> self.last_block <span class="keyword">else</span> <span class="literal">None</span>,</span><br><span class="line">			<span class="string">'nonce'</span>:format(random.getrandbits(<span class="number">64</span>),<span class="string">"x"</span>),</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		block_hash = self.hash(block)</span><br><span class="line">		block[<span class="string">"hash"</span>] = block_hash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		self.pending_transactions=[]</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> block</span><br><span class="line"></span><br><span class="line"><span class="meta">	@staticmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">hash</span><span class="params">(block)</span>:</span></span><br><span class="line"></span><br><span class="line">		block_string = json.dumps(block,sort_keys=<span class="literal">True</span>).encode()</span><br><span class="line">		<span class="keyword">return</span> sha256(block_string).hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="meta">	@property</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">last_block</span><span class="params">(self)</span>:</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> self.chain[<span class="number">-1</span>] <span class="keyword">if</span> self.chain <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	@staticmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">valid_block</span><span class="params">(block)</span>:</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> block[<span class="string">'hash'</span>].startswith(<span class="string">"0000"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">proof_of_work</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">			new_block = self.new_block()</span><br><span class="line">			<span class="keyword">if</span> self.valid_block(new_block):</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">		self.chain.append(new_block)</span><br><span class="line">		print(<span class="string">"Found a new block: "</span>,new_block)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731165711500.png" alt="image-20210731165711500"></p>
<h2 id="chapter-4"><a href="#chapter-4" class="headerlink" title="chapter 4"></a>chapter 4</h2><blockquote>
<p>题目是工作量证明，</p>
</blockquote>
<h3 id="工具-1"><a href="#工具-1" class="headerlink" title="工具"></a>工具</h3><h4 id="ipython"><a href="#ipython" class="headerlink" title="ipython"></a>ipython</h4><ul>
<li><p>与Python解释器交互的一个很棒的工具</p>
</li>
<li><p>使用制表符补全和语法高亮显示</p>
</li>
</ul>
<h3 id="工作量证明"><a href="#工作量证明" class="headerlink" title="工作量证明"></a>工作量证明</h3><p>挖矿：矿工通过找到一个哈希值小于给定值</p>
<h4 id="example-1"><a href="#example-1" class="headerlink" title="example"></a>example</h4><h5 id="1-easy"><a href="#1-easy" class="headerlink" title="1 easy"></a>1 easy</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha256</span><br><span class="line"></span><br><span class="line">x = <span class="number">5</span></span><br><span class="line">y = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> sha256(<span class="string">f'<span class="subst">&#123;x*y&#125;</span>'</span>.encode()).hexdigest()[<span class="number">-1</span>] != <span class="string">"0"</span>:</span><br><span class="line">	y += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">f'The solution is y = <span class="subst">&#123;y&#125;</span>'</span>)(funcoin-fVGYERd1-py3<span class="number">.8</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731170111573.png" alt="image-20210731170111573"></p>
<h5 id="2-应用到blockchain"><a href="#2-应用到blockchain" class="headerlink" title="2 应用到blockchain"></a>2 应用到blockchain</h5><blockquote>
<p>代码同chapter3</p>
</blockquote>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731170314488.png" alt="image-20210731170314488"></p>
<h2 id="chapter-5"><a href="#chapter-5" class="headerlink" title="chapter 5"></a>chapter 5</h2><blockquote>
<p>讲的网络，首先讲了异步，然后做了一个简单的聊天，类似于区块链中的通信情况。</p>
</blockquote>
<h3 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">greet</span><span class="params">(name,delay)</span>:</span></span><br><span class="line">	<span class="keyword">await</span> asyncio.sleep(delay)</span><br><span class="line">	print(<span class="string">f'<span class="subst">&#123;name&#125;</span>:I waited <span class="subst">&#123;delay&#125;</span> seconds before saying "hello"'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">	task_1 = asyncio.create_task(greet(<span class="string">"t1"</span>,<span class="number">3</span>))</span><br><span class="line">	task_2 = asyncio.create_task(greet(<span class="string">"t2"</span>,<span class="number">2</span>))</span><br><span class="line">	task_3 = asyncio.create_task(greet(<span class="string">"t3"</span>,<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">	start_time = time.time()</span><br><span class="line">	print(<span class="string">"0.00s: Program Start"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">await</span> task_1</span><br><span class="line">	<span class="keyword">await</span> task_2</span><br><span class="line">	<span class="keyword">await</span> task_3</span><br><span class="line"></span><br><span class="line">	print(<span class="string">f"<span class="subst">&#123;time.time() - start_time:<span class="number">.2</span>f&#125;</span>s: Program End"</span>)</span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731171321116.png" alt="image-20210731171321116"></p>
<h3 id="简易聊天系统"><a href="#简易聊天系统" class="headerlink" title="简易聊天系统"></a>简易聊天系统</h3><p>构造一个通信，类似于区块链的通信</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> textwrap <span class="keyword">import</span> dedent</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConnectionPool</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.connection_pool = set()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send_welcome_message</span><span class="params">(self,writer)</span>:</span></span><br><span class="line">        message = dedent(<span class="string">f"""</span></span><br><span class="line"><span class="string">        ===</span></span><br><span class="line"><span class="string">        Welcome <span class="subst">&#123;writer.nickname&#125;</span>!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        There are <span class="subst">&#123;len(self.connection_pool) - <span class="number">1</span>&#125;</span> user(s) here beside you</span></span><br><span class="line"><span class="string">       </span></span><br><span class="line"><span class="string">        Help:</span></span><br><span class="line"><span class="string">         - Type anything to chat</span></span><br><span class="line"><span class="string">         - /list will list all the connected users</span></span><br><span class="line"><span class="string">         - /quit will disconnect you</span></span><br><span class="line"><span class="string">        ===</span></span><br><span class="line"><span class="string">        """</span>)</span><br><span class="line"></span><br><span class="line">        writer.write(<span class="string">f"<span class="subst">&#123;message&#125;</span>/n"</span>.encode())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">broadcast</span><span class="params">(self,writer,message)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> user <span class="keyword">in</span> self.connection_pool:</span><br><span class="line">            <span class="keyword">if</span> user != writer:</span><br><span class="line">                <span class="comment"># We don't need to also broadcast to the user sending the message</span></span><br><span class="line">                user.write(<span class="string">f"<span class="subst">&#123;message&#125;</span>/n"</span>.encode())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">broadcast_user_join</span><span class="params">(self,writer)</span>:</span></span><br><span class="line">        self.broadcast(writer,<span class="string">f"<span class="subst">&#123;writer.nickname&#125;</span> just joined"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">broadcast_user_quit</span><span class="params">(self,writer)</span>:</span></span><br><span class="line">        self.broadcast(writer,<span class="string">f"<span class="subst">&#123;writer.nickname&#125;</span> just quit"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">broadcast_new_message</span><span class="params">(self,writer,message)</span>:</span></span><br><span class="line">        self.broadcast(writer,<span class="string">f"[<span class="subst">&#123;writer.nickname&#125;</span>] <span class="subst">&#123;message&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">list_users</span><span class="params">(self,writer)</span>:</span></span><br><span class="line">        message = <span class="string">"===/n"</span></span><br><span class="line">        message += <span class="string">"Currently connected users:"</span></span><br><span class="line">        <span class="keyword">for</span> user <span class="keyword">in</span> self.connection_pool:</span><br><span class="line">            <span class="keyword">if</span> user == writer:</span><br><span class="line">                message += <span class="string">f"/n - <span class="subst">&#123;user.nickname&#125;</span> (you)"</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                message += <span class="string">f"/n - <span class="subst">&#123;user.nickname&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">        message += <span class="string">"/n==="</span></span><br><span class="line">        writer.write(<span class="string">f"<span class="subst">&#123;message&#125;</span>/n"</span>.encode())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_new_user_to_pool</span><span class="params">(self, writer)</span>:</span></span><br><span class="line">        self.connection_pool.add(writer)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove_user_from_pool</span><span class="params">(self,writer)</span>:</span></span><br><span class="line">        self.connection_pool.remove(writer)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">handle_connection</span><span class="params">(reader,writer)</span>:</span></span><br><span class="line">    <span class="comment"># Get a nickname for the new client</span></span><br><span class="line">    writer.write(<span class="string">"&gt; Choose your nickname: "</span>.encode())</span><br><span class="line"></span><br><span class="line">    response = <span class="keyword">await</span> reader.readuntil(<span class="string">b"/n"</span>)</span><br><span class="line">    writer.nickname = response.decode().strip()</span><br><span class="line"></span><br><span class="line">    connection_pool.add_new_user_to_pool(writer)</span><br><span class="line">    connection_pool.send_welcome_message(writer)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Announce the arrival of this new user</span></span><br><span class="line">    connection_pool.broadcast_user_join(writer)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            data = <span class="keyword">await</span> reader.readuntil(<span class="string">b"/n"</span>)</span><br><span class="line">        <span class="keyword">except</span> asyncio.exceptions.IncompleteReadError:</span><br><span class="line">            connection_pool.broadcast_user_quit(writer)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        message = data.decode().strip()</span><br><span class="line">        <span class="keyword">if</span> message == <span class="string">"/quit"</span>:</span><br><span class="line">            connection_pool.broadcast_user_quit(writer)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">elif</span> message == <span class="string">"/list"</span>:</span><br><span class="line">            connection_pool.list_users(writer)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            connection_pool.broadcast_new_message(writer,message)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">await</span> writer.drain()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> writer.is_closing():</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># We're new outside the message loop, and the user has quit.Let's clean up...</span></span><br><span class="line">    writer.close()</span><br><span class="line">    <span class="keyword">await</span> writer.wait_closed()</span><br><span class="line">    connection_pool.remove_user_from_pool(writer)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    server = <span class="keyword">await</span> asyncio.start_server(handle_connection,<span class="string">"0.0.0.0"</span>,<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> server:</span><br><span class="line">        <span class="keyword">await</span> server.serve_forever()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">connection_pool = ConnectionPool()</span><br><span class="line">asyncio.run(main())</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731171000653.png" alt="image-20210731171000653"></p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731171014807.png" alt="image-20210731171014807"></p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731171025014.png" alt="image-20210731171025014"></p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731171036384.png" alt="image-20210731171036384"></p>
<h2 id="chapter-6"><a href="#chapter-6" class="headerlink" title="chapter 6"></a>chapter 6</h2><blockquote>
<p>加密</p>
</blockquote>
<h3 id="example-2"><a href="#example-2" class="headerlink" title="example"></a>example</h3><h4 id="1-验证数据完整"><a href="#1-验证数据完整" class="headerlink" title="1 验证数据完整"></a>1 验证数据完整</h4><blockquote>
<p>发送的时候，把原文和sha256加密的东西一起发送过去</p>
<p>验证的时候，对数据sha256，对比值是否相等</p>
</blockquote>
<p>alice发生数据给bob</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha256</span><br><span class="line">message = <span class="string">"Hello Bob, Let's meet at the Kruger National Park on 2020-12-12 at 1pm."</span></span><br><span class="line">hash_message = sha256((<span class="string">"p@55w0rd"</span> + message).encode()).hexdigest()</span><br><span class="line">print(hash_message)</span><br></pre></td></tr></table></figure>
<p>bob验证数据未被修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha256</span><br><span class="line">alices_message = <span class="string">"Hello Bob, Let's meet at the Kruger National Park on 2020-12-12 at 1pm."</span></span><br><span class="line">alices_hash = <span class="string">"39aae6ffdb3c0ac1c1cc0f50bf08871a729052cf1133c4c9b44a5bab8fb66211"</span></span><br><span class="line">hash_message = sha256((<span class="string">"p@55w0rd"</span> + alices_message).encode()).hexdigest()</span><br><span class="line"><span class="keyword">if</span> hash_message == alices_hash:</span><br><span class="line">    print(<span class="string">"Message has not been tampered with"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731171637680.png" alt="image-20210731171637680"></p>
<h4 id="2-加密传送数据"><a href="#2-加密传送数据" class="headerlink" title="2 加密传送数据"></a>2 加密传送数据</h4><blockquote>
<p>发送数据：</p>
<ul>
<li>公钥发送</li>
<li>私钥对数据签名</li>
</ul>
<p>接收</p>
<p>verify验证</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> nacl.encoding</span><br><span class="line"><span class="keyword">import</span> nacl.signing</span><br><span class="line"></span><br><span class="line"><span class="comment">#Generate a new key-pair for Bob</span></span><br><span class="line">bobs_private_key = nacl.signing.SigningKey.generate()</span><br><span class="line">bobs_public_key = bobs_private_key.verify_key</span><br><span class="line">print(bobs_public_key)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Since it's bytes,we'll need to serialize the key to a readable format before publishing it:</span></span><br><span class="line">bobs_public_key_hex = bobs_public_key.encode(encoder=nacl.encoding.HexEncoder)</span><br><span class="line">print(<span class="string">"/n/n"</span>)</span><br><span class="line">print(bobs_public_key_hex)</span><br><span class="line"><span class="comment">#Now,Let's sign a message with it</span></span><br><span class="line">signed = bobs_private_key.sign(<span class="string">b"Send $37 to Alice"</span>)</span><br><span class="line">print(<span class="string">"/n/n"</span>)</span><br><span class="line">print(signed)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731171918053.png" alt="image-20210731171918053"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> nacl.encoding</span><br><span class="line"><span class="keyword">import</span> nacl.signing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># From the above example...</span></span><br><span class="line">bobs_public_key = <span class="string">'acc5cc1750b841f0b383e5f620282946476c37d602c42b9dbaccb9db758b728e'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># We generate the verify_key</span></span><br><span class="line">verify_key = nacl.signing.VerifyKey(bobs_public_key,encoder=nacl.encoding.HexEncoder)</span><br><span class="line"></span><br><span class="line">signed_message = <span class="string">b"/x8b/x08/x93/xb0/xda!r)/x19i/x18d/xe0/xbbi/x8a@c/xf8-/x8e/xbdr/xb7/xe8%/x0eez/x99/xd2/x0c/xc8/x14_/x8d/x02zWV/x8e/x81/xfb[9/x9b/x9d/x1b/xbb/xda/xe7/x05/x945/xc2/xef~/x17/x90/xfd3'/xc3/x00Send $37 to Alice"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Now we attempt to verify the message</span></span><br><span class="line"><span class="comment"># Any invalidation will result in an Exception being thrown</span></span><br><span class="line">verify_key.verify(signed_message)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731172022526.png" alt="image-20210731172022526"></p>
<p>如果修改bobs_public_key/signed_message为错误的，则</p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731172057501.png" alt="image-20210731172057501"></p>
<h2 id="chapter-7"><a href="#chapter-7" class="headerlink" title="chapter 7"></a>chapter 7</h2><blockquote>
<p>整合</p>
</blockquote>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210731172254999.png" alt="image-20210731172254999"></p>
<h1 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h1><h2 id="0-完整代码"><a href="#0-完整代码" class="headerlink" title="0 完整代码"></a>0 完整代码</h2><p>链接：<a href="https://github.com/dvf/blockchain" target="_blank" rel="noopener">https://github.com/dvf/blockchain</a></p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807173529463.png" alt="image-20210807173529463"></p>
<h2 id="1-工具安装"><a href="#1-工具安装" class="headerlink" title="1 工具安装"></a>1 工具安装</h2><p>安装python（版本3.8）和poetry</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install python3.8</span><br><span class="line">#ln -s 把python3和python3.8链接</span><br><span class="line"></span><br><span class="line">$ curl -sSL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;sdispater&#x2F;poetry&#x2F;master&#x2F;get-poetry.py | python</span><br><span class="line"></span><br><span class="line">#安装依赖</span><br><span class="line">poetry add pynacl structlog colorama marshmallow marshmallow-oneofschema aiohttp</span><br><span class="line"></span><br><span class="line">pip install pipenv </span><br><span class="line">pipenv install </span><br><span class="line">pip install Flask&#x3D;&#x3D;0.12.2 requests&#x3D;&#x3D;2.18.4</span><br></pre></td></tr></table></figure>
<h2 id="1启动节点"><a href="#1启动节点" class="headerlink" title="1启动节点"></a>1启动节点</h2><p>代码下载后放到服务器上，启动节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ pipenv run python blockchain.py			#默认启动端口5000，启动5000端口的节点</span><br><span class="line">$ pipenv run python blockchain.py -p 5001</span><br><span class="line">$ pipenv run python blockchain.py --port 5002</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807171341824.png" alt="image-20210807171341824"></p>
<h2 id="2-使用"><a href="#2-使用" class="headerlink" title="2 使用"></a>2 使用</h2><h3 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h3><p>访问区块链</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ip:port&#x2F;chain 可以访问区块链</span><br><span class="line">http:&#x2F;&#x2F;156.233.254.97:5002&#x2F;chain</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807171442690.png" alt="image-20210807171442690"></p>
<h3 id="挖矿"><a href="#挖矿" class="headerlink" title="挖矿"></a>挖矿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ip:port&#x2F;mine</span><br><span class="line">http:&#x2F;&#x2F;156.233.254.97:5002&#x2F;mine</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807171527803.png" alt="image-20210807171527803"></p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807171542372.png" alt="image-20210807171542372" style="zoom:67%;"></p>
<h3 id="创建交易"><a href="#创建交易" class="headerlink" title="创建交易"></a>创建交易</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -H &quot;Content-Type: application&#x2F;json&quot; -d &#39;&#123;</span><br><span class="line"> &quot;sender&quot;: &quot;d4ee26eee15148ee92c6cd394edd974e&quot;,</span><br><span class="line"> &quot;recipient&quot;: &quot;someone-other-address&quot;,</span><br><span class="line"> &quot;amount&quot;: 1234</span><br><span class="line">&#125;&#39; &quot;http:&#x2F;&#x2F;156.233.254.97:5004&#x2F;transactions&#x2F;new&quot;</span><br><span class="line"></span><br><span class="line">curl -X POST -H &quot;Content-Type: application&#x2F;json&quot; -d &#39;&#123;</span><br><span class="line"> &quot;sender&quot;: &quot;d4ee26eee15148ee92c6cd394edd974e&quot;,</span><br><span class="line"> &quot;recipient&quot;: &quot;someone-other-address&quot;,</span><br><span class="line"> &quot;amount&quot;: 7979</span><br><span class="line">&#125;&#39; &quot;http:&#x2F;&#x2F;156.233.254.97:5002&#x2F;transactions&#x2F;new&quot;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807171921098.png" alt="image-20210807171921098"></p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807172056677.png" alt="image-20210807172056677"></p>
<h3 id="共识机制"><a href="#共识机制" class="headerlink" title="共识机制"></a>共识机制</h3><p>5002端口里面有三个块</p>
<p>5003端口开一个，只有一个初始块</p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807172258623.png" alt="image-20210807172258623"></p>
<p>将2注册到3上，让5003知道有5002这个节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -H &quot;Content-Type: application&#x2F;json&quot; -d &#39;&#123;</span><br><span class="line">	&quot;nodes&quot;:[&quot;156.233.254.97:5002&quot;]</span><br><span class="line">&#125;&#39; &quot;http:&#x2F;&#x2F;156.233.254.97:5003&#x2F;nodes&#x2F;register&quot;</span><br><span class="line"></span><br><span class="line">curl -X POST -H &quot;Content-Type: application&#x2F;json&quot; -d &#39;&#123;</span><br><span class="line">	&quot;nodes&quot;:[&quot;156.233.254.97:5004&quot;]</span><br><span class="line">&#125;&#39; &quot;http:&#x2F;&#x2F;156.233.254.97:5005&#x2F;nodes&#x2F;register&quot;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807172505247.png" alt="image-20210807172505247"></p>
<p>通过共识，5003更新节点跟5002一样</p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807172558767.png" alt="image-20210807172558767"></p>
<p><img src="/2021/08/07/23-59-Shuwen/image-20210807172613733.png" alt="image-20210807172613733"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Shuwen"
      src="/images/shuwen.jpg">
  <p class="site-author-name" itemprop="name">Shuwen</p>
  <div class="site-description" itemprop="description">做有意思的事，有意思地做事</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/warm-winter" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;warm-winter" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://kaaass.net/" title="https:&#x2F;&#x2F;kaaass.net&#x2F;" rel="noopener" target="_blank">KAAAsS</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://xuanxuanblingbling.github.io/" title="https:&#x2F;&#x2F;xuanxuanblingbling.github.io&#x2F;" rel="noopener" target="_blank">Clang裁缝店</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shuwen</span>
</div>
	<div class="powered-by">
		<i class="fa fa-user-md"></i>
		<span id="busuanzi_container_site_uv">
		  本站访客数:<span id="busuanzi_value_site_uv"></span>
		</span>
	</div>

  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
